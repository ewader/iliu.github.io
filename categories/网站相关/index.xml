<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>网站相关 on 老刘博客</title>
    <link>http://localhost:1313/categories/%E7%BD%91%E7%AB%99%E7%9B%B8%E5%85%B3/</link>
    <description>Recent content in 网站相关 on 老刘博客</description>
    <image>
      <title>老刘博客</title>
      <url>http://localhost:1313/img/liujinsuiyue.jpg</url>
      <link>http://localhost:1313/img/liujinsuiyue.jpg</link>
    </image>
    <generator>Hugo -- 0.151.1</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 06 Apr 2023 09:42:54 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/%E7%BD%91%E7%AB%99%E7%9B%B8%E5%85%B3/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>用lnmp安装thinkphp类的程序，文件夹没有权限</title>
      <link>http://localhost:1313/4344.html</link>
      <pubDate>Thu, 06 Apr 2023 09:42:54 +0000</pubDate>
      <guid>http://localhost:1313/4344.html</guid>
      <description>&lt;p&gt;前几天在安装CRMEB商城的时候，由于不想再用宝塔了，先是选择oneinstack,但是会有一些问题，比如，用www用户无法在终端运行php等。后来就使用军哥开发的lnmp。却又碰到了一个问题，那就是所有的文件夹，在设置玩读写权限后，依然之后public这个文件夹有读写的权限。这就很郁闷了，难道最终还必须上宝塔？&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前几天在安装CRMEB商城的时候，由于不想再用宝塔了，先是选择oneinstack,但是会有一些问题，比如，用www用户无法在终端运行php等。后来就使用军哥开发的lnmp。却又碰到了一个问题，那就是所有的文件夹，在设置玩读写权限后，依然之后public这个文件夹有读写的权限。这就很郁闷了，难道最终还必须上宝塔？<figure class="wp-block-image"></p>
<p><img decoding="async" src="https://cdn.staticaly.com/gh/ewader/img@master/20230406/xxx.1i7o6d36z55s.webp" alt="xxx" /> </figure></p>
<p>网上搜了一些教程，都是解决不了问题的。后来还是在lnmp.org的网站上找到了答案，感觉应该是设置了防跨站引起的，但是当时我已经把 .user.ini给删除了，看了那篇文章后才发现，光删除文件还不够，还需要在nginx的配置中进行设置。不过一个最简单的方法是，lnmp的开发者已经想到了这个问题，可以用lnmp自带的小工具脚本来解决。</p>
<h2 class="wp-block-heading" id="解决方法">解决方法：</h2>
<p>打开终端软件，连上服务器。</p>
<pre class="wp-block-code"><code>cd lnmp1.9
cd tools
./remove_open_basedir_restriction.sh
</code></pre>
<p>结束，再安装，权限一点问题都没有了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>Django设置使用MySql的时候遇到的一些坑</title>
      <link>http://localhost:1313/4298.html</link>
      <pubDate>Fri, 18 Nov 2022 00:17:14 +0000</pubDate>
      <guid>http://localhost:1313/4298.html</guid>
      <description>&lt;p&gt;Django默认使用的数据库是sqllit,如果是一个小项目的话是完全够用的，但是如果考虑到这个项目未来的话，一般都会换成Mysql或者其他更专业的数据库。本文，就来说说，在设置使用mysql的时候，遇到的一些问题及解决的方法。&lt;figure class=&#34;wp-block-image&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Django默认使用的数据库是sqllit,如果是一个小项目的话是完全够用的，但是如果考虑到这个项目未来的话，一般都会换成Mysql或者其他更专业的数据库。本文，就来说说，在设置使用mysql的时候，遇到的一些问题及解决的方法。<figure class="wp-block-image"></p>
<p><img decoding="async" src="https://cdn.staticaly.com/gh/ewader/img@master/20221118/OIP-C.3x9vnetzw6m0.webp" alt="OIP-C" /> </figure></p>
<h2 class="wp-block-heading" id="项目里设置引用mysql">项目里设置引用Mysql</h2>
<p>在setting.py里,把原来使用sqllit的语句删除或者注释掉，添加如下代码</p>
<pre class="wp-block-code"><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',   # 数据库引擎
        'NAME': '',  # 数据库名，先前创建的
        'USER': '',     # 用户名，可以自己创建用户
        'PASSWORD': '',  # 密码
        'HOST': '127.0.0.1',  # mysql服务所在的主机ip
        'PORT': '3306',         # mysql服务端口
    }
}</code></pre>
<p><strong>安装Python访问MySQL的模块</strong></p>
<p>Django官方已经不建议使用pymysql库了，而是改用mysqlclient，直接pip安装即可。</p>
<pre class="wp-block-code"><code>pip install mysqlclient</code></pre>
<p>在debian11上安装的时候，显示OSError: mysql_config not found的错误，查询得知，需要安装libmysqlclient-dev，但是用apt install libmysqlclient-dev的时候，安装不成功，提示是另一个分支，建议安装libmariadb-dev。所以安装这个即可。</p>
<pre class="wp-block-code"><code>apt install libmariadb-dev</code></pre>
<p>出错：error: command ‘x86_64-linux-gnu-gcc’ failed: No such file or directory</p>
<pre class="wp-block-code"><code>sudo apt-get install build-essential python3-dev libssl-dev libffi-dev libxml2 libxml2-dev libxslt1-dev zlib1g-dev
</code></pre>]]></content:encoded>
    </item>
    <item>
      <title>RackNerd的2022年黑五活动</title>
      <link>http://localhost:1313/4292.html</link>
      <pubDate>Tue, 15 Nov 2022 07:47:39 +0000</pubDate>
      <guid>http://localhost:1313/4292.html</guid>
      <description>&lt;p&gt;今年各大IDC的活动都不如往年，RackNerd也不例外，作为活动狂魔，双11活动刚结束，这不，又来了黑五的活动。&lt;/p&gt;
&lt;h2 class=&#34;wp-block-heading&#34; id=&#34;768-mb-kvm-vps&#34;&gt;768 MB KVM VPS&lt;/h2&gt;
&lt;ul class=&#34;wp-block-list&#34;&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;vCPU Core
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;10&lt;/strong&gt;&amp;nbsp;GB Pure SSD Storage
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;768&lt;/strong&gt;&amp;nbsp;MB RAM
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1000&lt;/strong&gt;&amp;nbsp;GB Monthly Transfer
  &lt;/li&gt;
  &lt;li&gt;
    1Gbps Network Port
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;Full&lt;/strong&gt;&amp;nbsp;Root Admin Access
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;Dedicated IPv4 Address
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;KVM&lt;/strong&gt;&amp;nbsp;/ SolusVM Control Panel
  &lt;/li&gt;
  &lt;li&gt;
    Available in: SJC, DFW, ORD, BUF, EWR, ATL
  &lt;/li&gt;
  &lt;li&gt;
    ONLY &lt;strong&gt;$10.28/YEAR&lt;/strong&gt;!
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex&#34;&gt;
  &lt;div class=&#34;wp-block-button&#34;&gt;
    &lt;a class=&#34;wp-block-button__link wp-element-button&#34; href=&#34;https://my.racknerd.com/aff.php?aff=1822&amp;pid=695&#34;&gt;下单&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;h2 class=&#34;wp-block-heading&#34; id=&#34;15gb-kvm-vps&#34;&gt;1.5GB KVM VPS&lt;/h2&gt;
&lt;ul class=&#34;wp-block-list&#34;&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;vCPU Core
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;30&lt;/strong&gt;&amp;nbsp;GB Pure SSD Storage
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1.5&lt;/strong&gt;&amp;nbsp;GB RAM
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;3000&lt;/strong&gt;&amp;nbsp;GB Monthly Transfer
  &lt;/li&gt;
  &lt;li&gt;
    1Gbps Network Port
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;Full&lt;/strong&gt;&amp;nbsp;Root Admin Access
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;Dedicated IPv4 Address
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;KVM&lt;/strong&gt;&amp;nbsp;/ SolusVM Control Panel
  &lt;/li&gt;
  &lt;li&gt;
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  &lt;/li&gt;
  &lt;li&gt;
    ONLY &lt;strong&gt;$16.88/YEAR&lt;/strong&gt;!
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex&#34;&gt;
  &lt;div class=&#34;wp-block-button&#34;&gt;
    &lt;a class=&#34;wp-block-button__link wp-element-button&#34; href=&#34;https://my.racknerd.com/aff.php?aff=1822&amp;pid=696&#34;&gt;下单&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;h2 class=&#34;wp-block-heading&#34; id=&#34;25gb-kvm-vps&#34;&gt;2.5GB KVM VPS&lt;/h2&gt;
&lt;ul class=&#34;wp-block-list&#34;&gt;
  &lt;li&gt;
    &lt;strong&gt;2&lt;/strong&gt;&amp;nbsp;vCPU Cores
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;60&lt;/strong&gt;&amp;nbsp;GB Pure SSD Storage
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;2.5&lt;/strong&gt;&amp;nbsp;GB RAM
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;7000&lt;/strong&gt;&amp;nbsp;GB Monthly Transfer
  &lt;/li&gt;
  &lt;li&gt;
    1Gbps Network Port
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;Full&lt;/strong&gt;&amp;nbsp;Root Admin Access
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;Dedicated IPv4 Address
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;KVM&lt;/strong&gt;&amp;nbsp;/ SolusVM Control Panel
  &lt;/li&gt;
  &lt;li&gt;
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  &lt;/li&gt;
  &lt;li&gt;
    ONLY &lt;strong&gt;$28.55/YEAR&lt;/strong&gt;!
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex&#34;&gt;
  &lt;div class=&#34;wp-block-button&#34;&gt;
    &lt;a class=&#34;wp-block-button__link wp-element-button&#34; href=&#34;https://my.racknerd.com/aff.php?aff=1822&amp;pid=697&#34;&gt;下单&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;h2 class=&#34;wp-block-heading&#34; id=&#34;35gb-kvm-vps&#34;&gt;3.5GB KVM VPS&lt;/h2&gt;
&lt;ul class=&#34;wp-block-list&#34;&gt;
  &lt;li&gt;
    &lt;strong&gt;2&lt;/strong&gt;&amp;nbsp;vCPU Cores
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;80&lt;/strong&gt;&amp;nbsp;GB Pure SSD Storage
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;3.5&lt;/strong&gt;&amp;nbsp;GB RAM
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;10,000&lt;/strong&gt;&amp;nbsp;GB Monthly Transfer
  &lt;/li&gt;
  &lt;li&gt;
    1Gbps Network Port
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;Full&lt;/strong&gt;&amp;nbsp;Root Admin Access
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;Dedicated IPv4 Address
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;KVM&lt;/strong&gt;&amp;nbsp;/ SolusVM Control Panel
  &lt;/li&gt;
  &lt;li&gt;
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  &lt;/li&gt;
  &lt;li&gt;
    ONLY &lt;strong&gt;$38.88/YEAR&lt;/strong&gt;!
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex&#34;&gt;
  &lt;div class=&#34;wp-block-button&#34;&gt;
    &lt;a class=&#34;wp-block-button__link wp-element-button&#34; href=&#34;https://my.racknerd.com/aff.php?aff=1822&amp;pid=698&#34;&gt;下单&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;h2 class=&#34;wp-block-heading&#34; id=&#34;45gb-kvm-vps&#34;&gt;4.5GB KVM VPS&lt;/h2&gt;
&lt;ul class=&#34;wp-block-list&#34;&gt;
  &lt;li&gt;
    &lt;strong&gt;3&lt;/strong&gt;&amp;nbsp;vCPU Cores
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;100&lt;/strong&gt;&amp;nbsp;GB Pure SSD Storage
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;4.5&lt;/strong&gt;&amp;nbsp;GB RAM
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;12,000&lt;/strong&gt;&amp;nbsp;GB Monthly Transfer
  &lt;/li&gt;
  &lt;li&gt;
    1Gbps Network Port
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;Full&lt;/strong&gt;&amp;nbsp;Root Admin Access
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;1&lt;/strong&gt;&amp;nbsp;Dedicated IPv4 Address
  &lt;/li&gt;
  &lt;li&gt;
    &lt;strong&gt;KVM&lt;/strong&gt;&amp;nbsp;/ SolusVM Control Panel
  &lt;/li&gt;
  &lt;li&gt;
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  &lt;/li&gt;
  &lt;li&gt;
    ONLY &lt;strong&gt;$48.77/YEAR&lt;/strong&gt;!
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex&#34;&gt;
  &lt;div class=&#34;wp-block-button&#34;&gt;
    &lt;a class=&#34;wp-block-button__link wp-element-button&#34; href=&#34;https://my.racknerd.com/aff.php?aff=1822&amp;pid=699&#34;&gt;下单&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;总体来说没有去年的优惠大，估计一年比一年贵，有需要的还是及早下单&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>今年各大IDC的活动都不如往年，RackNerd也不例外，作为活动狂魔，双11活动刚结束，这不，又来了黑五的活动。</p>
<h2 class="wp-block-heading" id="768-mb-kvm-vps">768 MB KVM VPS</h2>
<ul class="wp-block-list">
  <li>
    <strong>1</strong>&nbsp;vCPU Core
  </li>
  <li>
    <strong>10</strong>&nbsp;GB Pure SSD Storage
  </li>
  <li>
    <strong>768</strong>&nbsp;MB RAM
  </li>
  <li>
    <strong>1000</strong>&nbsp;GB Monthly Transfer
  </li>
  <li>
    1Gbps Network Port
  </li>
  <li>
    <strong>Full</strong>&nbsp;Root Admin Access
  </li>
  <li>
    <strong>1</strong>&nbsp;Dedicated IPv4 Address
  </li>
  <li>
    <strong>KVM</strong>&nbsp;/ SolusVM Control Panel
  </li>
  <li>
    Available in: SJC, DFW, ORD, BUF, EWR, ATL
  </li>
  <li>
    ONLY <strong>$10.28/YEAR</strong>!
  </li>
</ul>
<div class="wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex">
  <div class="wp-block-button">
    <a class="wp-block-button__link wp-element-button" href="https://my.racknerd.com/aff.php?aff=1822&pid=695">下单</a>
  </div>
</div>
<h2 class="wp-block-heading" id="15gb-kvm-vps">1.5GB KVM VPS</h2>
<ul class="wp-block-list">
  <li>
    <strong>1</strong>&nbsp;vCPU Core
  </li>
  <li>
    <strong>30</strong>&nbsp;GB Pure SSD Storage
  </li>
  <li>
    <strong>1.5</strong>&nbsp;GB RAM
  </li>
  <li>
    <strong>3000</strong>&nbsp;GB Monthly Transfer
  </li>
  <li>
    1Gbps Network Port
  </li>
  <li>
    <strong>Full</strong>&nbsp;Root Admin Access
  </li>
  <li>
    <strong>1</strong>&nbsp;Dedicated IPv4 Address
  </li>
  <li>
    <strong>KVM</strong>&nbsp;/ SolusVM Control Panel
  </li>
  <li>
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  </li>
  <li>
    ONLY <strong>$16.88/YEAR</strong>!
  </li>
</ul>
<div class="wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex">
  <div class="wp-block-button">
    <a class="wp-block-button__link wp-element-button" href="https://my.racknerd.com/aff.php?aff=1822&pid=696">下单</a>
  </div>
</div>
<h2 class="wp-block-heading" id="25gb-kvm-vps">2.5GB KVM VPS</h2>
<ul class="wp-block-list">
  <li>
    <strong>2</strong>&nbsp;vCPU Cores
  </li>
  <li>
    <strong>60</strong>&nbsp;GB Pure SSD Storage
  </li>
  <li>
    <strong>2.5</strong>&nbsp;GB RAM
  </li>
  <li>
    <strong>7000</strong>&nbsp;GB Monthly Transfer
  </li>
  <li>
    1Gbps Network Port
  </li>
  <li>
    <strong>Full</strong>&nbsp;Root Admin Access
  </li>
  <li>
    <strong>1</strong>&nbsp;Dedicated IPv4 Address
  </li>
  <li>
    <strong>KVM</strong>&nbsp;/ SolusVM Control Panel
  </li>
  <li>
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  </li>
  <li>
    ONLY <strong>$28.55/YEAR</strong>!
  </li>
</ul>
<div class="wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex">
  <div class="wp-block-button">
    <a class="wp-block-button__link wp-element-button" href="https://my.racknerd.com/aff.php?aff=1822&pid=697">下单</a>
  </div>
</div>
<h2 class="wp-block-heading" id="35gb-kvm-vps">3.5GB KVM VPS</h2>
<ul class="wp-block-list">
  <li>
    <strong>2</strong>&nbsp;vCPU Cores
  </li>
  <li>
    <strong>80</strong>&nbsp;GB Pure SSD Storage
  </li>
  <li>
    <strong>3.5</strong>&nbsp;GB RAM
  </li>
  <li>
    <strong>10,000</strong>&nbsp;GB Monthly Transfer
  </li>
  <li>
    1Gbps Network Port
  </li>
  <li>
    <strong>Full</strong>&nbsp;Root Admin Access
  </li>
  <li>
    <strong>1</strong>&nbsp;Dedicated IPv4 Address
  </li>
  <li>
    <strong>KVM</strong>&nbsp;/ SolusVM Control Panel
  </li>
  <li>
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  </li>
  <li>
    ONLY <strong>$38.88/YEAR</strong>!
  </li>
</ul>
<div class="wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex">
  <div class="wp-block-button">
    <a class="wp-block-button__link wp-element-button" href="https://my.racknerd.com/aff.php?aff=1822&pid=698">下单</a>
  </div>
</div>
<h2 class="wp-block-heading" id="45gb-kvm-vps">4.5GB KVM VPS</h2>
<ul class="wp-block-list">
  <li>
    <strong>3</strong>&nbsp;vCPU Cores
  </li>
  <li>
    <strong>100</strong>&nbsp;GB Pure SSD Storage
  </li>
  <li>
    <strong>4.5</strong>&nbsp;GB RAM
  </li>
  <li>
    <strong>12,000</strong>&nbsp;GB Monthly Transfer
  </li>
  <li>
    1Gbps Network Port
  </li>
  <li>
    <strong>Full</strong>&nbsp;Root Admin Access
  </li>
  <li>
    <strong>1</strong>&nbsp;Dedicated IPv4 Address
  </li>
  <li>
    <strong>KVM</strong>&nbsp;/ SolusVM Control Panel
  </li>
  <li>
    Available in: LAX, SJC, DFW, ORD, BUF, EWR, ATL
  </li>
  <li>
    ONLY <strong>$48.77/YEAR</strong>!
  </li>
</ul>
<div class="wp-block-buttons is-layout-flex wp-block-buttons-is-layout-flex">
  <div class="wp-block-button">
    <a class="wp-block-button__link wp-element-button" href="https://my.racknerd.com/aff.php?aff=1822&pid=699">下单</a>
  </div>
</div>
<p>总体来说没有去年的优惠大，估计一年比一年贵，有需要的还是及早下单</p>
]]></content:encoded>
    </item>
    <item>
      <title>改用cloudcone的VPS</title>
      <link>http://localhost:1313/4285.html</link>
      <pubDate>Mon, 07 Nov 2022 06:58:25 +0000</pubDate>
      <guid>http://localhost:1313/4285.html</guid>
      <description>&lt;p&gt;上个月，由于服务器到期加上注销备案，需要找一个便宜、稳定的香港vps，大厂的云又太贵，看双十一也没有打算作活动的意思。后来看老张说起硅云的云服务器，十年之约用户的福利，2C4G一年380块钱，看了一下网上的介绍，说什么的都有。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>上个月，由于服务器到期加上注销备案，需要找一个便宜、稳定的香港vps，大厂的云又太贵，看双十一也没有打算作活动的意思。后来看老张说起硅云的云服务器，十年之约用户的福利，2C4G一年380块钱，看了一下网上的介绍，说什么的都有。</p>
<p><strong><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-luminous-vivid-orange-color">PS，网上的评论还真不是空穴来风，妈的，我用了一个月，退款的时候扣了我130。说是按原价计费。套路真深！</mark></strong><figure class="wp-block-image"></p>
<p><img decoding="async" src="https://cdn.staticaly.com/gh/ewader/img@master/20221107/OIP-C.677d9gnsgak0.webp" alt="OIP-C" /> </figure></p>
<p>抱着试试看的态度，入手了一台，下面谈谈用了快一个月的感受。</p>
<p>首先，VPS的系统都比较老，我常用的debian才是9.0的版本，而新版本是11了，于是，升级，从9升级到10,然后从10升级到11,用了大概1个小时。用oneinstack安装lnmp，用了大概40来分钟。把博客先迁了过来，打开速度还是不错的。硅云说的是用的cn2的线路，这点是加分项。但是它的硬盘和带宽真的是有点差。所以，无论是升级还是编译安装生产力系统都很慢。</p>
<p>看博客运行的还不错，打算把另外一个网站，以及我的商城之类的都迁移过来，就当是个展示吧，在这里出了点问题，另一个网站的数据库有点大，大概30m左右，用phpmyadmin，死活就是导入不进来，刚开始是数据表里有个问题，解决了这个问题之后，导入总是显示503错误。没办法，不用软件导了，直接用终端在数据库里用source的方法来导入，发现导入的时候，速度非常的慢，有的表都要几十秒甚至1分钟才能导入，不过后来算是成功搞进去了。</p>
<p>再来弄我的商城，安装的时候用的Mariadb10.5,商城竟然需要MYSQL5.7以上版本，按理说M也是达到了的，可能是商城程序的问题，没有兼容。那就换成Mysql好了，删除原来的Mariadb，编译安装mysql8.0,安装到中间，ssh断了，我以为是网络的问题，但是怎么重连都连不上。我觉得是我的问题，来回的升级系统，折腾数据库。那就重装系统吧。结果，等了1一个小时也没有装好。</p>
<p>赶紧联系客服，客服说2个小时解决。我问是什么问题，他说是硬盘的问题。看来，和我无关。这还没有咋折腾呢，硬盘就挂了，折腾了这么多的服务器，还从来没有玩坏过硬盘类。</p>
<p>这时候，对这个服务器就有点不满意了，然后就是备份的问题，我的备份方案是备份到本地NAS，结果是一言难尽，2m的小水管，备份是太慢了。</p>
<p>后来看MJJ以及城南旧事的推荐，说cloudcone也可以，看了看双11有活动，于是入手了一台，硅云已经申请退款了。</p>
<p>cloudcone复活节的活动<figure class="wp-block-table"></p>
<table>
  <tr>
    <td>
      <strong>2023-复活节·VPS活动</strong>
    </td>
  </tr>
  <tr>
    <td>
      CPU
    </td>
<pre><code>&lt;td&gt;
  内存
&lt;/td&gt;

&lt;td&gt;
  硬盘
&lt;/td&gt;

&lt;td&gt;
  流量/带宽/月
&lt;/td&gt;

&lt;td&gt;
  价格(续费不变)
&lt;/td&gt;

&lt;td&gt;
  链接
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      1核
    </td>
<pre><code>&lt;td&gt;
  0.5G
&lt;/td&gt;

&lt;td&gt;
  20GB
&lt;/td&gt;

&lt;td&gt;
  2T @1Gbps
&lt;/td&gt;

&lt;td&gt;
  10.99美元/年
&lt;/td&gt;

&lt;td&gt;
  &lt;strong&gt;&lt;a href=&quot;https://app.cloudcone.com.cn/vps/171/create?token=hashtag-2023-vps-1&amp;ref=8581&quot;&gt;购买&lt;/a&gt;&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      2核
    </td>
<pre><code>&lt;td&gt;
  2G
&lt;/td&gt;

&lt;td&gt;
  80GB
&lt;/td&gt;

&lt;td&gt;
  3T @1Gbps
&lt;/td&gt;

&lt;td&gt;
  29.26美元/年
&lt;/td&gt;

&lt;td&gt;
  &lt;strong&gt;&lt;a href=&quot;https://app.cloudcone.com.cn/vps/173/create?token=hashtag-2023-vps-3&amp;ref=8581&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;购买&lt;/a&gt;&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      4核
    </td>
<pre><code>&lt;td&gt;
  4G
&lt;/td&gt;

&lt;td&gt;
  180GB
&lt;/td&gt;

&lt;td&gt;
  5T @1Gbps
&lt;/td&gt;

&lt;td&gt;
  53.81美元/年
&lt;/td&gt;

&lt;td&gt;
  &lt;strong&gt;&lt;a href=&quot;https://app.cloudcone.com.cn/vps/175/create?token=hashtag-2023-vps-5&amp;ref=8581&quot;&gt;购买&lt;/a&gt;&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      4核
    </td>
<pre><code>&lt;td&gt;
  8G
&lt;/td&gt;

&lt;td&gt;
  280GB
&lt;/td&gt;

&lt;td&gt;
  10T @1Gbps
&lt;/td&gt;

&lt;td&gt;
  101.75美元/年
&lt;/td&gt;

&lt;td&gt;
  &lt;strong&gt;&lt;a href=&quot;https://app.cloudcone.com/vps/176/create?token=hashtag-2023-vps-6&amp;ref=8581&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;购买&lt;/a&gt;&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      8核
    </td>
<pre><code>&lt;td&gt;
  16G
&lt;/td&gt;

&lt;td&gt;
  570GB
&lt;/td&gt;

&lt;td&gt;
  10T @1Gbps
&lt;/td&gt;

&lt;td&gt;
  199.12美元/年
&lt;/td&gt;

&lt;td&gt;
  &lt;strong&gt;&lt;a href=&quot;https://app.cloudcone.com/vps/177/create?token=hashtag-2023-vps-7&amp;ref=8581&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;购买&lt;/a&gt;&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      <s>16核</s>
    </td>
<pre><code>&lt;td&gt;
  32G
&lt;/td&gt;

&lt;td&gt;
  1024GB
&lt;/td&gt;

&lt;td&gt;
  10T @1Gbps
&lt;/td&gt;

&lt;td&gt;
  390.00美元/年
&lt;/td&gt;

&lt;td&gt;
  &lt;strong&gt;&lt;a href=&quot;https://app.cloudcone.com.cn/vps/109/create?token=pre-bf-6&amp;ref=8581&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;购买&lt;/a&gt;&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
  </tr>
</table></figure> 
<p>PS</p>
<p>截止到目前，使用了快半年了，非常的满意</p>
]]></content:encoded>
    </item>
    <item>
      <title>加入51la的优站计划</title>
      <link>http://localhost:1313/4226.html</link>
      <pubDate>Tue, 16 Aug 2022 08:50:32 +0000</pubDate>
      <guid>http://localhost:1313/4226.html</guid>
      <description>&lt;p&gt;看到好几个站长都在推这个，正好对百度统计也有点不想用了，就试一试51la的统计吧。目前用了大概有一个月的时间，和百度统计比较了一下：&lt;/p&gt;
&lt;h2 class=&#34;wp-block-heading&#34; id=&#34;统计出来的流量比百度的多&#34;&gt;统计出来的流量比百度的多&lt;/h2&gt;
&lt;p&gt;我一个站，百度常年的流量差不多200+左右的IP，到了51la这边，每天基本上在300+左右，并且最近还在增加。看了下昨天的IP，399.也不知道是正好流量增加了，还是百度统计压流量了，还是51la虚报了。反正IP数增加了，也是一件很开心的事情。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>看到好几个站长都在推这个，正好对百度统计也有点不想用了，就试一试51la的统计吧。目前用了大概有一个月的时间，和百度统计比较了一下：</p>
<h2 class="wp-block-heading" id="统计出来的流量比百度的多">统计出来的流量比百度的多</h2>
<p>我一个站，百度常年的流量差不多200+左右的IP，到了51la这边，每天基本上在300+左右，并且最近还在增加。看了下昨天的IP，399.也不知道是正好流量增加了，还是百度统计压流量了，还是51la虚报了。反正IP数增加了，也是一件很开心的事情。</p>
<h2 class="wp-block-heading" id="关键字统计不准">关键字统计不准</h2>
<p>51la目前只能统计到bing的关键字，其他的基本上统计不到。其实百度基本上就统计自己家的。</p>
<h2 class="wp-block-heading" id="顺便加入了51la的优站计划">顺便加入了51la的优站计划</h2>
<p>主要是，用它的统计，参加这个计划，给钱。它上面说，加入后审核一周，等待期一周，基本上两周的时间，我申请了，基本上等了一个月，才通过了。一周估计也就几块钱。聊胜于无吧。</p>
<p>最后，放一个我的51laaff，需要注册的，点一下注册啊。</p>
<p>【51LA网站统计V6】新人注册立得5元现金收益～现在加入“优站计划”，还有额外收益赚取，点击链接了解详情 <a href="https://invite.51.la/1OnR3T1uy?target=V6" target="_blank" rel="noreferrer noopener"><a href="https://invite.51.la/1OnR3T1uy?target=V6">https://invite.51.la/1OnR3T1uy?target=V6</a></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>群晖安装trilium笔记web端不刷新的处理方法</title>
      <link>http://localhost:1313/4154.html</link>
      <pubDate>Sun, 26 Jun 2022 03:50:24 +0000</pubDate>
      <guid>http://localhost:1313/4154.html</guid>
      <description>&lt;p&gt;最初装上trilium上之后，发现web端新建笔记或者删除笔记等都不会刷新。也和中文博客群里的少君等人讨论过，也没有得出过什么结论，毕竟环境不同嘛，当时貌似也就我一个人遇到了这种情况。后来发现是网络有错误，是websocket链接错误。但是作为小白，也没有解决的办法。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>最初装上trilium上之后，发现web端新建笔记或者删除笔记等都不会刷新。也和中文博客群里的少君等人讨论过，也没有得出过什么结论，毕竟环境不同嘛，当时貌似也就我一个人遇到了这种情况。后来发现是网络有错误，是websocket链接错误。但是作为小白，也没有解决的办法。</p>
<p>后来张波老师也遇到了，原来用域名反代访问就会出现这个问题。群里的大神给出了NGINX下的解决方案，可是我用的群晖啊，没有nginx肿么办？</p>
<h3 class="wp-block-heading" id="其实用群晖的反代更简单">其实，用群晖的反代更简单</h3>
<p>打开群晖反代的设置界面，点击自定义标题，点新增，点websocket。保存，即可。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="732" height="677" src="https://tunan.org/wp-content/uploads/2022/06/a29f701cb0ead1b.png" alt="" class="wp-image-4155" /> </figure></p>
]]></content:encoded>
    </item>
    <item>
      <title>使用群晖自动备份网站</title>
      <link>http://localhost:1313/4131.html</link>
      <pubDate>Sat, 28 May 2022 08:23:06 +0000</pubDate>
      <guid>http://localhost:1313/4131.html</guid>
      <description>&lt;p&gt;不管是做网站也好，写独立博客也好，最重要的事情之一就是备份。几乎每一个站长都经历过一不小心，多年的心血付之东流的经历。不过好在现在备份的方法很多，可以备份到本地，可以备份的腾讯cos，阿里云等等。云储存也不贵，几十块钱甚至十几块可以用一年，唯一的缺点是这些云储存都收取上行流量费。也就是说，一旦你用到你的数据，想把数据下载到本地，是还要付出一些费用的。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>不管是做网站也好，写独立博客也好，最重要的事情之一就是备份。几乎每一个站长都经历过一不小心，多年的心血付之东流的经历。不过好在现在备份的方法很多，可以备份到本地，可以备份的腾讯cos，阿里云等等。云储存也不贵，几十块钱甚至十几块可以用一年，唯一的缺点是这些云储存都收取上行流量费。也就是说，一旦你用到你的数据，想把数据下载到本地，是还要付出一些费用的。</p>
<p>折腾群晖的时候，发现群晖的Active Back for Business这个套件可以自动的同步服务器上的文件，非常的方便，于是拿来备份网站，还是非常的方便的。</p>
<h2 class="wp-block-heading" id="安装active-back-for-business">安装Active Back for Business</h2>
<p>群晖套件中心里，找到Active Back for Business，并安装。不多说。</p>
<h2 class="wp-block-heading" id="使用active-back-for-business备份网站">使用Active Back for Business备份网站</h2>
<p>一、打开Active Back for Business套件，点击文件服务器。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="1490" height="718" src="https://tunan.org/wp-content/uploads/2022/05/2022-05-28-160751.png" alt="" class="wp-image-4132" /> </figure></p>
<p>二、点击添加服务器。这里我们选择rsync服务器。然后下一步。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="893" height="682" src="https://tunan.org/wp-content/uploads/2022/05/2022-05-28-161140.png" alt="" class="wp-image-4133" /> </figure></p>
<p>三、填写服务器信息，并点击完成。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="891" height="686" src="https://tunan.org/wp-content/uploads/2022/05/2022-05-28-161239.png" alt="" class="wp-image-4134" /> </figure></p>
<p>四、选择备份模式，这里老刘选择的是增量备份，也可以选择多版本备份，这样就可以自动备份你设定的几个版本。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="920" height="715" src="https://tunan.org/wp-content/uploads/2022/05/2022-05-28-161650.png" alt="" class="wp-image-4135" /> </figure></p>
<p>五、选择你网站文件所在的文件夹，选择备份时间，即可。</p>
<h2 class="wp-block-heading" id="可能会遇到的问题">可能会遇到的问题</h2>
<p>在填写服务器的时候，可能会提示服务器没有安装rsync，只需在服务器中安装这个服务即可。</p>
<pre class="wp-block-code"><code>#Debian或者Ubuntu
apt install rsync
CentOs
yum install rsync</code></pre>]]></content:encoded>
    </item>
    <item>
      <title>开始使用Argon主题</title>
      <link>http://localhost:1313/4079.html</link>
      <pubDate>Wed, 16 Mar 2022 02:38:21 +0000</pubDate>
      <guid>http://localhost:1313/4079.html</guid>
      <description>&lt;p&gt;一个月前更换了&lt;a href=&#34;https://tunan.org/4060.html&#34;&gt;Dragon&lt;/a&gt;主题，当时很多博友都表示有点不适合个人使用，我倒是感觉还行，最起码是把垃圾评论都给屏蔽了，唯一让我不太满意的就是对内存的占用，真的是挺大的。&lt;figure class=&#34;wp-block-image size-full&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; decoding=&#34;async&#34; width=&#34;1920&#34; height=&#34;1080&#34; src=&#34;https://tunan.org/wp-content/uploads/2022/03/1.jpg&#34; alt=&#34;&#34; class=&#34;wp-image-4082&#34; srcset=&#34;https://tunan.org/wp-content/uploads/2022/03/1.jpg 1920w, https://tunan.org/wp-content/uploads/2022/03/1-768x432.jpg 768w, https://tunan.org/wp-content/uploads/2022/03/1-1536x864.jpg 1536w&#34; sizes=&#34;(max-width: 1920px) 100vw, 1920px&#34; /&gt; &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;我用的是荷兰Liteserver主机，配置是2h2g，这个主机上只放了两个wordpress网站，内存就已经完全占用了，刚开始没有装缓存插件，内存直接就爆了，又加了2g的虚拟内存也不顶事。目测可能是和两外一个网站的B2主题冲突导致的。后来装了个缓存插件，基本上内存在90%，但是能用了。前几天主题升级了，看了一遍升级的文档，还是蛮复杂的。正在这是看到了南余生在群里推荐的这个主题。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>一个月前更换了<a href="https://tunan.org/4060.html">Dragon</a>主题，当时很多博友都表示有点不适合个人使用，我倒是感觉还行，最起码是把垃圾评论都给屏蔽了，唯一让我不太满意的就是对内存的占用，真的是挺大的。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="1920" height="1080" src="https://tunan.org/wp-content/uploads/2022/03/1.jpg" alt="" class="wp-image-4082" srcset="https://tunan.org/wp-content/uploads/2022/03/1.jpg 1920w, https://tunan.org/wp-content/uploads/2022/03/1-768x432.jpg 768w, https://tunan.org/wp-content/uploads/2022/03/1-1536x864.jpg 1536w" sizes="(max-width: 1920px) 100vw, 1920px" /> </figure></p>
<p>我用的是荷兰Liteserver主机，配置是2h2g，这个主机上只放了两个wordpress网站，内存就已经完全占用了，刚开始没有装缓存插件，内存直接就爆了，又加了2g的虚拟内存也不顶事。目测可能是和两外一个网站的B2主题冲突导致的。后来装了个缓存插件，基本上内存在90%，但是能用了。前几天主题升级了，看了一遍升级的文档，还是蛮复杂的。正在这是看到了南余生在群里推荐的这个主题。</p>
<p>看了一下老南的网站，绿油油挺好看的，很适合春天这个季节，布局也蛮好，于是就去Github上下了下来，简单调试了一下，就是目前这个样子了。</p>
<p>看了一下vps 的内存占用，立马下来了，只有44%了。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="263" height="232" src="https://tunan.org/wp-content/uploads/2022/03/xitong.png" alt="" class="wp-image-4080" /> </figure></p>
<p>功能虽然少了点，但是对于写博客来说，已经完全满足了</p>
]]></content:encoded>
    </item>
    <item>
      <title>更换为Dragon主题</title>
      <link>http://localhost:1313/4060.html</link>
      <pubDate>Fri, 11 Feb 2022 00:24:05 +0000</pubDate>
      <guid>http://localhost:1313/4060.html</guid>
      <description>&lt;p&gt;这几天被垃圾评论给盯上了，每天能收到10来个，很烦人。原来的主题虽然也是可以通过增加代码的方式来拦截一些非中文的垃圾评论，但是每次一升级主题又要重新设置，所以干脆用回Dragon主题。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>这几天被垃圾评论给盯上了，每天能收到10来个，很烦人。原来的主题虽然也是可以通过增加代码的方式来拦截一些非中文的垃圾评论，但是每次一升级主题又要重新设置，所以干脆用回Dragon主题。</p>
<p>这个主题别的都好，就是感觉没有原来的主题流畅。功能很强大，虽然有很多功能目前对我来说用不到。</p>
<p>为了省心，就这么用着吧</p>
]]></content:encoded>
    </item>
    <item>
      <title>Django部署在debian11服务器</title>
      <link>http://localhost:1313/4029.html</link>
      <pubDate>Fri, 14 Jan 2022 09:34:09 +0000</pubDate>
      <guid>http://localhost:1313/4029.html</guid>
      <description>&lt;p&gt;Python加Django开发网页程序真的很方便，连我这个菜鸟看看教程之类的也能写出来程序。本地测试完了之后，想在服务器上跑跑看，结果发现，要发布到服务器端，可是比PHP程序要麻烦的多，从昨天下午就开始看相关的教程，后来在宝塔面板下部署成功了，但是我不想用宝塔面板，于是继续折腾的道路，经过一天的折腾，重装了好几次测试的服务器，终于算是部署成功了，虽然只是一个测试的项目，但是总算又迈出去了一步不是。项目采用nginx+uwsgi+django。服务器端采用的是debian11。&lt;figure class=&#34;wp-block-image size-full&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Python加Django开发网页程序真的很方便，连我这个菜鸟看看教程之类的也能写出来程序。本地测试完了之后，想在服务器上跑跑看，结果发现，要发布到服务器端，可是比PHP程序要麻烦的多，从昨天下午就开始看相关的教程，后来在宝塔面板下部署成功了，但是我不想用宝塔面板，于是继续折腾的道路，经过一天的折腾，重装了好几次测试的服务器，终于算是部署成功了，虽然只是一个测试的项目，但是总算又迈出去了一步不是。项目采用nginx+uwsgi+django。服务器端采用的是debian11。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="1920" height="1141" src="https://tunan.org/wp-content/uploads/2022/01/7d4638de9da853b.jpeg" alt="" class="wp-image-4030" srcset="https://tunan.org/wp-content/uploads/2022/01/7d4638de9da853b.jpeg 1920w, https://tunan.org/wp-content/uploads/2022/01/7d4638de9da853b-768x456.jpeg 768w, https://tunan.org/wp-content/uploads/2022/01/7d4638de9da853b-1536x913.jpeg 1536w" sizes="(max-width: 1920px) 100vw, 1920px" /> </figure></p>
<h2 class="wp-block-heading" id="在服务器安装python3">在服务器安装python3</h2>
<p>由于debian11本身带有3.9.2版本的，所以，这里就不安装了。直接在data文件夹里建立一个虚拟目录。</p>
<pre class="wp-block-code"><code>python3 -m venv env
然后进入虚拟环境
source env/bin/activate
安装环境
可以用本地服务器的导出的requirements.txt，命令是：
pip freeze &gt; requirements.txt #在本地虚拟环境使用
切换到服务器端，上传这个文件到data目录下
 
pip install -r requirements.txt #这样就可以在建立起和你的本地一样的环境
pip install uwsgi#虚拟环境里装了后，需要在真实环境再运行一次



</code></pre>
<p>上传本地的项目到data<br>
在与manage.py同级目录下建立一个新文件。uwsgi.ini</p>
<pre class="wp-block-code"><code>#添加配置选择
&#91;uwsgi]
#配置和nginx连接的socket连接
socket=127.0.0.1:8997
#配置项目路径，项目的所在目录
chdir=/data/wwwroot/mysite/
#配置wsgi接口模块文件路径,也就是wsgi.py这个文件所在的目录
wsgi-file=myblog/wsgi.py
#配置启动的进程数
processes=4
#配置每个进程的线程数
threads=2
#配置启动管理主进程
master=True
#配置存放主进程的进程号文件
pidfile=uwsgi.pid
#配置dump日志记录
daemonize=uwsgi.log
home=/data/env/</code></pre>
<h2 class="wp-block-heading" id="安装nginx">安装nginx</h2>
<p>由于使用习惯了oneinstack,这里继续用这个面板安装，只需安装nginx即可，可去官网看安装方法，安装完成后，./vhost建立虚拟主机。虚拟主机的目录定位到你放置项目的位置。然后在usr/local/nginx/conf/vhost/下编辑你创建的这个主机的conf。加入以下的语句。</p>
<pre class="wp-block-code"><code>location / {
       include uwsgi_params;
       uwsgi_pass 127.0.0.1:8997;  #端口要和uwsgi里配置的一样
       uwsgi_param UWSGI_SCRIPT myblog.wsgi;  #wsgi.py所在的目录名+.wsgi
       uwsgi_param UWSGI_CHDIR /data/wwwroot/**/; #项目路径
    }
      location /static/ {
      alias /data/wwwroot/**/static/; #静态资源路径
      }

</code></pre><figure class="wp-block-image size-full">
<p><img loading="lazy" decoding="async" width="1123" height="650" src="https://tunan.org/wp-content/uploads/2022/01/3f0ca4a65443ea0.png" alt="" class="wp-image-4031" srcset="https://tunan.org/wp-content/uploads/2022/01/3f0ca4a65443ea0.png 1123w, https://tunan.org/wp-content/uploads/2022/01/3f0ca4a65443ea0-768x445.png 768w" sizes="(max-width: 1123px) 100vw, 1123px" /> </figure></p>
<h2 class="wp-block-heading" id="启动nginx和uwsgi">启动nginx和uwsgi</h2>
<pre class="wp-block-code"><code>service nginx restart

进项目目录，虚拟环境下
uwsgi --ini uwsgi.ini
</code></pre>
<p>然后打开你的域名，应该就没有问题了</p>
<h2 class="wp-block-heading" id="遇到的一些问题">遇到的一些问题：</h2>
<p>1、python manage.py runserver正常，但是浏览器用IP：8000打不开的问题，需要用以下命令</p>
<pre class="wp-block-preformatted">python manage.py runserver 0.0.0.0:8000</pre>
<p>2、没有在uwsgi.ini中配置虚拟环境目录，导致浏览器打开时候报502的错误。只需要正确的配置目录，是会正常启动的。</p>
]]></content:encoded>
    </item>
    <item>
      <title>试用荷兰的liteserverVPS</title>
      <link>http://localhost:1313/3968.html</link>
      <pubDate>Fri, 24 Dec 2021 07:41:31 +0000</pubDate>
      <guid>http://localhost:1313/3968.html</guid>
      <description>&lt;p&gt;从篱落主机转移到Virmach主机有2多个月了吧，以前一直挂着一个香港的CDN，也不感觉太慢，后来那个CDN有点不稳定了，于是去掉了CDN，发现网络有点不稳定，有时候快，有时候慢，像今天下载速度一度只有32k了，正好在城南旧事的网站上看到推荐这个VPS，看了下2h2g的配置，一个月是5欧元，年付的话也有不少的优惠，网上查了下黑五的时候还出过5折的优惠码，可惜的是现在已经不能用了。抱着试试看的态度，先买了一个月的。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>从篱落主机转移到Virmach主机有2多个月了吧，以前一直挂着一个香港的CDN，也不感觉太慢，后来那个CDN有点不稳定了，于是去掉了CDN，发现网络有点不稳定，有时候快，有时候慢，像今天下载速度一度只有32k了，正好在城南旧事的网站上看到推荐这个VPS，看了下2h2g的配置，一个月是5欧元，年付的话也有不少的优惠，网上查了下黑五的时候还出过5折的优惠码，可惜的是现在已经不能用了。抱着试试看的态度，先买了一个月的。</p>
<p>实际体验下来还是不错，比Virmach速度快了不少，尽管ping值不是很低，但是状态一直还比较稳定。用17ce看了一下速度，竟然都是绿色的。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="856" height="652" src="https://tunan.org/wp-content/uploads/2021/12/7dbeb8e3f0a22a1.png" alt="" class="wp-image-3969" srcset="https://tunan.org/wp-content/uploads/2021/12/7dbeb8e3f0a22a1.png 856w, https://tunan.org/wp-content/uploads/2021/12/7dbeb8e3f0a22a1-768x585.png 768w" sizes="(max-width: 856px) 100vw, 856px" /> </figure></p>
<p>下载速度也不错<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="1498" height="511" src="https://tunan.org/wp-content/uploads/2021/12/a4b54a2c18d0530.png" alt="" class="wp-image-3970" srcset="https://tunan.org/wp-content/uploads/2021/12/a4b54a2c18d0530.png 1498w, https://tunan.org/wp-content/uploads/2021/12/a4b54a2c18d0530-768x262.png 768w" sizes="(max-width: 1498px) 100vw, 1498px" /> </figure></p>
<p>感觉还是不错的，先用上一个月试试，如果不错的话，可以考虑买长期的。</p>
<p>据城南旧事所说，荷兰的这个VPS服务商成立与2007年，还是挺有实力的。而且空间的稳定性非常的不错。价格也不离谱。有兴趣的朋友可以看看。</p>
<p>以下是我的AFF地址，觉得可以的，从我这走一单啊，哈哈</p>
<p><a href="https://clients.liteserver.nl/aff.php?aff=350">荷兰LiteseverVPS</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>python开发web程序，最好还是在Linux下</title>
      <link>http://localhost:1313/3947.html</link>
      <pubDate>Tue, 14 Dec 2021 12:57:17 +0000</pubDate>
      <guid>http://localhost:1313/3947.html</guid>
      <description>&lt;p&gt;看了一些python教程，很多都是在windows下进行的开发，由于老刘对linux还算是有一丢丢的了解，所以从开始就在ubuntu下进行。前两天由于要在windows下用电脑，用完之后懒得重启，由于win10里也配置好了python的开发环境，所以就在win下写了一些代码。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>看了一些python教程，很多都是在windows下进行的开发，由于老刘对linux还算是有一丢丢的了解，所以从开始就在ubuntu下进行。前两天由于要在windows下用电脑，用完之后懒得重启，由于win10里也配置好了python的开发环境，所以就在win下写了一些代码。</p>
<img loading="lazy" decoding="async" class="alignnone size-full wp-image-3948" src="https://tunan.org/wp-content/uploads/2021/12/OIP.jpeg" alt="" width="474" height="296" /> 
<p>写完之后，浏览器打开显示404错误，小心的查代码，也找不到错误的地方，明明有这个网页的模板，就是显示404，折腾了1个多小时。也每发现错误之处。后来实在是烦躁，干脆不搞了。</p>
<p>隔了一天，进入ubuntu，浏览器打开，还是显示404，这点没错，说明程序确实有问题，但是浏览器里给出了错误出在那一个文件，那一行。看了一下是把模板里的一个路由users写成了user了，然后就找不到user这个页面。就是这么点错误，在win下就是不给你详细的出错信息。</p>
<p>后来看了一下windows的文档，在里面也明确的说，开发python的web程序，建议使用linux。所以，新手朋友如果想学python，不妨先熟悉一下LINUX。其实也是蛮简单的。磨刀不误砍柴工。</p>
]]></content:encoded>
    </item>
    <item>
      <title>转到virmach</title>
      <link>http://localhost:1313/3934.html</link>
      <pubDate>Fri, 05 Nov 2021 04:05:56 +0000</pubDate>
      <guid>http://localhost:1313/3934.html</guid>
      <description>&lt;p&gt;看看篱落的VPS月底就到期了，也不打算再续费了。去年在Virmach买了一个便宜的VPS，2h2g才20$,算下来也就是人民币100来块钱，这一年来放了一个小玩艺，也稳定的，王志勇大佬貌似一直都是用的这个。反正就是个博客呗，放那都行，反正也没有几个人看。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>看看篱落的VPS月底就到期了，也不打算再续费了。去年在Virmach买了一个便宜的VPS，2h2g才20$,算下来也就是人民币100来块钱，这一年来放了一个小玩艺，也稳定的，王志勇大佬貌似一直都是用的这个。反正就是个博客呗，放那都行，反正也没有几个人看。</p>
<p> </p>
<p>用了10几分钟弄完了，其实感觉速度也还行。</p>
<img loading="lazy" decoding="async" class="alignnone size-full wp-image-3935" src="https://tunan.org/wp-content/uploads/2021/11/iliu_org_20211105120520505832.png" alt="" width="1480" height="511" srcset="https://tunan.org/wp-content/uploads/2021/11/iliu_org_20211105120520505832.png 1480w, https://tunan.org/wp-content/uploads/2021/11/iliu_org_20211105120520505832-768x265.png 768w" sizes="(max-width: 1480px) 100vw, 1480px" />]]></content:encoded>
    </item>
    <item>
      <title>用input和字典初步实现我的一点小想法</title>
      <link>http://localhost:1313/3929.html</link>
      <pubDate>Sat, 30 Oct 2021 04:28:51 +0000</pubDate>
      <guid>http://localhost:1313/3929.html</guid>
      <description>&lt;p&gt;从决心要学Python开始，到现在差不多一周的时间了吧，买了一本《Python编程，从入门到实践》的书，目前看到了第九章，函数篇。&lt;/p&gt;
&lt;p&gt;通过上面8章的学习，基本上有了实现我那个小项目的想法。今天根据前八章的知识，初步用input函数，实现了用特殊关键字的查询。继续加油。&lt;br&gt;
&lt;code class=&#34;language-php&#34;&gt;&lt;/code&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>从决心要学Python开始，到现在差不多一周的时间了吧，买了一本《Python编程，从入门到实践》的书，目前看到了第九章，函数篇。</p>
<p>通过上面8章的学习，基本上有了实现我那个小项目的想法。今天根据前八章的知识，初步用input函数，实现了用特殊关键字的查询。继续加油。<br>
<code class="language-php"></code></p>
<pre class="language-php line-numbers">kehu = {
	'张明':{
		'右眼度数':'-1.25',
		'左眼度数':'-2.00',
		'瞳距':'60mm',
		'镜架':'纯钛',
		'镜片':'康耐特',
		'价格':'￥450',
		'手机号码':'13027511600',
	},
}
xingming = input("请输入你的姓名：")
shoujihaoma = input("请输入你的手机号码：")
for name , info in kehu.items():
	if name == xingming and info['手机号码'] == shoujihaoma:
		right = f"{info['右眼度数']}"
		lift = f"{info['左眼度数']}"
		tongju = f"{info['瞳距']}"
		jingjia = f"{info['镜架']}"
		jingpian = f"{info['镜片']}"
		jiage = f"{info['价格']}"
print("验光单")
		print(f"姓名：{name}")
		print(f"右眼度数:{right} 左眼度数：{lift}")
		print(f"瞳距：{tongju} ")
	else:
		print("您输入的资料不正确，请重新输入")
</pre>
<p> </p>
<p>虽然简单，确实独立写出来的，应该是一大步吧。</p>
<img loading="lazy" decoding="async" class="alignnone size-full wp-image-3930" src="https://tunan.org/wp-content/uploads/2021/10/iliu_org_20211030122825411700.png" alt="" width="1013" height="602" srcset="https://tunan.org/wp-content/uploads/2021/10/iliu_org_20211030122825411700.png 1013w, https://tunan.org/wp-content/uploads/2021/10/iliu_org_20211030122825411700-768x456.png 768w" sizes="(max-width: 1013px) 100vw, 1013px" /> 
<p>学好了，用python自己做个博客，哈哈哈</p>
]]></content:encoded>
    </item>
    <item>
      <title>几种Linux系统安装之后的体验</title>
      <link>http://localhost:1313/3925.html</link>
      <pubDate>Mon, 25 Oct 2021 01:18:46 +0000</pubDate>
      <guid>http://localhost:1313/3925.html</guid>
      <description>&lt;p&gt;前一段张波老师说打算学习Python。正好老刘也有这么一个心思。之所以要学这个，是因为老刘一直以来都想弄一个客户查询系统。这个系统也很简单，只要几个页面就能完成。实现的功能是，1、后台可以添加客户资料。2、前台通过用户名和手机号码可以查询各自的详情。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前一段张波老师说打算学习Python。正好老刘也有这么一个心思。之所以要学这个，是因为老刘一直以来都想弄一个客户查询系统。这个系统也很简单，只要几个页面就能完成。实现的功能是，1、后台可以添加客户资料。2、前台通过用户名和手机号码可以查询各自的详情。</p>
<p>曾经和一个搞开发的朋友聊起过这个玩意，他嫌太简单，让我自己弄。可惜我一直静不下心来做。</p>
<p>要说编程老刘还算是有一丢丢的基础吧。毕竟在大学也是学过True Basic 以及C语言和VB的人。尽管当时学的也不咋地，就是混个学分。现在也早已经把知识还给了我的老师。</p>
<p>看了一下Python的教程，感觉是我的菜。比当年学的那些个语言要简单的多了。基本上就是写英语句子呗。所以，下定决心系统的学习一下，争取能把我那个小玩意给弄出来。于是，有了这个折腾安装Linux的经历。</p>
<h2 id="深度deepin-os">深度deepin os</h2>
<p>首先考虑的就是深度deepin的这个系统。毕竟在国内的名气更大，各方面也挺完善。安装上用了不到一天，卸载了。主要是因为：</p>
<p>第一，桌面偶有卡住的现象。发生在我使用Chrome的时候，整个卡住了，就鼠标能动，别的动动不了，也点不动别的东西。最后强制关机。</p>
<p>第二，上面那个原因可能还是小概率的事件。最主要的原因是老刘需要使用群晖的drive这个软件。以便同步我的keepassxc。可惜的是，安装上之后，打不开这个软件。在深度的论坛上发布了相关的帖子，也没有啥回音。只好弃之。</p>
<h2 id="linuxmint">Linuxmint</h2>
<p>这个一款排名也比较靠前的系统，以Ubuntu为母本开发出来的。系统运行非常的流畅。尽管存在中文化不足的毛病，但是通过网上的一些教程，还是解决了这个问题。群晖的那个软件也可以使用。让老刘最终放弃的原因是总感觉用这个系统后，看着费眼。所以作为备选的系统，在测试一下别的。</p>
<h2 id="ubuntukelly">Ubuntukelly</h2>
<p>优麒麟系统，也是以Ubuntu为母本开发的，中文化很好。界面和Windows 10的界面基本上90%的相似。上手没难度。更难能可贵的是，这个系统可以直接运行安卓的软件。</p>
<p>使用了半天，最终还是放弃了。原因是卡顿，不丝滑。特别是使用wps编辑文档的时候，是真的卡，别的程序倒是还好。不知道这么卡顿，国内的很多部门是咋用的。</p>
<h2 id="ubuntu原版">Ubuntu原版</h2>
<p>本来就打算装回Linuxmint算了，最后觉得吧，都试了这么些了，不如装装原版的试试吧。结果出乎老刘的意料。系统运行的非常流畅，中文化很好（尽管没有农历的日期之类的，不过应该也是可以安装的），最重要的是浏览网页几乎和win下没有两样了。</p>
<p>最终决定，就用原版的Ubuntu系统了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>被百度劲风算法搞了</title>
      <link>http://localhost:1313/3911.html</link>
      <pubDate>Sun, 26 Sep 2021 07:11:19 +0000</pubDate>
      <guid>http://localhost:1313/3911.html</guid>
      <description>&lt;p&gt;最近几天发现从网站上来咨询老刘的客户少了，以前多的时候有4-5个，少的时候也有1-2个来咨询一些问题，有些成交了，有些没有成交。但是最近一段时间，加老刘微信的人数直线下降，这几天来甚至都没有人了。打开百度统计发现日IP只有几十个了，然后用站长工具查了一下发现，关键字全都被搞没了。我去！怪不得呢。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>最近几天发现从网站上来咨询老刘的客户少了，以前多的时候有4-5个，少的时候也有1-2个来咨询一些问题，有些成交了，有些没有成交。但是最近一段时间，加老刘微信的人数直线下降，这几天来甚至都没有人了。打开百度统计发现日IP只有几十个了，然后用站长工具查了一下发现，关键字全都被搞没了。我去！怪不得呢。</p>
<p>网站基本上都是原创的，即便不是也都是从国外的网站上翻译过来的，质量还是很高的，前一段时间甚至都是秒收的。百思不得其解之后，看到了百度更新的所谓的“劲风算法”。<figure class="wp-block-image size-full"></p>
<p><img loading="lazy" decoding="async" width="1524" height="369" src="https://tunan.org/wp-content/uploads/2021/09/20210926150921.png" alt="" class="wp-image-3912" srcset="https://tunan.org/wp-content/uploads/2021/09/20210926150921.png 1524w, https://tunan.org/wp-content/uploads/2021/09/20210926150921-768x186.png 768w" sizes="(max-width: 1524px) 100vw, 1524px" /> </figure></p>
<blockquote class="wp-block-quote is-layout-flow wp-block-quote-is-layout-flow">
  <p>
    页面内容与站点本身所属领域不符，或站点无专注领域，多为采集拼凑内容。
  </p>
</blockquote>
<p>这还要从郑州8月份的这个疫情说起，疫情期间在家没事，忽然觉得不如把所有的网站都集中到一个域名上。用不同的二级域名，这样，一是可以省却一笔服务器的费用，而是备案的域名可以使用国内的服务器，速度快，还能使用CDN。于是不声不响的把iliu.org301到了blog.jooj.vip。实际的体验什么的确实不错。</p>
<p>估计博客转过来之后，由于文章的范围比较杂，和原来眼镜的领域不符。导致把所有的关键词都给K了。受不了，这算法真是个傻蛋。该K的不K，不该K的乱k。</p>
<p>没办法，只好不用二级域名了呗，真是赔了夫人又折兵！</p>
<p>看了一下也不是孤立，原来老张的博客，收录了2w多，现在也只有两千多了</p>
]]></content:encoded>
    </item>
    <item>
      <title>记录一次疑似被入侵</title>
      <link>http://localhost:1313/3856.html</link>
      <pubDate>Fri, 03 Sep 2021 03:05:41 +0000</pubDate>
      <guid>http://localhost:1313/3856.html</guid>
      <description>&lt;p&gt;九月一日凌晨0点30分左右，手机收到腾讯云发来的短信：&lt;figure class=&#34;wp-block-pullquote&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;【腾讯云】尊敬的腾讯云用户，您好！您的腾讯云账号（账号 ID：***&lt;em&gt;&lt;em&gt;*\&lt;/em&gt;*，昵称：镜缘轩） 下的服务器： [jooj]，实例ID：**&lt;/em&gt;，地域：华北地区（北京），时间：2021-09-01 00:30:08，检测到存在未处理的木马文件：/tmp/php9a0u7f，您的服务器疑似被黑客入侵，可能造成严重损失，请即刻前往主机安全控制台（ ）查看详细信息。&lt;/figure&gt; &lt;figure class=&#34;wp-block-image size-full&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>九月一日凌晨0点30分左右，手机收到腾讯云发来的短信：<figure class="wp-block-pullquote"></p>
<blockquote>
<p>【腾讯云】尊敬的腾讯云用户，您好！您的腾讯云账号（账号 ID：***<em><em>*\</em>*，昵称：镜缘轩） 下的服务器： [jooj]，实例ID：**</em>，地域：华北地区（北京），时间：2021-09-01 00:30:08，检测到存在未处理的木马文件：/tmp/php9a0u7f，您的服务器疑似被黑客入侵，可能造成严重损失，请即刻前往主机安全控制台（ ）查看详细信息。</figure> <figure class="wp-block-image size-full"></p>
</blockquote>
<p><a href="https://tunan.org/wp-content/uploads/2021/09/1a8c276e8df392d.jpg"><img loading="lazy" decoding="async" width="641" height="461" src="https://tunan.org/wp-content/uploads/2021/09/1a8c276e8df392d.jpg" alt="" class="wp-image-3860" srcset="https://tunan.org/wp-content/uploads/2021/09/1a8c276e8df392d.jpg 641w, https://tunan.org/wp-content/uploads/2021/09/1a8c276e8df392d-300x216.jpg 300w" sizes="(max-width: 641px) 100vw, 641px" /></a></figure></p>
<p>由于当时已经熟睡，早上起床后才发现有了这个短信。</p>
<p>赶紧登录上服务器，到tmp目录查找，并没有发现腾讯短信里提到的文件。然后又查看各种系统的日志，发现确实有不少扫描器之类的在扫描，但是都没有登录成功。</p>
<p>网上查了一下相关的内容，发现也有不少用户收到过这个短信，但人家确实在报告的目录里找到木马文件了。所以也搞不懂具体的情况了。</p>
<p>网站运行也良好，网站标题等也没有被修改，系统后台也没有可疑的进程。但是为了保险起见，还是备份了数据库，以及网站文件。</p>
<p>重置系统，重新编译生产环境，从官网下载最新的程序包，把备份的网站文件只要里面的图片，其他的一概都不要了，希望是虚惊一场吧。</p>
]]></content:encoded>
    </item>
    <item>
      <title>放弃百度小程序</title>
      <link>http://localhost:1313/3831.html</link>
      <pubDate>Sat, 31 Jul 2021 04:03:46 +0000</pubDate>
      <guid>http://localhost:1313/3831.html</guid>
      <description>&lt;p&gt;前几天有了根据主站镜缘轩做一个百度小程序的想法。因为，一直镜缘轩网站没有快速收录的选项。据百度说，弄了小程序就会有了，所以产生了这么一个想法。&lt;figure class=&#34;wp-block-image size-full&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前几天有了根据主站镜缘轩做一个百度小程序的想法。因为，一直镜缘轩网站没有快速收录的选项。据百度说，弄了小程序就会有了，所以产生了这么一个想法。<figure class="wp-block-image size-full"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/03/5c1a8db89b41572.jpg"><img loading="lazy" decoding="async" width="669" height="459" src="https://tunan.org/wp-content/uploads/2021/03/5c1a8db89b41572.jpg" alt="" class="wp-image-3705" srcset="https://tunan.org/wp-content/uploads/2021/03/5c1a8db89b41572.jpg 669w, https://tunan.org/wp-content/uploads/2021/03/5c1a8db89b41572-300x206.jpg 300w, https://tunan.org/wp-content/uploads/2021/03/5c1a8db89b41572-220x150.jpg 220w" sizes="(max-width: 669px) 100vw, 669px" /></a></figure></p>
<p>可是实际的体验缺真的不好</p>
<p>提交了几次都审核不过，其中有页面空白，不过；文章里的图片有二维码，不过；小程序里的图片指向的是网页，不过；好咱改还不行。最后来一个，文章内链有链接，以有诱导用户打开小程序以外的网页为由，继续审核不过。</p>
<p>这么一看，不是我的内容有问题，而是百度小程序的吃相太难看了。闭环的厉害，生怕出去一丁点的流量。那么只好放弃了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>crmeb商城后台标题修改方法</title>
      <link>http://localhost:1313/3785.html</link>
      <pubDate>Tue, 22 Jun 2021 07:45:38 +0000</pubDate>
      <guid>http://localhost:1313/3785.html</guid>
      <description>&lt;p&gt;crmeb这款商城程序怎么说呢，价格便宜（当年），ui还行，功能基本完备。但是最让人诟病的就是crmeb这个字样到处都是，修改完了，等下次一升级，这些玩意又出来了。特别是网页标题的部分，真是让人烦不胜烦。前台使用的uni-app很多人都比较熟悉，标题在哪修改还好说，后台标题虽然问题不大，但是看着怎么都不舒服。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>crmeb这款商城程序怎么说呢，价格便宜（当年），ui还行，功能基本完备。但是最让人诟病的就是crmeb这个字样到处都是，修改完了，等下次一升级，这些玩意又出来了。特别是网页标题的部分，真是让人烦不胜烦。前台使用的uni-app很多人都比较熟悉，标题在哪修改还好说，后台标题虽然问题不大，但是看着怎么都不舒服。</p>
<p>今天下午没事，又看到了这摊臭狗屎，于是就想把它搞掉。最后终于找出来了方法。</p>
<p>首先，修改两处文件</p>
<p>一处在view/admin/src/config/index.js</p>
<p>另一处在/view/admin/src/router/routes.js</p>
<p>使用notepad++打开，把里面的CRMEB字样替换成你商城的标题，比如老刘的是镜缘轩眼镜商城。</p>
<p>第二步，打包</p>
<p>因为用的是H5，所以需要用Nodejs。</p>
<p>安装Nodejs，<a rel="noreferrer noopener" href="http://nodejs.cn/download/" target="_blank">官方地址</a></p>
<p>文件目录：<br>
后台文件目录： view / admin/</p>
<p>打包教程：<br>
1.本地安装 Nodejs（已安装可以跳过）<br>
2.进入 命令行，具体方法如下<br>
windows 系统用户进入 view/admin文件夹后，按住shift + 鼠标右击，点击[在此处打开 Powershell窗口]<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/06/722a55eb92da648.png"><img loading="lazy" decoding="async" width="725" height="518" src="https://tunan.org/wp-content/uploads/2021/06/722a55eb92da648.png" alt="" class="wp-image-3786" srcset="https://tunan.org/wp-content/uploads/2021/06/722a55eb92da648.png 725w, https://tunan.org/wp-content/uploads/2021/06/722a55eb92da648-300x214.png 300w" sizes="(max-width: 725px) 100vw, 725px" /></a></figure></p>
<p>命令行输入<code>npm install</code>或者 <code>npm i</code><br>
回车。<br>
等待安装完成。</p>
<p>然后</p>
<pre class="wp-block-code"><code>npm run build</code></pre>
<p>打包完成后，把<strong>dist 文件夹</strong>里的文件覆盖后台里的文件即可。</p>
]]></content:encoded>
    </item>
    <item>
      <title>RSS终于又搞好了</title>
      <link>http://localhost:1313/3769.html</link>
      <pubDate>Sun, 06 Jun 2021 07:21:33 +0000</pubDate>
      <guid>http://localhost:1313/3769.html</guid>
      <description>&lt;p&gt;前两天买的出去的东西过期了，看了下今年的价格基本上小80一年了，去年才60，感觉再买一年实在是划不来。正好去年的时候买的一台RN的VPS，自己一直是用来搞RSS，看到张老师搞的出圈的东西还是挺稳定的，于是也想自己弄一弄。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前两天买的出去的东西过期了，看了下今年的价格基本上小80一年了，去年才60，感觉再买一年实在是划不来。正好去年的时候买的一台RN的VPS，自己一直是用来搞RSS，看到张老师搞的出圈的东西还是挺稳定的，于是也想自己弄一弄。</p>
<p>结果没有经验，只用了一天，VPS的IP被ban了。</p>
<p>昨天看张老师白嫖甲骨文的VPS成功了，前几天自己也弄过，但是信用卡验证环节一直不对，所以就作罢了。昨天看张老师成功了，自己也就有了这个想法，结果一次性成功了。那就用甲骨文的这个东西搭建RSS吧。</p>
<p>有人可能要问，如何成功的。我的经验是，注册的时候姓名之类的一定要用拼音，因为邮箱验证的时候会转码，中文的都变成乱码了。第二，就是信用卡的信息一定要用中文，和你的信用卡的银行信息要一致。这样申请是没有问题的。</p>
<p>甲骨文可以搞两个免费的VPS，最大4H22G的配置，但是这个只有ARM的CPU才能使用，而ARM的资源奇缺，很多人挂着脚本在撸，导致一致申请不到，最后不得已弄了两个2H1G的机型，ADM的CPU，性能还行。</p>
<p>申请后就把RSS搬过去了。这次直接用docker装的tiny tiny RSS。另外说明一下，甲骨文的VPS用宝塔安装nginx还有docker都不正常，不能正常的运行，后来在命令行下根据出错的提示，总算是搞好了。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d.png"><img loading="lazy" decoding="async" width="1024" height="429" src="https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d-1024x429.png" alt="" class="wp-image-3770" srcset="https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d-1024x429.png 1024w, https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d-300x126.png 300w, https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d-768x322.png 768w, https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d-1536x643.png 1536w, https://tunan.org/wp-content/uploads/2021/06/33ceb07bf4eeb3d.png 1894w" sizes="(max-width: 1024px) 100vw, 1024px" /></a></figure></p>
<p>用DOCKER就是方便，傻瓜式的装法，装完啥都不用设置，和以前ghost装电脑系统一样。看看甲骨文到底能坚持多久，稳定的话就可以把博客搬过去了！</p>
]]></content:encoded>
    </item>
    <item>
      <title>RackNerd的6.18活动出来了</title>
      <link>http://localhost:1313/3766.html</link>
      <pubDate>Fri, 04 Jun 2021 02:30:17 +0000</pubDate>
      <guid>http://localhost:1313/3766.html</guid>
      <description>&lt;p&gt;前几天老刘总结了下RackNerd的使用情况，总体来说还是不错的，可惜的是，老刘刚弄了个梯子，第二天就被封了，期待过几天给解封吧。详情见：《&lt;a href=&#34;https://tunan.org/3749.html&#34;&gt;RackNerd使用情况小结&lt;/a&gt;》&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前几天老刘总结了下RackNerd的使用情况，总体来说还是不错的，可惜的是，老刘刚弄了个梯子，第二天就被封了，期待过几天给解封吧。详情见：《<a href="https://tunan.org/3749.html">RackNerd使用情况小结</a>》</p>
<p>有博友看了后表示价格有点贵，这不，今天老刘打开邮箱，发现它的6.18活动已经出来了，看了一下还是一贯的低价路线。</p>
<p><strong>[6.18 SALE – 2021] 1.8 GB KVM VPS Special</strong></p>
<p>2x vCPU Cores<br>
18 GB Pure SSD RAID-10 Storage<br>
1.8 GB RAM<br>
5000GB Monthly Premium Bandwidth<br>
1Gbps Public Network Port<br>
Full Root Admin Access<br>
1 Dedicated IPv4 Address<br>
KVM / SolusVM Control Panel – Reboot, Reinstall, Manage rDNS, &amp; much more<br>
Multiple Locations Available<br>
**JUST $17.88/YEAR – WOW!!<br>
ORDER: <a href="https://my.racknerd.com/aff.php?aff=1822&pid=508" target="_blank" rel="noreferrer noopener">地址</a><br>
**</p>
<p><strong>[6.18 SALE – 2021] 2.8 GB KVM VPS Special</strong></p>
<p>2x vCPU Cores<br>
38 GB Pure SSD RAID-10 Storage<br>
2.8 GB RAM<br>
6000GB Monthly Premium Bandwidth<br>
1Gbps Public Network Port<br>
Full Root Admin Access<br>
1 Dedicated IPv4 Address<br>
KVM / SolusVM Control Panel – Reboot, Reinstall, Manage rDNS, &amp; much more<br>
Multiple Locations Available<br>
<strong>JUST $21.88/YEAR – WOW!!<br>
ORDER: <a href="https://my.racknerd.com/aff.php?aff=1822&pid=509" target="_blank" rel="noreferrer noopener">地址</a></strong></p>
<p><strong>[6.18 SALE – 2021] 3.8 GB KVM VPS Special</strong></p>
<p>3x vCPU Cores<br>
55 GB Pure SSD RAID-10 Storage<br>
3.8 GB RAM<br>
8000GB Monthly Premium Bandwidth<br>
1Gbps Public Network Port<br>
Full Root Admin Access<br>
1 Dedicated IPv4 Address<br>
KVM / SolusVM Control Panel – Reboot, Reinstall, Manage rDNS, &amp; much more<br>
Multiple Locations Available<br>
<strong>JUST $38.88/YEAR – WOW!!<br>
ORDER: <a href="https://my.racknerd.com/aff.php?aff=1822&pid=510" target="_blank" rel="noreferrer noopener">地址</a></strong></p>
]]></content:encoded>
    </item>
    <item>
      <title>RackNerd使用情况小结</title>
      <link>http://localhost:1313/3749.html</link>
      <pubDate>Fri, 21 May 2021 06:51:01 +0000</pubDate>
      <guid>http://localhost:1313/3749.html</guid>
      <description>&lt;p&gt;&lt;strong&gt;RackNerd&lt;/strong&gt;的vps相当的便宜，像老刘这款2h2g的一年不到20美元。有很多人说&lt;strong&gt;RackNerd&lt;/strong&gt;是跑路的四大金刚创办的，到底是不是也没有人有确切的证据。当时买的时候也是心有忐忑，从这半年的使用情况来看，这个&lt;strong&gt;RackNerd&lt;/strong&gt;的VPS如果不跑路的情况下，还是非常稳定的，是一款很不错的便宜VPS。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p><strong>RackNerd</strong>的vps相当的便宜，像老刘这款2h2g的一年不到20美元。有很多人说<strong>RackNerd</strong>是跑路的四大金刚创办的，到底是不是也没有人有确切的证据。当时买的时候也是心有忐忑，从这半年的使用情况来看，这个<strong>RackNerd</strong>的VPS如果不跑路的情况下，还是非常稳定的，是一款很不错的便宜VPS。</p>
<p>买了这个VPS后，由于不能确定到底是不是稳定，所以，并没有花太多的心思再这个空间上，只是把自己的RSS订阅放在了这个VPS上，也就是rss.iliu.org这个网站。半年来，这个网站从来没有掉过链子。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/05/285ac2ce177771a.png"><img loading="lazy" decoding="async" width="725" height="128" src="https://tunan.org/wp-content/uploads/2021/05/285ac2ce177771a.png" alt="" class="wp-image-3750" srcset="https://tunan.org/wp-content/uploads/2021/05/285ac2ce177771a.png 725w, https://tunan.org/wp-content/uploads/2021/05/285ac2ce177771a-300x53.png 300w" sizes="(max-width: 725px) 100vw, 725px" /></a></figure></p>
<p>从上图可以看出，从2021年1月16日做完系统以后，到今天，服务器已经连续运行了4个多月，老刘能正常的阅读各位博友的博文，这个VPS可谓是功不可没。相比较machine的那台VPS，RN的这台简直让我没什么话说，可能用的时候也有限，但是这四个月来连偶尔的抽风都没有。</p>
<p>machine那台同样配置的VPS，也不知道是系统的原因还是怎么，总会时不时的杀mysql的进程。</p>
<p>试着再用用，如果一直这么稳定的话，等篱落的到期都想把博客搬过去了…..</p>
<p>如果你也想了解一下这款VPS，可以走走我的aff，</p>
<p><a href="https://my.racknerd.com/aff.php?aff=1822">RN便宜VPS</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>重新弄了下博客环境</title>
      <link>http://localhost:1313/3746.html</link>
      <pubDate>Thu, 20 May 2021 09:30:37 +0000</pubDate>
      <guid>http://localhost:1313/3746.html</guid>
      <description>&lt;p&gt;最近一段时间发现博客回复的时候一直显示提交中，不会跳转到评论成功的页面，以前也遇到过这种问题，基本上重启vps解决，但是这次貌似重启了也作用不大。&lt;figure class=&#34;wp-block-image size-large&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>最近一段时间发现博客回复的时候一直显示提交中，不会跳转到评论成功的页面，以前也遇到过这种问题，基本上重启vps解决，但是这次貌似重启了也作用不大。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/05/709ac9ab754c1c0.jpg"><img loading="lazy" decoding="async" width="800" height="320" src="https://tunan.org/wp-content/uploads/2021/05/709ac9ab754c1c0.jpg" alt="" class="wp-image-3747" srcset="https://tunan.org/wp-content/uploads/2021/05/709ac9ab754c1c0.jpg 800w, https://tunan.org/wp-content/uploads/2021/05/709ac9ab754c1c0-300x120.jpg 300w, https://tunan.org/wp-content/uploads/2021/05/709ac9ab754c1c0-768x307.jpg 768w" sizes="(max-width: 800px) 100vw, 800px" /></a></figure></p>
<p>以前还以为是我浏览器的问题，所以也就没有太在意，而且吧，这个问题时有时无。前两天，有博友也问道老刘这个问题，是否评论成功，才意识到可能不是我的问题。</p>
<p>研究了一下也没有什么头绪，只能说明自己太菜。后来想到当初偷懒加瞅便宜，趁着双11活动的时候的时候买了个urlos的授权。当时装上这个面板后，懒得再改别的，就一直用了下去，还写过一篇《<a href="https://tunan.org/3597.html">试用urlos</a>》的文章，要说这个面板的理念很超前，但是使用起来还是有一丢丢的不方便。只是懒得改了，就一直用到现在。现在看来是时候弃用了。</p>
<p>本来还想试用一下小皮面板，但是装上后直接打不开，也懒得再付出时间来找问题的所在了。直接还是用自己最熟悉的oneinstack好了。</p>
<p>用了差不多两个来小时编译环境，重新部署博客后，也不知道是不是错觉，感觉速度有了那么一丢丢的快。难道php8.0这么牛叉？</p>
]]></content:encoded>
    </item>
    <item>
      <title>收到Google adsense验证码</title>
      <link>http://localhost:1313/3687.html</link>
      <pubDate>Sat, 20 Feb 2021 01:38:02 +0000</pubDate>
      <guid>http://localhost:1313/3687.html</guid>
      <description>&lt;p&gt;去年10月份的时候，Google adsense的余额到了10块钱，然后Google提示说发了一个验证码的信件。老刘查看了一下地址发现，地址是老地址。说明第一封邮件是不会收到的了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>去年10月份的时候，Google adsense的余额到了10块钱，然后Google提示说发了一个验证码的信件。老刘查看了一下地址发现，地址是老地址。说明第一封邮件是不会收到的了。</p>
<p>把地址改成现在的地址，然后又等了20来天，提交第二次发邮件。可能是疫情的原因吧，一直都是石沉大海的样子。</p>
<p>前几天已经把发邮件的次数用尽了，Google后台也提示，如果再不提交验证码就不再展示广告了。其实一天也就那么几分钱，展示不展示都无所谓，只不过是留个念想罢了。网上有教程说可以申请在线认证，不过老刘也没有找到在哪个位置。</p>
<p>昨天下午，正在店铺里整理一些东西，邮政的小孩来说有我的一封快递。我还纳闷呢，没有买什么东西啊，结果来一看，原来是adsense的验证码。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/02/a5019d63e5bb983.jpg"><img loading="lazy" decoding="async" width="850" height="525" src="https://tunan.org/wp-content/uploads/2021/02/a5019d63e5bb983.jpg" alt="" class="wp-image-3688" srcset="https://tunan.org/wp-content/uploads/2021/02/a5019d63e5bb983.jpg 850w, https://tunan.org/wp-content/uploads/2021/02/a5019d63e5bb983-300x185.jpg 300w, https://tunan.org/wp-content/uploads/2021/02/a5019d63e5bb983-768x474.jpg 768w" sizes="(max-width: 850px) 100vw, 850px" /></a></figure></p>
<p>也不知道后续还会不会陆续收到其他的，登录adsense后台，填进去。了事！</p>
<p>所以，申请了Adsense的朋友，只要你的地址是正确的，不妨多等几天，应该总会到的，这不快5个月了，不收到了嘛！~</p>
<p>另外在说说和这个不相关的事情：</p>
<p>我又搬回篱落的vps了，这几天腾讯香港轻量卡到爆了，我博客后台都登录不进去。网站打包后，下载速度只有几十k，看来怎么着还是国内的服务器比较稳定。既然腾讯的篱落的香港服务器都差不多，当然还是选更便宜一些的了</p>
]]></content:encoded>
    </item>
    <item>
      <title>试用urlos</title>
      <link>http://localhost:1313/3597.html</link>
      <pubDate>Thu, 21 Jan 2021 09:10:01 +0000</pubDate>
      <guid>http://localhost:1313/3597.html</guid>
      <description>&lt;p&gt;老刘一直用的是oneinstack这个命令行面板，其实也够用了。但是后来弄了一个在线商城，这个开发者基本上是以宝塔的环境来开发的，安装教程等等都是用的宝塔面板。自己试着用oneinstack来安装，会报很多的错误，特别是客服这一块，它使用了长链接等。而官方出的命令安装教程简直没法看，按教程根本搞不成。所以，只能用着免费版的宝塔，看了眼收费的，又太贵。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>老刘一直用的是oneinstack这个命令行面板，其实也够用了。但是后来弄了一个在线商城，这个开发者基本上是以宝塔的环境来开发的，安装教程等等都是用的宝塔面板。自己试着用oneinstack来安装，会报很多的错误，特别是客服这一块，它使用了长链接等。而官方出的命令安装教程简直没法看，按教程根本搞不成。所以，只能用着免费版的宝塔，看了眼收费的，又太贵。</p>
<p>昨天刚好看到缙哥哥又在推这个面板，现在涨价到20了，最早双11的时候才11.11，双12的时候12.12.现在20来快了，他推这个面板倒不是这个面板有多好用，他甚至都没有怎么用过，他推这个面板是因为据说有30%的aff。而看到我那个商城的官方也有urlos的一键安装包。所以，就买个授权吧。反正也不贵不是。留着，省的以后像宝塔似的千把块，买了心疼。</p>
<p>买了后，就用博客来先试试手，你还别说，这个面板和宝塔真的是没有一点点的相似性。不过，官方的文档还行，按照文档进行操作还是可以成功的。这里怎么安装，怎么弄网站就不说了，官方都有，只说说体会。</p>
<p>urlos的优点：</p>
<p>优点不少，最大的优点是，每个网站都是一个容器。运行环境都是独立的。相互之间不会收到影响。比如你有两个网站，主题软件进行了加密，需要设置机密的模块，这个时候用传统的方法就不是很好解决，但是用这个面板就很容易，毕竟一个容器就是一个系统。</p>
<p>说说缺点吧，</p>
<p>首先，没有宝塔方便。第二，定制性不强，因为容器都是设置好的，想个性化的进行设置，不太好弄。第三，有点占用资源。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27.png"><img loading="lazy" decoding="async" width="1024" height="153" src="https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27-1024x153.png" alt="" class="wp-image-3598" srcset="https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27-1024x153.png 1024w, https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27-300x45.png 300w, https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27-768x114.png 768w, https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27-1536x229.png 1536w, https://tunan.org/wp-content/uploads/2021/01/9974a7099607a27.png 1591w" sizes="(max-width: 1024px) 100vw, 1024px" /></a><figcaption>安装后，网站运行一段时间的资源占用</figcaption></figure></p>
<p>最后，这个面板大概占用200m的内存，好在关闭不影响使用<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/47fb451f8054589.jpg"><img loading="lazy" decoding="async" width="564" height="182" src="https://tunan.org/wp-content/uploads/2021/01/47fb451f8054589.jpg" alt="" class="wp-image-3600" srcset="https://tunan.org/wp-content/uploads/2021/01/47fb451f8054589.jpg 564w, https://tunan.org/wp-content/uploads/2021/01/47fb451f8054589-300x97.jpg 300w" sizes="(max-width: 564px) 100vw, 564px" /></a><figcaption>下面是关了面板的占用，大概是250来兆</figcaption></figure></p>
<h2 class="wp-block-heading" id="安装wordpress后的一点设置">安装wordpress后的一点设置</h2>
<p>安装环境后，把wordpress上传，数据库上传，整个设置好以后，还需要一点权限的设置，否则wordpress没法更新，每个在线安装插件等。</p>
<p>首先进入容器</p>
<pre class="wp-block-code"><code>docker exec -it 容器名 bash
chmod -R 755 /data/www
chmod -R 755 /data/www/wp-content
chown -R nobody:nogroup /data/www</code></pre>
<p>设置完后，退出容器</p>
<pre class="wp-block-code"><code>exit</code></pre>
<p>老刘经过两天的摸索，发现这个面板还是有一定的意思的。通过这个面板还可以自建CDN给海外的网站加速，有空老刘打算用这个香港的主机给美国的主机加加速。</p>
<h2 class="wp-block-heading" id="最后">最后</h2>
<p>总之，这个面板还是有可取之处的。目前官方在做活动，20块钱，终身的授权码，有兴趣的同学可以屯一屯。</p>
<p>可以走老刘的连接啊，<a href="https://www.urlos.com/pn_2020suimo?pruid=2322754">urlos活动页面</a>。据说有30%的返佣。你买一套，老刘会挣6块钱，哈！~</p>
]]></content:encoded>
    </item>
    <item>
      <title>捡漏注册了个l22.org的域名</title>
      <link>http://localhost:1313/3561.html</link>
      <pubDate>Sun, 10 Jan 2021 09:05:27 +0000</pubDate>
      <guid>http://localhost:1313/3561.html</guid>
      <description>&lt;p&gt;前两天的时候，登陆name.com查看域名有没有转移过去，忽然发现这个网站有一个最近删除域名的链接。好奇之下点开看了一下，发现有很多，好在有一个可以下载的表格。于是下载了当时最新的1.6号删除的域名，随意的浏览的起来。本来也没有抱着一定能注册想法。&lt;figure class=&#34;wp-block-image size-large&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前两天的时候，登陆name.com查看域名有没有转移过去，忽然发现这个网站有一个最近删除域名的链接。好奇之下点开看了一下，发现有很多，好在有一个可以下载的表格。于是下载了当时最新的1.6号删除的域名，随意的浏览的起来。本来也没有抱着一定能注册想法。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/a54fce0d9ebf86f.jpg"><img loading="lazy" decoding="async" width="644" height="300" src="https://tunan.org/wp-content/uploads/2021/01/a54fce0d9ebf86f.jpg" alt="" class="wp-image-3577" srcset="https://tunan.org/wp-content/uploads/2021/01/a54fce0d9ebf86f.jpg 644w, https://tunan.org/wp-content/uploads/2021/01/a54fce0d9ebf86f-300x140.jpg 300w" sizes="(max-width: 644px) 100vw, 644px" /></a></figure></p>
<p>忽然看到了l22.org这个域名，当时我还以为是122.org呢，由于name的org域名比较贵，于是来到腾讯查了下，发现122.org没法注册啊，再仔细一看，尼玛原来是l22。不过也是挺开心的了，一直想注册一个3位数的看起来比较顺眼的org或者net域名，com就不想了。就像和老麦说的那样，超过100的域名去喊张老师。</p>
<p>昨天查了一下这个域名的信息，阿里云的whois更新的很慢，发现这个域名再2002年的时候已经被注册了，显示的到期日是2021年7月份才到期，不知道咋回事还剩下半年呢，域名怎么会掉呢？</p>
<p>又看了下l22.com标价8.8万美元，有出8.8万人民币的我也就出了，?，梦想还是有的，万一实现了呢。</p>
<p>打算把这个域名利用起来，不过不知道弄个什么网站好玩</p>
]]></content:encoded>
    </item>
    <item>
      <title>把域名从阿里云转出到name.com的方法</title>
      <link>http://localhost:1313/3545.html</link>
      <pubDate>Sun, 03 Jan 2021 08:33:54 +0000</pubDate>
      <guid>http://localhost:1313/3545.html</guid>
      <description>&lt;p&gt;前两天，老刘想把在阿里云的一个域名转到name.com,后续可能还会把一些不需要备案的都转出去，其实转出的方法也很简单。&lt;/p&gt;
&lt;p&gt;首先，登录阿里云的后台，选择域名&lt;figure class=&#34;wp-block-image size-large&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前两天，老刘想把在阿里云的一个域名转到name.com,后续可能还会把一些不需要备案的都转出去，其实转出的方法也很简单。</p>
<p>首先，登录阿里云的后台，选择域名<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/c69fea34694a0d9.png"><img loading="lazy" decoding="async" width="553" height="100" src="https://tunan.org/wp-content/uploads/2021/01/c69fea34694a0d9.png" alt="" class="wp-image-3583" srcset="https://tunan.org/wp-content/uploads/2021/01/c69fea34694a0d9.png 553w, https://tunan.org/wp-content/uploads/2021/01/c69fea34694a0d9-300x54.png 300w" sizes="(max-width: 553px) 100vw, 553px" /></a></figure></p>
<p>找到需要转出的域名，点后面的管理，在出来的页面的右侧，找到“域名转出”并点击，如下图<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/de50d6099546461.png"><img decoding="async" src="https://tunan.org/wp-content/uploads/2021/01/de50d6099546461.png" alt="" class="wp-image-3547" /></a></figure></p>
<p>阿里云首先会让你核对邮箱，因为转移密码是发到你的这个邮箱里的，如果邮箱正确的话，点下一步。会像你绑定的手机好发送一个验证码，输入验证码，点击下一步。转移密码会发到你的邮箱里。</p>
<p>然后，注册登陆name.com,目前name已经支持中文了，在页面的左上角点击转移。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/a4a897e07492f81.png"><img decoding="async" src="https://tunan.org/wp-content/uploads/2021/01/a4a897e07492f81-1024x474.png" alt="" class="wp-image-3548" /></a></figure></p>
<p>把你需要转移的域名及发到邮箱的转移密码填到相应的位置，点击加入购物车。</p>
<p>如果没有别的需求了，点击结算就行了。name支持支付宝，paypal以及信用卡支付。这里老刘推荐使用PayPal，而且老刘推荐购买海外的VPS时候也尽量使用paypal。因为PayPal支持交易申诉。特别对于一些国外的无良商家来说，这是一个很好用的功能。商家服务不好，且不退款，直接争议就行了。</p>
<p>现在转移到name是7美元多一点，还送隐私保护，挺不错的，结算完成后，出现如下的界面说明已经转移成功。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/93c780631b55b21.png"><img decoding="async" src="https://tunan.org/wp-content/uploads/2021/01/93c780631b55b21-1024x257.png" alt="" class="wp-image-3549" /></a></figure></p>
<p>整个过程大概要5-7天，记得以前从godaddy转到阿里云的时候，是可以在godaddy确认的，确认后会立刻转移到新的域名商。但是阿里云没有这一个选项，只能等待默认生效为止。也别吐槽它们了，现在让转出的已经是进步了，记得很久以前转出的话还要开一堆的证明。</p>
]]></content:encoded>
    </item>
    <item>
      <title>博客web端改用apache</title>
      <link>http://localhost:1313/3520.html</link>
      <pubDate>Wed, 30 Dec 2020 07:35:59 +0000</pubDate>
      <guid>http://localhost:1313/3520.html</guid>
      <description>&lt;p&gt;试用了几天Cloudflare加racknerd的2h2g的小鸡，感觉还算差强人意。所以干脆就先把博客放这里算了，然后又突发奇想，其他的网站一直用的lnmp，为啥博客就不能用用lamp呢？况且apache在稳定性以及对php的支持等方面都比nginx要好，nginx的优势是轻便和并发能力强。其实对小博客来说，基本没有啥区别。&lt;figure class=&#34;wp-block-image size-large&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>试用了几天Cloudflare加racknerd的2h2g的小鸡，感觉还算差强人意。所以干脆就先把博客放这里算了，然后又突发奇想，其他的网站一直用的lnmp，为啥博客就不能用用lamp呢？况且apache在稳定性以及对php的支持等方面都比nginx要好，nginx的优势是轻便和并发能力强。其实对小博客来说，基本没有啥区别。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2021/01/ac6793f3e79aaa6.jpg"><img loading="lazy" decoding="async" width="855" height="585" src="https://tunan.org/wp-content/uploads/2021/01/ac6793f3e79aaa6.jpg" alt="" class="wp-image-3589" srcset="https://tunan.org/wp-content/uploads/2021/01/ac6793f3e79aaa6.jpg 855w, https://tunan.org/wp-content/uploads/2021/01/ac6793f3e79aaa6-300x205.jpg 300w, https://tunan.org/wp-content/uploads/2021/01/ac6793f3e79aaa6-768x525.jpg 768w, https://tunan.org/wp-content/uploads/2021/01/ac6793f3e79aaa6-220x150.jpg 220w" sizes="(max-width: 855px) 100vw, 855px" /></a></figure></p>
<p>说折腾就折腾，编译安装apache，发现需要重新设置虚拟主机，设置的时候发现，不像nginx的时候，脚本提示把http301到https，什么www域名301到一级域名等，这些提示都没有。也没有设置伪静态的选项。网上查了一下，发现是几行代码就可以搞定的事情。</p>
<h2 class="wp-block-heading" id="设置301跳转">设置301跳转</h2>
<p>在apache里设置301跳转很简单，只需要在.htaccess里添加代码就好了，老刘主要用到两个，一个是http跳到https，一个是www跳到一级域名。感觉比nginx要简洁一些，代码如下：</p>
<pre class="wp-block-code"><code>RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://tunan.org/$1 &#91;R,L]

RewriteEngine On
RewriteCond %{HTTP_HOST} !^iliu.org$ &#91;NC]
RewriteRule ^(.*)$ http://iliu.org/$1 &#91;L,R=301]
</code></pre>
<p>设置后才发现，设置和不设置没有啥区别，老刘用的cf，应该是在cf里设置了301到443接口了，至于wordpress伪静态的问题，也是很容易，直接到wordpress的后台，保存一下固定链接样式就行了，保存后在根目录里自动生成了.htaccess。代码如下：</p>
<pre class="wp-block-code"><code># BEGIN WordPress
# 在“BEGIN WordPress”与“END WordPress”之间的指令（行）是
# 动态生成的，只应被WordPress过滤器修改。
# 任何对标记之间的指令的修改都会被覆盖。
&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteRule .* - &#91;E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteBase /
RewriteRule ^index\.php$ - &#91;L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php &#91;L]
&lt;/IfModule&gt;

# END WordPress
</code></pre>
<h2 class="wp-block-heading" id="使用cloudflare后获取用户真实ip">使用cloudflare后获取用户真实IP</h2>
<p>由于apache已经自带mod_remoteip模块，所以只需按如下操作即可</p>
<pre class="wp-block-code"><code>#启用模块
vim /usr/local/apache/conf/httpd.conf
Include conf/extra/httpd-remoteip.conf
#添加如下内容
vim /usr/local/apache/conf/extra/httpd-remoteip.conf
LoadModule remoteip_module modules/mod_remoteip.so
RemoteIPHeader X-Forwarded-For
RemoteIPInternalProxy 127.0.0.1/24
#CloudFlare IP Ranges
RemoteIPInternalProxy 103.21.244.0/22
RemoteIPInternalProxy 103.22.200.0/22
RemoteIPInternalProxy 103.31.4.0/22
RemoteIPInternalProxy 104.16.0.0/12
RemoteIPInternalProxy 108.162.192.0/18
RemoteIPInternalProxy 131.0.72.0/22
RemoteIPInternalProxy 141.101.64.0/18
RemoteIPInternalProxy 162.158.0.0/15
RemoteIPInternalProxy 172.64.0.0/13
RemoteIPInternalProxy 173.245.48.0/20
RemoteIPInternalProxy 188.114.96.0/20
RemoteIPInternalProxy 190.93.240.0/20
RemoteIPInternalProxy 197.234.240.0/22
RemoteIPInternalProxy 198.41.128.0/17 #你的CDN的IP，可以重复添加
#在httpd.conf中修改日志格式，在日志格式中加上%a，然后重启apache即可
LogFormat "%h %a %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %a %l %u %t \"%r\" %&gt;s %b" common
LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combined</code></pre>
<p>service httpd restar重启apache，然后去日志里看看，已经获得了真实IP。前连天灰常记忆博友说在cloudflare里设置一下也能显示真实IP，但是老刘没有找到这个设置，只好继续在网站上改了，网站上改还有一个好处是，这个方法不仅限于cloudflare，别的CDN也是适用的</p>
]]></content:encoded>
    </item>
    <item>
      <title>nginx使用CDN后获取用户真实IP的方法</title>
      <link>http://localhost:1313/3486.html</link>
      <pubDate>Mon, 21 Dec 2020 07:15:11 +0000</pubDate>
      <guid>http://localhost:1313/3486.html</guid>
      <description>&lt;p&gt;老刘前两天弄了个racknerd的便宜的vps，准备把一个网站放到这个vps上，再顺便把篱落的这台VPS好好的整理一下，当时装系统的时候装的是centos8，可惜这个系统明年官方就不再支持了，所以，长痛不如短痛，早晚都要换系统，不如早换。于是先把博客也迁到了这个rn的空间里。顺便又给加了个CF的套，加上之后，加的时候是扫了几个本地延迟最低的IP，直接分联通、移动、电信把这几个ip分别解析了。经过这么几天的试用，老刘觉得加了CF的速度还算差强人意。准备一直用下去。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>老刘前两天弄了个racknerd的便宜的vps，准备把一个网站放到这个vps上，再顺便把篱落的这台VPS好好的整理一下，当时装系统的时候装的是centos8，可惜这个系统明年官方就不再支持了，所以，长痛不如短痛，早晚都要换系统，不如早换。于是先把博客也迁到了这个rn的空间里。顺便又给加了个CF的套，加上之后，加的时候是扫了几个本地延迟最低的IP，直接分联通、移动、电信把这几个ip分别解析了。经过这么几天的试用，老刘觉得加了CF的速度还算差强人意。准备一直用下去。</p>
<p>但是加了CDN后，有一个问题，那就是不管日志里还是wordpress后台的评论里的IP都是cf的IP，无法获取用户的真实IP，这对管理网站有点麻烦，比如受到攻击或者想封一些发垃圾邮件IP的地址的时候，就没有办法。老刘记得以前看过这方面的文章。于是找了一下，把经过记录下来。</p>
<p>阿帕奇老刘好久没有用过了，这里只说nginx的方面，从网上的教程来看，可以分成两种。老刘把两种方法的说说</p>
<h2 class="wp-block-heading" id="一利用ngx_http_realip_module模块获取用户真实ip">一、利用ngx_http_realip_module模块获取用户真实IP</h2>
<p>由于老刘用的是oneinstack一键安装包，所以之说这个方法，lnmp一键安装包也可以用类似的方面来搞定。宝塔面板的话，就很简单，装那款免费的防火墙，里面就是cdn的设置，设置完了之后就OK了，不得不说还是可视化面板方便。好了，闲话少说，正式开始。</p>
<p>首先通过nginx -V我们发现默认编译的nginx并不会安装ngx_http_realip_module模块，我们需要重新编译nginx使其载入这个功能模块。</p>
<p>这里我们直接利用oneinstack的升级脚本来完成，这样做，一是很简单，二是一般不会出错，很适合初学者使用，第三，就是以后你升级nginx的话，也能一劳永逸。</p>
<pre class="wp-block-code"><code>#增量添加参数到${nginx_configure_args}后面
vim /root/oneinstack/include/upgrade_web.sh
#在${nginx_configure_args}后面增加--with-http_realip_module即可
#大致位于升级脚本的第57行</code></pre><figure class="wp-block-image size-large">
<p><a href="https://tunan.org/wp-content/uploads/2021/01/3c4e83f775536ad.jpg"><img loading="lazy" decoding="async" width="500" height="301" src="https://tunan.org/wp-content/uploads/2021/01/3c4e83f775536ad.jpg" alt="" class="wp-image-3593" srcset="https://tunan.org/wp-content/uploads/2021/01/3c4e83f775536ad.jpg 500w, https://tunan.org/wp-content/uploads/2021/01/3c4e83f775536ad-300x181.jpg 300w" sizes="(max-width: 500px) 100vw, 500px" /></a></figure></p>
<p>保存并退出，执行oneinstack的升级脚本/root/oneinstack/upgrade.sh进行nginx升级编译即可。</p>
<p>最后执行nginx -V查看最终编译后的结果。<figure class="wp-block-image size-large"></p>
<p><a href="https://tunan.org/wp-content/uploads/2020/12/43904aa51d7dce2.png"><img decoding="async" src="https://tunan.org/wp-content/uploads/2020/12/43904aa51d7dce2-1024x109.png" alt="" class="wp-image-3488" /></a></figure></p>
<h3 class="wp-block-heading" id="nginx设置set_real_ip_from">Nginx设置set_real_ip_from</h3>
<p>编译好了ngx_http_realip_module，现在我们只需要在Nginx配置文件中添加set_real_ip_from代码到nginx.conf文件的http段落里面，老刘用的cf的，用期待的CDN类似，只有知道IP段可以了。示例如下：</p>
<pre class="wp-block-code"><code>set_real_ip_from 103.21.244.0/22;
 set_real_ip_from 103.22.200.0/22;
 set_real_ip_from 103.31.4.0/22;
 set_real_ip_from 104.16.0.0/12;
 set_real_ip_from 108.162.192.0/18;
 set_real_ip_from 131.0.72.0/22;
 set_real_ip_from 141.101.64.0/18;
 set_real_ip_from 162.158.0.0/15;
 set_real_ip_from 172.64.0.0/13;
 set_real_ip_from 173.245.48.0/20;
 set_real_ip_from 188.114.96.0/20;
 set_real_ip_from 190.93.240.0/20;
 set_real_ip_from 197.234.240.0/22;
 set_real_ip_from 198.41.128.0/17;
 set_real_ip_from 199.27.128.0/21;
 set_real_ip_from 2400:cb00::/32;
 set_real_ip_from 2606:4700::/32;
 set_real_ip_from 2803:f800::/32;
 set_real_ip_from 2405:b500::/32;
 set_real_ip_from 2405:8100::/32;
 set_real_ip_from 2c0f:f248::/32;
 set_real_ip_from 2a06:98c0::/29;
 real_ip_header  X-Forwarded-For;
 real_ip_recursive on;</code></pre>
<p>配置完成后，使用nginx -t检查配置文件是否存在格式问题。如果没有报错执行service nginx reload重载nginx服务即可。</p>
<p>然后访问网站，再次查看nginx日志，就可以正常获取到用户真实IP了。</p>
<h2 class="wp-block-heading" id="二利用nginx的日期格式来达到目的">二、利用nginx的日期格式来达到目的</h2>
<p>首先，将下面的代码添加到nginx.conf文件的http{后面让日志重置化：</p>
<pre class="wp-block-code"><code>#自定义一个日志格式
log_format cdn '$http_x_forwarded_for - $remote_user &#91;$time_local] '
                    '"$request" $status $body_bytes_sent '
                    '"$http_referer" "$http_user_agent"';</code></pre>
<p>然后，我们修改nginx站点原来的日志输出格式，修改access_log /home/wwwlogs/xxxx.log; 为access_log /home/wwwlogs/xxxx.log cdn;全部保存之后不要急着重启nginx，再次强调一个命令nginx -t，用于检查nginx配置文件是否存在错误。这是一个非常实用的命令，可以让你在业务运行的同时从起nginx服务，不至于造成业务中断或者业务停止。</p>
<p>这个方法的有点是不需要编译nginx，设置完了之后也是一劳永逸。但是对于oneinstack一键安装包来说，因为它已经重置了日志的格式，所以就不适用了。</p>
<h2 class="wp-block-heading" id="小结">小结</h2>
<p>以上就是两种在使用CDN后可以获取用户真实IP的方法，可以根据自己的情况来使用。</p>
]]></content:encoded>
    </item>
    <item>
      <title>流金岁月启用新域名</title>
      <link>http://localhost:1313/3470.html</link>
      <pubDate>Thu, 17 Dec 2020 10:17:17 +0000</pubDate>
      <guid>http://localhost:1313/3470.html</guid>
      <description>&lt;p&gt;经过一番考虑，决定启用新域名 iliu.org&lt;/p&gt;
&lt;p&gt;一是域名较短，二是本人对org情有独钟。这也将是老刘最后一次换域名了。&lt;/p&gt;
&lt;p&gt;所以，麻烦有老刘友情链接的改下地址，（貌似也没有几个）&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>经过一番考虑，决定启用新域名 iliu.org</p>
<p>一是域名较短，二是本人对org情有独钟。这也将是老刘最后一次换域名了。</p>
<p>所以，麻烦有老刘友情链接的改下地址，（貌似也没有几个）</p>
<p>另外有订阅流金岁月RSS的大佬，麻烦也换下地址，原地址已经301跳转到新地址。</p>
<p>原空间正在做系统，目前访问可能有些慢，见谅！</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/12/77ed36f4b18679c-1.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3471" src="https://tunan.org/wp-content/uploads/2020/12/77ed36f4b18679c-1.jpg" alt="" width="450" height="247" /></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>停止使用RSS Feed</title>
      <link>http://localhost:1313/3364.html</link>
      <pubDate>Thu, 29 Oct 2020 08:35:05 +0000</pubDate>
      <guid>http://localhost:1313/3364.html</guid>
      <description>&lt;p&gt;由于种种原因，一直在使用RSS Feed订阅诸多博友的博客。但是由于众所周知的原因。现在使用Feed非常的不方便，要想愉快的使用，必须就要挂着梯子。但是，目前来看，政策愈发的紧张。使用梯子貌似成了一个高风险的事情，特别是像我这样开着一个工作室的人，如果被处罚一下，网上一查负责人居然有前科，谁还敢和你做生意啊。所以决定，梯子自是在需要的时候挂一挂，平时的时候都要让它处于关闭状态。但是这样一来，Feed就不太适合使用了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>由于种种原因，一直在使用RSS Feed订阅诸多博友的博客。但是由于众所周知的原因。现在使用Feed非常的不方便，要想愉快的使用，必须就要挂着梯子。但是，目前来看，政策愈发的紧张。使用梯子貌似成了一个高风险的事情，特别是像我这样开着一个工作室的人，如果被处罚一下，网上一查负责人居然有前科，谁还敢和你做生意啊。所以决定，梯子自是在需要的时候挂一挂，平时的时候都要让它处于关闭状态。但是这样一来，Feed就不太适合使用了。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3365" src="https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1.jpg" alt="" width="512" height="268" srcset="https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1.jpg 512w, https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1-300x157.jpg 300w" sizes="(max-width: 512px) 100vw, 512px" /></a></p>
<p>既然不用Feed，那就自己搭建一个RSS服务吧，之前使用过一段时间freshrss。于是在篱落的那个VPS上重新安装了一下。并且把Feed里的数据导入进去，但是唯一不方便的是写入新的rss源。比如，我浏览一位博友的博客或者其他的网站，如果我想把这个网站添加到我的rss里，之前用Feed的时候，直接在浏览器的插件上就能添加，但是现在只能登陆的页面里才能添加。这让老刘有点不爽。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/1146b58ba6d12ef.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3366" src="https://tunan.org/wp-content/uploads/2020/10/1146b58ba6d12ef.png" alt="" width="600" height="400" srcset="https://tunan.org/wp-content/uploads/2020/10/1146b58ba6d12ef.png 600w, https://tunan.org/wp-content/uploads/2020/10/1146b58ba6d12ef-300x200.png 300w" sizes="(max-width: 600px) 100vw, 600px" /></a></p>
<p>后来从网上了解到rsshub有一个叫做RSShub radar的插件，这个插件可以可以把浏览到的网站的RSS直接导入到 Tiny tiny RSS里，但是tiny安装起来非常的繁琐，之前老刘也安装过一次，需要修改诸多PHP的配置。但是到了最后，安装后还是有问题。所以，老刘对这个玩意有着深深的怨念。后来，发现在群晖的DOCKER里可以安装这个玩意，然后可以通过FRP进行外网域名的访问。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3367" src="https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1.png" alt="" width="512" height="512" srcset="https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1.png 512w, https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1-300x300.png 300w, https://tunan.org/wp-content/uploads/2020/10/4af52202f77beb1-150x150.png 150w" sizes="(max-width: 512px) 100vw, 512px" /></a></p>
<p>对于外网的访问不是我的刚需，再之前的文章里我也说了，使用了zerotier之后，工作室和家里等于再同一个局域网里，所有，决定再群晖里安装一下试试。docker安装是非常的简单。</p>
<p>现在就是两个程序观察一下哪个更适合自己，最后保留一个就行了。</p>
<h2 id="最后">最后</h2>
<p>经过一天的试用，还是用freshRSS比较顺手，保留了！~~</p>
]]></content:encoded>
    </item>
    <item>
      <title>纯代码设置frp服务器</title>
      <link>http://localhost:1313/3340.html</link>
      <pubDate>Sun, 18 Oct 2020 07:27:04 +0000</pubDate>
      <guid>http://localhost:1313/3340.html</guid>
      <description>&lt;p&gt;以前老刘写过《&lt;a href=&#34;https://tunan.org/2918.html&#34;&gt;宝塔面板安装FRP内网穿透控制群晖&lt;/a&gt;》的文章，最近发现不知道是这个插件的作者不再开发了还是其他的原因，xeath开发的这个frp服务器插件已经在商店里找不到了。其实，这也没什么，直接用代码的方式部署也是可以的。&lt;/p&gt;
&lt;p&gt;SSH连接到VPS之后运行如下命令查看处理器架构，根据架构下载不同版本的frp&lt;/p&gt;
&lt;pre class=&#34;wp-block-preformatted&#34;&gt;arch&lt;/pre&gt;
&lt;p&gt;查看结果，如果是“X86_64“即可选择”amd64”，&lt;br&gt;
运行如下命令，根据架构不同，选择相应版本并进行下载，然后登陆frp的官网地址，现在最新的应该是0.34.1，所以，运行如下的命令：&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>以前老刘写过《<a href="https://tunan.org/2918.html">宝塔面板安装FRP内网穿透控制群晖</a>》的文章，最近发现不知道是这个插件的作者不再开发了还是其他的原因，xeath开发的这个frp服务器插件已经在商店里找不到了。其实，这也没什么，直接用代码的方式部署也是可以的。</p>
<p>SSH连接到VPS之后运行如下命令查看处理器架构，根据架构下载不同版本的frp</p>
<pre class="wp-block-preformatted">arch</pre>
<p>查看结果，如果是“X86_64“即可选择”amd64”，<br>
运行如下命令，根据架构不同，选择相应版本并进行下载，然后登陆frp的官网地址，现在最新的应该是0.34.1，所以，运行如下的命令：</p>
<pre class="wp-block-preformatted">wget https://github.com/fatedier/frp/releases/download/v0.34.1/frp_0.34.1_linux_amd64.tar.gz</pre>
<p>然后解压，给文件换一个名字，进入frp目录</p>
<pre class="wp-block-preformatted">tar -zxvf frp_0.34.1_linux_amd64.tar.gz
cp -r frp_0.34.1_linux_amd64 frp
cd frp</pre>
<p>修改frps.ini文件</p>
<pre class="wp-block-preformatted">vim frps.ini</pre>
<p>格式如下：</p>
<pre class="wp-block-preformatted">[common]
bind_port = 7000
dashboard_port = 7500
token = *******（根据情况自己设置）
dashboard_user = 自己设置
dashboard_pwd = 自己设置
vhost_http_port = 10080
vhost_https_port = 10443</pre>
<p>编辑完成后保存（vim保存如果不会请自行搜索）。<br>
之后我们就可以运行frps的服务端了。</p>
<p>使用命令：</p>
<pre class="wp-block-preformatted">./frps -c frps.ini</pre>
<p>如果输出如下文字，说明服务器配置成功</p>
<pre class="wp-block-preformatted">2019/01/12 15:22:39 [I] [service.go:130] frps tcp listen on 0.0.0.0:7000 

2019/01/12 15:22:39 [I] [service.go:172] http service listen on 0.0.0.0:10080 

2019/01/12 15:22:39 [I] [service.go:193] https service listen on 0.0.0.0:10443

2019/01/12 15:22:39 [I] [service.go:216] Dashboard listen on 0.0.0.0:7500

2019/01/12 15:22:39 [I] [root.go:210] Start frps success</pre>
<p>通过你的服务器IP：7500,然后输入刚才你设置的用户名密码，应该可以看到如下的画面：<figure class="wp-block-image aligncenter"></p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/574e8aabbd9f2ca.png"><img loading="lazy" decoding="async" width="1024" height="598" src="https://tunan.org/wp-content/uploads/2020/10/574e8aabbd9f2ca-1024x598.png" alt="" class="wp-image-3341" srcset="https://tunan.org/wp-content/uploads/2020/10/574e8aabbd9f2ca-1024x598.png 1024w, https://tunan.org/wp-content/uploads/2020/10/574e8aabbd9f2ca-300x175.png 300w, https://tunan.org/wp-content/uploads/2020/10/574e8aabbd9f2ca-768x449.png 768w, https://tunan.org/wp-content/uploads/2020/10/574e8aabbd9f2ca.png 1196w" sizes="(max-width: 1024px) 100vw, 1024px" /></a></figure></p>
<h2 class="wp-block-heading" id="让frp服务在后台运行">让FRP服务在后台运行</h2>
<p>这时候你会发现，如果你关闭了xshell等的窗口，frp的服务也即可停止了，所以，为了让FRP在后台运行，我们还输入如下的命令：</p>
<pre class="wp-block-preformatted">nohup ./frps -c frps.ini &</pre>
<p>如果出来的如下的文字，说明配置成功</p>
<pre class="wp-block-preformatted">nohup: ignoring input and appending output to 'nohup.out'</pre>
<p>至此，服务器端设置完毕，群晖的设置在上一篇文章内已经说过，这次就不再啰嗦了。</p>
<h2 class="wp-block-heading" id="可能遇到的坑">可能遇到的坑：</h2>
<p>如果你按照这个方法设置后，最后的输出总不正确，那么很大的可能是你的服务器的相应的端口没有开放，如果使用的是腾讯云或者阿里云的话，服务器的端口打开之后，还需要在这些云的控制端设置开放端口。</p>
]]></content:encoded>
    </item>
    <item>
      <title>打造一个安全的宝塔面板服务器环境</title>
      <link>http://localhost:1313/3326.html</link>
      <pubDate>Sat, 17 Oct 2020 03:50:44 +0000</pubDate>
      <guid>http://localhost:1313/3326.html</guid>
      <description>&lt;p&gt;很多人都戏称宝塔面板为bug塔面板，特别是前几天出现的phpmyadmin事件，似乎更进一步的坐实了bug塔bug的地位，但是平信而论，经过这么多年的发展，宝塔面板在配置服务器方面还是很方便的，而里面一些小插件也是非常的好用，所以，对于这个面板老刘是非常的纠结，喜欢他的简单和好用的插件，纠结它的稳定性。毕竟老刘是吃过这方面的亏的，早点5.x的时代，有一次，什么都没动，网站也正常打开，面板却挂了….&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>很多人都戏称宝塔面板为bug塔面板，特别是前几天出现的phpmyadmin事件，似乎更进一步的坐实了bug塔bug的地位，但是平信而论，经过这么多年的发展，宝塔面板在配置服务器方面还是很方便的，而里面一些小插件也是非常的好用，所以，对于这个面板老刘是非常的纠结，喜欢他的简单和好用的插件，纠结它的稳定性。毕竟老刘是吃过这方面的亏的，早点5.x的时代，有一次，什么都没动，网站也正常打开，面板却挂了….</p>
<p>闲话少说了，思前想后，还是决定用它吧，多备份，万一挂了，恢复起来也快。既然决定要用这个一个有着安全漏洞前科的面板，把它打造的相对安全一些是一件迫在眉睫的事情了。老刘是在以下几个方面做的，有需要的朋友可以参考。</p>
<h2 id="第一面板的设置">第一，面板的设置</h2>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/c9fb8fb098ecc77.png"><img loading="lazy" decoding="async" class="aligncenter size-large wp-image-3329" src="https://tunan.org/wp-content/uploads/2020/10/c9fb8fb098ecc77-1024x868.png" alt="" width="1024" height="868" srcset="https://tunan.org/wp-content/uploads/2020/10/c9fb8fb098ecc77-1024x868.png 1024w, https://tunan.org/wp-content/uploads/2020/10/c9fb8fb098ecc77-300x254.png 300w, https://tunan.org/wp-content/uploads/2020/10/c9fb8fb098ecc77-768x651.png 768w, https://tunan.org/wp-content/uploads/2020/10/c9fb8fb098ecc77.png 1067w" sizes="(max-width: 1024px) 100vw, 1024px" /></a></p>
<p>这个好多的教程都有提到，比如别名，安全入口名字、默认目录，默认端口 面板用户及密码，都需要一一更改，由于比较简单，这里就不一一进行说明了。</p>
<h2 id="第二步加装防火墙">第二步，加装防火墙</h2>
<p>宝塔官方有waf的防火墙，但是是收费的。所有，这里老刘强烈建议搭建使用nginx作为网站服务器的web框架而不是使用阿帕奇。这是因为使用nginx后，有个叫叫明国三年一场雨大佬开发的Nginx免费防火墙，目前已经更新到了4.5的版本，由于没有用过官方的防火墙，老刘认为这个免费的对一般的网站已经完全够用了。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/9423090b4ba355c.png"><img loading="lazy" decoding="async" class="aligncenter size-large wp-image-3330" src="https://tunan.org/wp-content/uploads/2020/10/9423090b4ba355c-1024x763.png" alt="" width="1024" height="763" srcset="https://tunan.org/wp-content/uploads/2020/10/9423090b4ba355c-1024x763.png 1024w, https://tunan.org/wp-content/uploads/2020/10/9423090b4ba355c-300x224.png 300w, https://tunan.org/wp-content/uploads/2020/10/9423090b4ba355c-768x572.png 768w, https://tunan.org/wp-content/uploads/2020/10/9423090b4ba355c.png 1154w" sizes="(max-width: 1024px) 100vw, 1024px" /></a></p>
<p>使用防火墙的默认设置已经足矣，当然你也可以打开里面的设置项，把所有的开关都打开，但是这样会造成一些正常的动作被误报，因此建议直接使用默认设置即可。如果网站使用了CDN加速，可以在网站设置里选择开启CDN选项，这样就不会误报你的CDN的IP了。</p>
<h2 id="第三步对常见挂马的实时查杀">第三步，对常见挂马的实时查杀</h2>
<p>这个也是老刘纠结宝塔的原因之一，就是因为宝塔里的这款插件，openrasp管理器插件，OpenRASP 是百度安全推出的一款 免费、开源 的应用运行时自我保护产品，对一句话木马的查杀相当不错。项目的介绍可以在<a href="https://rasp.baidu.com/#section-intro" target="_blank" rel="noopener noreferrer">这里</a>了解。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/92c45413dd04494.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3331" src="https://tunan.org/wp-content/uploads/2020/10/92c45413dd04494.png" alt="" width="628" height="251" srcset="https://tunan.org/wp-content/uploads/2020/10/92c45413dd04494.png 628w, https://tunan.org/wp-content/uploads/2020/10/92c45413dd04494-300x120.png 300w" sizes="(max-width: 628px) 100vw, 628px" /></a></p>
<p>宝塔软件列表里搜索openrasp，点击安装，安装后开启即可，目前支持到php7.3,首次安装的时间可能有点长，耐心等待即可。</p>
<h2 id="第四步-安装fail2ban">第四步 安装fail2ban</h2>
<p>这个是放爆破扫描端口的的，宝塔的这个设置的比较简单，安装后可以参考老刘的另一篇文章进行详细的设置《<a href="https://tunan.org/2556.html">lnmp一键开启waf及使用 Fail2Ban防护</a>》。然后，把所有用不到的端口删除。</p>
<p> </p>
]]></content:encoded>
    </item>
    <item>
      <title>网站换了一台服务器</title>
      <link>http://localhost:1313/3309.html</link>
      <pubDate>Wed, 14 Oct 2020 07:03:04 +0000</pubDate>
      <guid>http://localhost:1313/3309.html</guid>
      <description>&lt;p&gt;前几天发现网站有点卡，特别是回复评论的时候，速度很慢。然后后台看了一下进程，发现WWW进程占用的CPU会一下一下的飙升，最高的时候达到了100%。但是根据流量的话，不可能是这样一个占用。这个博客也就日流量30IP左右，另外一个网站，日流量就是400-500之间。作为一台2核4g内存的vps,不可能达到这个资源占用水平。所以，打算重新整下生产环境。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前几天发现网站有点卡，特别是回复评论的时候，速度很慢。然后后台看了一下进程，发现WWW进程占用的CPU会一下一下的飙升，最高的时候达到了100%。但是根据流量的话，不可能是这样一个占用。这个博客也就日流量30IP左右，另外一个网站，日流量就是400-500之间。作为一台2核4g内存的vps,不可能达到这个资源占用水平。所以，打算重新整下生产环境。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/194686deba817bf.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3311" src="https://tunan.org/wp-content/uploads/2020/10/194686deba817bf.jpg" alt="" width="750" height="950" srcset="https://tunan.org/wp-content/uploads/2020/10/194686deba817bf.jpg 750w, https://tunan.org/wp-content/uploads/2020/10/194686deba817bf-237x300.jpg 237w" sizes="(max-width: 750px) 100vw, 750px" /></a></p>
<p>昨天下午正好有点时间，把两个网站进行了备份，这个博客还好，打包之后只有100多兆，另外一个网站打包后竟然有了1G多，唉。所有，能不折腾还是少折腾啊。</p>
<p>下载完了之后，进到篱落的后台重新安装系统镜像，结果发现，centos8安装不上，其他的Ubuntu啊，debian啊等等也是安装不了。装来装去只有centos7.6能装进去，虽然说理想的系统是8，但是7.6也就凑合了。系统装好后，开始装oneinstack，结果发现，无法下载安装包，本地电脑打开是正常的，ping一下那个网址，也PING不通。不死心，安装lnmp吧，结果还是无法下载安装包，nmmp，都不行，我装宝塔总可以吧，我去，宝塔也装不了，?！~~~</p>
<p>于是联系小张，这货不知道去哪pc去了?，到晚上才回复我，要了我的ip，后来说是宿主机坏了，需要更换。想着会花一段时间呢，于是开个腾讯港轻量应急，反正也可以随时退款。题外话，腾讯香港轻量晚上有点卡，其他时间倒是还可以。结果小张说给我换新的服务器。</p>
<p>早上一大早就给搞好了，弄生产环境搞了半天，下午总算网站恢复正常了。</p>
<p>总的来说，篱落的主机还是推荐使用的，和腾讯阿里等大厂相比稳定性虽然稍差一些，但是胜在价格便宜啊，象我这款人情价的2h4g的vps才300块钱，还要啥自行车啊。</p>
<p>如果你想要找一款性价比不错的主机空间，不妨看看篱落吧，走我下面的链接，据说有优惠！</p>
<p><a href="https://my.liluohost.com/aff.php?aff=148">https://my.liluohost.com/aff.php?aff=148</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>nodecache开通了中国直连线路</title>
      <link>http://localhost:1313/3283.html</link>
      <pubDate>Sun, 11 Oct 2020 02:29:24 +0000</pubDate>
      <guid>http://localhost:1313/3283.html</guid>
      <description>&lt;p&gt;在以前的文章（&lt;a href=&#34;https://tunan.org/1679.html&#34;&gt;推荐一款国外CDN——Nodecache，注册即送1T流量&lt;/a&gt;）中介绍过nodecache这个CDN服务商，当时是注册送1T的流量，后来由于觉得其速度有点慢，有时候又不稳定，所以就一直没有，后来通过这篇文字，陆续有了写aff送的流量，差不多一个月9G的样子，要说用在我这个小博客上市绰绰有余了，但是由于怕跑路就一直也没有用。&lt;/p&gt;
&lt;p&gt;今天闲着没事，翻看自己以前的文字，发现了自己的这篇文章，于是，怀旧的登录上去看看，结果这个CDN服务商居然还没有跑路，哈哈！看了一下，里面的设置基本上和上海云盾的类似，有些还借鉴了又拍云的设置方式。又看了一下发现居然增加了中国直连线路。于是，我可耻的心动了。设置了一番，发现没有想想的那么美好，中国直连线路不是中国线路。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>在以前的文章（<a href="https://tunan.org/1679.html">推荐一款国外CDN——Nodecache，注册即送1T流量</a>）中介绍过nodecache这个CDN服务商，当时是注册送1T的流量，后来由于觉得其速度有点慢，有时候又不稳定，所以就一直没有，后来通过这篇文字，陆续有了写aff送的流量，差不多一个月9G的样子，要说用在我这个小博客上市绰绰有余了，但是由于怕跑路就一直也没有用。</p>
<p>今天闲着没事，翻看自己以前的文字，发现了自己的这篇文章，于是，怀旧的登录上去看看，结果这个CDN服务商居然还没有跑路，哈哈！看了一下，里面的设置基本上和上海云盾的类似，有些还借鉴了又拍云的设置方式。又看了一下发现居然增加了中国直连线路。于是，我可耻的心动了。设置了一番，发现没有想想的那么美好，中国直连线路不是中国线路。</p>
<h2 id="设置成中国直连线路后的ping值">设置成中国直连线路后的ping值</h2>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/6213ab646eb588c.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3284" src="https://tunan.org/wp-content/uploads/2020/10/6213ab646eb588c.jpg" alt="" width="614" height="183" srcset="https://tunan.org/wp-content/uploads/2020/10/6213ab646eb588c.jpg 614w, https://tunan.org/wp-content/uploads/2020/10/6213ab646eb588c-300x89.jpg 300w" sizes="(max-width: 614px) 100vw, 614px" /></a></p>
<p>大概170左右，查了一下这个IP，是美国加利福尼亚的IP。不过实际用起来感觉还是挺流畅的。除了ping的值有点高以外。</p>
<h2 id="于是切换成亚太ip后">于是切换成亚太IP后</h2>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/be32cbd25dd47e4.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3285" src="https://tunan.org/wp-content/uploads/2020/10/be32cbd25dd47e4.jpg" alt="" width="610" height="99" srcset="https://tunan.org/wp-content/uploads/2020/10/be32cbd25dd47e4.jpg 610w, https://tunan.org/wp-content/uploads/2020/10/be32cbd25dd47e4-300x49.jpg 300w" sizes="(max-width: 610px) 100vw, 610px" /></a></p>
<p>ping值降到了60，但是不稳定，有超时的现象。</p>
<h2 id="里面的设置还是挺丰富的支持防护cc以及waf防火墙">里面的设置还是挺丰富的，支持防护CC以及waf防火墙</h2>
<p><a href="https://tunan.org/wp-content/uploads/2020/10/fca569fbd8b732d.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3286" src="https://tunan.org/wp-content/uploads/2020/10/fca569fbd8b732d.jpg" alt="" width="988" height="598" srcset="https://tunan.org/wp-content/uploads/2020/10/fca569fbd8b732d.jpg 988w, https://tunan.org/wp-content/uploads/2020/10/fca569fbd8b732d-300x182.jpg 300w, https://tunan.org/wp-content/uploads/2020/10/fca569fbd8b732d-768x465.jpg 768w" sizes="(max-width: 988px) 100vw, 988px" /></a></p>
<h2 id="有兴趣的朋友可以试试看">有兴趣的朋友可以试试看</h2>
<p>目前也运行了一年多的时间了吧，估计不会跑路了，作为日常使用一下下还是可以的，谁让没有备案不能用国内的CDN呢！凑合着用吧，比裸奔心理安慰一些些！</p>
<h2 id="注册地址">注册地址：</h2>
<p>可以走一下我的AFF,让我多一些些流量。?</p>
<p><a href="https://console-api.nodecache.com/f?aff=4BLOd3">https://console-api.nodecache.com/f?aff=4BLOd3</a></p>
<p> </p>
<p>貌似不再送流量了…..</p>
]]></content:encoded>
    </item>
    <item>
      <title>卖出去了一个域名</title>
      <link>http://localhost:1313/3264.html</link>
      <pubDate>Thu, 17 Sep 2020 00:38:20 +0000</pubDate>
      <guid>http://localhost:1313/3264.html</guid>
      <description>&lt;p&gt;昨天晚上给女儿辅导完作业，顺手拿起手机看看群里的信息什么的。忽然发现有一封新邮件。点开一看，发现是西部数码发过来的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1.png&#34;&gt;&lt;img loading=&#34;lazy&#34; decoding=&#34;async&#34; class=&#34;aligncenter size-full wp-image-3266&#34; src=&#34;https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1.png&#34; alt=&#34;&#34; width=&#34;512&#34; height=&#34;341&#34; srcset=&#34;https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1.png 512w, https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1-300x200.png 300w&#34; sizes=&#34;(max-width: 512px) 100vw, 512px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;尊敬的用户：&lt;br&gt;
您发布的一口价域名已售出：liu.gg 共1个，合计：2000元。恭喜您!&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天晚上给女儿辅导完作业，顺手拿起手机看看群里的信息什么的。忽然发现有一封新邮件。点开一看，发现是西部数码发过来的：</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3266" src="https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1.png" alt="" width="512" height="341" srcset="https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1.png 512w, https://tunan.org/wp-content/uploads/2020/09/4af52202f77beb1-300x200.png 300w" sizes="(max-width: 512px) 100vw, 512px" /></a></p>
<blockquote>
<p>尊敬的用户：<br>
您发布的一口价域名已售出：liu.gg 共1个，合计：2000元。恭喜您!</p>
<p>若不需要本类邮件提醒，可以在管理中心》帐号管理》设置中心 进行关闭。<br>
若使用中遇到任何问题，请联系我司客服或提交有问必答，非常感谢您对我司的长期支持。</p>
</blockquote>
<p>这时候才想起来，在决定用流金岁月这个域名之后，就把liu.gg挂到了西数的域名交易平台了。这一晃半年过去了。前几天还在寻思用这个域名再搞个什么网站玩玩。还没有下手呢，结果被买走了。</p>
<p>其实买家花2000块钱买我这个域名真的不亏，当时西数做活动应该是80多块钱一年，顺便就续费了10年。现在域名续费的价格是200多。10年的话就2000多了。这也是我第一次卖域名吧，心中五味杂陈，既有一丝兴奋，又有一份不舍。期待买家能把这个域名用好吧！</p>
]]></content:encoded>
    </item>
    <item>
      <title>从宝塔面板换成oneinstack踩的一个坑</title>
      <link>http://localhost:1313/3240.html</link>
      <pubDate>Thu, 27 Aug 2020 03:25:28 +0000</pubDate>
      <guid>http://localhost:1313/3240.html</guid>
      <description>&lt;p&gt;年初的时候，由于疫情的原因，在家没事就折腾服务器，由于看上了宝塔面板的FRP插件，所以把网站环境管理面板从oneinstack换成了宝塔面板，不成想，前几天出现了这么一个低级的bug，所以，思来想去，不能为了一颗树苗而放弃整片森林，为了安全，还是把宝塔面板换掉为妙。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>年初的时候，由于疫情的原因，在家没事就折腾服务器，由于看上了宝塔面板的FRP插件，所以把网站环境管理面板从oneinstack换成了宝塔面板，不成想，前几天出现了这么一个低级的bug，所以，思来想去，不能为了一颗树苗而放弃整片森林，为了安全，还是把宝塔面板换掉为妙。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/08/2d3a77705b1e397.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3241" src="https://tunan.org/wp-content/uploads/2020/08/2d3a77705b1e397.jpg" alt="" width="800" height="320" srcset="https://tunan.org/wp-content/uploads/2020/08/2d3a77705b1e397.jpg 800w, https://tunan.org/wp-content/uploads/2020/08/2d3a77705b1e397-300x120.jpg 300w, https://tunan.org/wp-content/uploads/2020/08/2d3a77705b1e397-768x307.jpg 768w" sizes="(max-width: 800px) 100vw, 800px" /></a></p>
<p>步骤很简单，无非是再宝塔里先把网站的文件夹打包，下载。然后备份数据文件下载。趁着这个机会，把服务器的系统也升级到centos8了。然后安装oneinstack，并编译环境，生成网站目录等等，都是基本的方法，不是本文重点要说的。我要说的是，这里面的坑。</p>
<p>新环境做好后，把文件上传，解压，链接好数据库文件，浏览器一输入网站，我去！显示No input file specified错误，赶紧Google了一下，发现解决的方法五花八门，基本上都是东php.ini。想到自己刚才因为网站用的一个主题需要引用一个解密的插件，确实是改了php.ini。但是去掉改动的，依然是这个错误。于是怀疑是自己不经意间删掉了什么字符之类的。由于没有备份这个文件。所以，决定重新编译php。</p>
<p>新弄的php还是显示No input file specified。确认了不是php的问题。为了排查，把自己的博客也上传，结果发现博客是好的。这时候忽然想起来，博客这个文件当时备份的时候，把宝塔生成的.user.ini这个为了防止跨站的文件删除了，而另一个网站的没有删。于是在网站源码里找到这个文件，删除之。问题迎刃而解了。</p>
<p> </p>
]]></content:encoded>
    </item>
    <item>
      <title>腾讯的CDN还是可以的</title>
      <link>http://localhost:1313/3217.html</link>
      <pubDate>Fri, 24 Jul 2020 09:35:42 +0000</pubDate>
      <guid>http://localhost:1313/3217.html</guid>
      <description>&lt;p&gt;2018年的时候，申请了腾讯的COS，CDN等，因为那时候cos有免费50g的额度，CDN每月10g的免费流量，COS倒是一直用着，cdn因为当时是景安的服务器，用上腾讯的cdn后，奇卡无比。找客服，发工单说是正常的。没有办法，只好放弃。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>2018年的时候，申请了腾讯的COS，CDN等，因为那时候cos有免费50g的额度，CDN每月10g的免费流量，COS倒是一直用着，cdn因为当时是景安的服务器，用上腾讯的cdn后，奇卡无比。找客服，发工单说是正常的。没有办法，只好放弃。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/07/2a7bc86928e6c37.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-3218" src="https://tunan.org/wp-content/uploads/2020/07/2a7bc86928e6c37.png" alt="" width="607" height="149" srcset="https://tunan.org/wp-content/uploads/2020/07/2a7bc86928e6c37.png 607w, https://tunan.org/wp-content/uploads/2020/07/2a7bc86928e6c37-300x74.png 300w" sizes="(max-width: 607px) 100vw, 607px" /></a></p>
<p>一直闲置到现在，镜缘轩这个网站也一直使用的是云盾的cdn，这几天又忍不住了折腾镜缘轩官网，当时这个就是一个PC+微信小程序的商城，说实话，现在商城的PC端流量少的可怜，商城的销量基本都是小程序贡献的。所以，打算给改版一下，采用企业博客+微信小程序的模式。</p>
<p>新版的小程序的程序的附件是存到cos上的，看了cos的介绍，发现只免费6个月了，于是还购买了存储包和下行流量包，然后查询了一下，发现2018年注册的是具有永久免费50g的额度的，于是发工单把这些又退掉了。</p>
<p>又看了看CDN，觉得不用有点可惜了，加上服务器也是腾讯家的，索性把cdn也从云盾转过来好了，结果发现腾讯自家的产品组合的一起，下过好的不得了，速度真是刚刚的。</p>
]]></content:encoded>
    </item>
    <item>
      <title>解决升级PHPmake: *** No rule to make target `install’. Stop.的问题</title>
      <link>http://localhost:1313/3022.html</link>
      <pubDate>Sat, 18 Jan 2020 10:14:33 +0000</pubDate>
      <guid>http://localhost:1313/3022.html</guid>
      <description>&lt;p&gt;今天发现PHP7.3已经有7.3.13版本了，而我博客的版本还是7.3.10，所以，为了更好的安全性就决定把php升级到最新的版本。其实，oneinstack升级php版本很简单，因为已经自带了升级的程序，只需进入到oneinstack的目录，然后./upgrade，选择升级php的选项即可。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>今天发现PHP7.3已经有7.3.13版本了，而我博客的版本还是7.3.10，所以，为了更好的安全性就决定把php升级到最新的版本。其实，oneinstack升级php版本很简单，因为已经自带了升级的程序，只需进入到oneinstack的目录，然后./upgrade，选择升级php的选项即可。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/01/7cdd46e35b66157.png"><img loading="lazy" decoding="async" class="aligncenter size-large wp-image-3023" src="https://tunan.org/wp-content/uploads/2020/01/7cdd46e35b66157-1024x512.png" alt="" width="1024" height="512" srcset="https://tunan.org/wp-content/uploads/2020/01/7cdd46e35b66157-1024x512.png 1024w, https://tunan.org/wp-content/uploads/2020/01/7cdd46e35b66157-300x150.png 300w, https://tunan.org/wp-content/uploads/2020/01/7cdd46e35b66157-768x384.png 768w, https://tunan.org/wp-content/uploads/2020/01/7cdd46e35b66157.png 1320w" sizes="(max-width: 1024px) 100vw, 1024px" /></a></p>
<p>升级一会就完成了，提示成功升级到了7.3.13。但是看了下php的版本还是7.3.10。看了下上面的代码，显示make: *** No rule to make target `install’. Stop.。虽然我也是菜鸟一枚，但是也看出是在编译的过程中出现了问题，导致编译不成功的。</p>
<p>百度上搜了一下，各种的回答，Google了一下，发现可能是安装包没有下全造成的，于是重新wget下载安装包，很快看出原因了，10k的下载速度，下了一会竟然断线了，?。</p>
<p>然后想出来了另外一个办法，本地下载，由于有梯子下载的很快，然后通过FTP传到src的目录了，然后运行./upgrade。编译了十来分钟，终于升级成功了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>推荐篱落主机的香港VPS</title>
      <link>http://localhost:1313/2981.html</link>
      <pubDate>Mon, 06 Jan 2020 02:02:06 +0000</pubDate>
      <guid>http://localhost:1313/2981.html</guid>
      <description>&lt;p&gt;从去年11月底开始使用小张的篱落主机至今，差不多两个多月的时间。算是基本了解了篱落主机的性能和客服的人性化服务。由于线路速度以及服务器的稳定性都很不错，而且今天又发现了新年特款VPS，2h4g3m的配置，一年不到300元，算是非常的超值了！&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>从去年11月底开始使用小张的篱落主机至今，差不多两个多月的时间。算是基本了解了篱落主机的性能和客服的人性化服务。由于线路速度以及服务器的稳定性都很不错，而且今天又发现了新年特款VPS，2h4g3m的配置，一年不到300元，算是非常的超值了！</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/01/b788a4803af4065.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-2982" src="https://tunan.org/wp-content/uploads/2020/01/b788a4803af4065.png" alt="" width="431" height="248" srcset="https://tunan.org/wp-content/uploads/2020/01/b788a4803af4065.png 431w, https://tunan.org/wp-content/uploads/2020/01/b788a4803af4065-300x173.png 300w" sizes="(max-width: 431px) 100vw, 431px" /></a></p>
<p>使用新年优惠码 newyear,还可以五折优惠，算下来一年仅仅299.5元，非常的超值了。</p>
<p>篱落主机的注册地址为：<a href="https://my.liluohost.com/aff.php?aff=148">篱落主机</a></p>
<p>便宜的主机那么多，为啥跋涉者推荐篱落主机呢？</p>
<h2 id="首先稳定性非常的不错">首先，稳定性非常的不错</h2>
<p>跋涉者在11月份的时候曾经说换到篱落的主机了，详情见，</p>
<p class="article-title">
  <a href="https://tunan.org/2865.html">换篱落的空间，用宝塔面板</a>
</p>
<p>目前在这个VPS上放了3个网站，从11月份使用以来，一直没有出现过什么问题，线路也非常的不错，晚上的速度也挺快。所以，如果你在找一款稳定性还不错的VPS的话，篱落主机是一个不错的选择。</p>
<h2 id="第二带宽高">第二，带宽高</h2>
<p>虽然，套餐里说的是峰值3M带宽，其实这个是不准的，跋涉者在使用过程中发现，带宽是非常高的，下载速度基本达到了2m/s。折合成带宽基本是20m的了，所以，不要觉得3m的带宽低，只是这么一些而已，实际上带宽很充足，再也不用为小水管而发愁了。</p>
<h2 id="第三服务优">第三，服务优</h2>
<p>以前衡天小张的名头不是盖的，以前用衡天的空间也用了好长时间了，后来小张离开衡天后转了一圈，又回到了小张创办的篱落主机。当时购买的时候是1h2g的机型，也是特价300元一年，然后小张给主动升级到了4G，前两天发现小张又推出了2h4g的机型，还是300元，于是和小张谈了一下，二话没说直接又给升级到了2h4g3m，流量也给增加到了800g，磁盘空间给升级到了60g，这些都是没有想到了，在此表示感谢。</p>
<p><a href="https://tunan.org/wp-content/uploads/2020/01/e7082414d1e0313.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-2986" src="https://tunan.org/wp-content/uploads/2020/01/e7082414d1e0313.png" alt="" width="908" height="347" srcset="https://tunan.org/wp-content/uploads/2020/01/e7082414d1e0313.png 908w, https://tunan.org/wp-content/uploads/2020/01/e7082414d1e0313-300x115.png 300w, https://tunan.org/wp-content/uploads/2020/01/e7082414d1e0313-768x293.png 768w" sizes="(max-width: 908px) 100vw, 908px" /></a></p>
<p>综合这么多的有点。如果你还在找一款稳定、便宜、线路不错的主机的话，不妨试试小张的篱落主机。</p>
<p>篱落主机地址：<a href="https://my.liluohost.com/aff.php?aff=148">篱落主机</a>。点击注册后，输入新年优惠码，5折优惠，2h4g3m的主机只不到300元一年，真的是性价比足足！</p>
]]></content:encoded>
    </item>
    <item>
      <title>网站被黑了？</title>
      <link>http://localhost:1313/2934.html</link>
      <pubDate>Fri, 13 Dec 2019 05:23:20 +0000</pubDate>
      <guid>http://localhost:1313/2934.html</guid>
      <description>&lt;p&gt;最近一段时间，网站的关键字里总会穿插着一些贷款的关键字，当然点击这些页面是404的状态。看网页的标题，也没有诸如网站的推广啊，或者自己的网站自动跳转别的网站等情况。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>最近一段时间，网站的关键字里总会穿插着一些贷款的关键字，当然点击这些页面是404的状态。看网页的标题，也没有诸如网站的推广啊，或者自己的网站自动跳转别的网站等情况。</p>
<p><a href="https://tunan.org/wp-content/uploads/2019/12/85d5fd6fe1782a9.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-2935" src="https://tunan.org/wp-content/uploads/2019/12/85d5fd6fe1782a9.png" alt="" width="848" height="362" srcset="https://tunan.org/wp-content/uploads/2019/12/85d5fd6fe1782a9.png 848w, https://tunan.org/wp-content/uploads/2019/12/85d5fd6fe1782a9-300x128.png 300w, https://tunan.org/wp-content/uploads/2019/12/85d5fd6fe1782a9-768x328.png 768w" sizes="(max-width: 848px) 100vw, 848px" /></a></p>
<p>起初以为是被快照劫持之类的。但是百度出来的快照一切正常。而这些关键字时有时无，前几天把<a href="https://tunan.org">跋涉者</a>这个网站的域名从ewader.com换成了个性域名www.liuday.com.然后这个com域名就闲置了下来。与其闲置，不如拿来做一个视光行业的网站，把收集的一些资料以收费的方式看看能不能卖点出去。起先，打算用这个域名做个新的，后来看看自己眼镜店的官网已经严重跑偏了，来的都是一堆的同行，再加上把销售的重心也转到了<a href="https://www.jooj.vip/">镜缘轩商城</a>上，因此就把原来中意眼镜那个站的内容全都301到ewader.com上，并且设置了全站301跳转，百度站长工具里也设置了改版规则。很快，中意眼镜的权重都转移到了ewader.com上。</p>
<p>不过，烦心事也出现了，就是那几个贷款的关键词，更甚至原来收录的还是中意眼镜那个网址的首页，但是百度网站又没有问题。昨天没事，就把网站所有的图片备份了一下，然后把所有的文件全部删除。数据库里的只要不是wordpress默认的表，也全删除。插件删除，主题也全都安装新的。所有的密码全都该了，网站里注册的用户全部清除。</p>
<p>不过，今天偶尔的一个发现，让我感觉，网站并没有被黑，有极大的可能是百度的锅。老胡在群里发了一个可以查域名交易的网站，我登录上去后顺便把原来卖的一个域名查了一下，发现价格确实是我卖的价格。然后好奇打开了那个网站，发现就是一个贷款信息的网站。把那些在我网站上404的网页地址，改成那个域名的地址，都能打开，而且完美符合网页的标题关键字等。</p>
<p>至此，我才记得，卖的那个域名曾经做过网站，后来想备案，才换了yanjingweb那个域名，并且在站长工具里提交过改版到中意眼镜的那个网站。尽管早就已经在站长工具里把改版规则删除了，百度估计还有缓存。导致时不时的会有几个网页被认为是yanjingweb的网页。</p>
<p>至此，算是明白了真相，我当时就是纳闷，网站没有一点异常，怎么会有这些关键字，而且没有一点点恶意的动向。本来想向百度投诉一下说明这个情况，但是后来意向，反正域名已经换了，yanjingweb那个域名的权重也转移了，域名也不在设置解析了。也就多一是不如少一事了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>换篱落的空间，用宝塔面板，CSRF校验失败</title>
      <link>http://localhost:1313/2865.html</link>
      <pubDate>Mon, 25 Nov 2019 01:55:14 +0000</pubDate>
      <guid>http://localhost:1313/2865.html</guid>
      <description>&lt;p&gt;昨天在群里看到老胡发的篱落的特价VPS，忽然发现我也在他说的那个群，以前是衡天主机的客户群，后来好像卖给给香港人后，小张自己搞了个篱落主机。由于，近几年一直用的阿里云的，所以，没有太关注了。不过老胡发的这个特价的机型很快就卖完了，然后就发现还有一款1h2g2m的vps，也是特价机型，一年是300元。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天在群里看到老胡发的篱落的特价VPS，忽然发现我也在他说的那个群，以前是衡天主机的客户群，后来好像卖给给香港人后，小张自己搞了个篱落主机。由于，近几年一直用的阿里云的，所以，没有太关注了。不过老胡发的这个特价的机型很快就卖完了，然后就发现还有一款1h2g2m的vps，也是特价机型，一年是300元。</p>
<p>比阿里云的轻量1h2g的一年便宜个百十块钱。但是没有阿里的带宽高，也没有阿里云给的流量大。但是线路要比阿里云轻量香港的要好些，特别是晚上，阿里云香港的有点卡。不过想想自己也用不了那么大的带宽，就两个小网站，流量也不高。在加上使用FRP做内网穿透远程控制NAS。这个vps也足够了。毕竟远程也不会同步很大的东西。</p>
<p>所以就买了这个300一年的，买后在群里和小张联系了一下，他很大气的给升级到了4g的内存。这样绝对是一款很超值的vps了。由于需要配置FRP服务器端，看到宝塔面板带的有这个客户端，也是为了图方便，就舍弃了自己一直用的oneinstack，装上了宝塔。</p>
<p>装上宝塔后，首先，编译网站的环境，选择了php7.3 mysql5.7 和NGINX。编译的那叫慢啊。整整弄了一下午，中间我还像张波老师抱怨是这个cpu不行，不过最终终于编译好了。网站什么的都挪过来，然后安装frp的客户端，但是第一个坑来了，安装后竟然打不开这个客户端，显示“<strong><span style="color: #ff0000;">CSRF校验失败，请重新登录面板</span></strong>”。于是搜这个问题的处理方法，看到官方论坛里有说遇到这个问题的，官方给出的方法是屏蔽CSRF校检，于是按照方法操作之。这时候第二个坑来了。重启面板后，面板竟然挂了………我心中一万个那啥路过。</p>
<p><a href="https://tunan.org/wp-content/uploads/2019/11/9e524a7d1b5ef6d.png"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-2866" src="https://tunan.org/wp-content/uploads/2019/11/9e524a7d1b5ef6d.png" alt="" width="701" height="596" srcset="https://tunan.org/wp-content/uploads/2019/11/9e524a7d1b5ef6d.png 701w, https://tunan.org/wp-content/uploads/2019/11/9e524a7d1b5ef6d-300x255.png 300w" sizes="(max-width: 701px) 100vw, 701px" /></a></p>
<p>看来还是要用自己熟悉的东西，重新安装vps的系统，用oneinstack编译网站环境，同样的环境竟然40分钟左右编译完了。我心中又一万个那啥路过了。看来，自己还是不适合用宝塔，而且宝塔也确实不太稳定，动不动就挂真实受不了。还记得还是宝塔5点多的时候，用过一段时间，也是莫名其妙的，啥都没有动，面板打不开了。还是用我的oneinstack好了。</p>
<p> </p>
<p> </p>
]]></content:encoded>
    </item>
    <item>
      <title>博客更换到阿里云香港轻量，并升级到wordpress5.3.0</title>
      <link>http://localhost:1313/2851.html</link>
      <pubDate>Thu, 14 Nov 2019 23:53:20 +0000</pubDate>
      <guid>http://localhost:1313/2851.html</guid>
      <description>&lt;p&gt;昨天在折腾FRP的时候，怕影响到现有的环境，所以，买了一个阿里云轻量1H1G的主机，因为我知道，一个月24元，其实我不是打算用一个月而是打算就用一天练练手，摆治了一天，FRP也没有实现与黑群晖进行联手，下午在退款的时候，惊奇的发现，我2年多前买的这个800元3年的1H1G1M的小鸡也能退款，大概能退200左右，毕竟还有8个来月的时间就到期了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天在折腾FRP的时候，怕影响到现有的环境，所以，买了一个阿里云轻量1H1G的主机，因为我知道，一个月24元，其实我不是打算用一个月而是打算就用一天练练手，摆治了一天，FRP也没有实现与黑群晖进行联手，下午在退款的时候，惊奇的发现，我2年多前买的这个800元3年的1H1G1M的小鸡也能退款，大概能退200左右，毕竟还有8个来月的时间就到期了。</p>
<p>说起来，我早就不想用这个主机了，主要是带宽只有1m,只不过心疼剩余的时间，就一直凑合着用。以前也咨询过客服能不能退款，说是活动价买的不能退云云。所以，立马吧网站备份到oss里，退款，并购买了一台，1H2g30m的香港轻量云。</p>
<p><a href="https://tunan.org/wp-content/uploads/2019/11/25b2916b5c49db6.jpg"><img loading="lazy" decoding="async" class="aligncenter size-full wp-image-2852" src="https://tunan.org/wp-content/uploads/2019/11/25b2916b5c49db6.jpg" alt="" width="600" height="450" srcset="https://tunan.org/wp-content/uploads/2019/11/25b2916b5c49db6.jpg 600w, https://tunan.org/wp-content/uploads/2019/11/25b2916b5c49db6-300x225.jpg 300w" sizes="(max-width: 600px) 100vw, 600px" /></a></p>
<p>说起这个阿里云轻量，网上有两种声音，一种是爱死，一种是恨死。我曾经试用过半个多月的时间，给我的感觉，拿来做博客，绰绰有余了。关键带宽足，晚上是有点慢，不过也在可接受的范围呢。这次不想再用lnmp等了，于是直接刷了宝塔面板，主要是因为宝塔上有个frp的管理端，想看看是不是好用一些。</p>
<p>刷宝塔很容易，但是在安装环境的时候，又TM出问题了，宝塔的后台一只显示等待安装，CPU也不动，从网上查了一下说，重启一下面板就可以了，可是，重启了几遍也没乱用。索性放那不管了，然后直接ssh里reboot。然后就给女儿做饭去了。吃过晚饭，惊奇的发现，环境竟然装好了。哈</p>
<p>把备份的网站从oss里导出来，这点阿里云真方便。都是内网传输，非常的快。解压，网站终于可以访问了。登录后台，发现WordPress已经更新到5.3.0了，不过，最近不知道怎么回事，登录WordPress官网很费劲，更新也是提示太多连接。不过，多刷新两下，就更新成功了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>WordPress开启Nginx fastcgi_cache缓存加速</title>
      <link>http://localhost:1313/2700.html</link>
      <pubDate>Sun, 08 Sep 2019 01:51:11 +0000</pubDate>
      <guid>http://localhost:1313/2700.html</guid>
      <description>&lt;p&gt;昨天下午没有太多事情，想起来一直想弄的nginx fastcgi_cache还没有弄，于是趁着重装景安服务器的功夫，顺便把这个玩意也搞搞，弄到晚上7点多，走了不少弯路，不过最后总算是搞定了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天下午没有太多事情，想起来一直想弄的nginx fastcgi_cache还没有弄，于是趁着重装景安服务器的功夫，顺便把这个玩意也搞搞，弄到晚上7点多，走了不少弯路，不过最后总算是搞定了。</p>
<p> </p>
<p>方法步骤如下：</p>
<p><a href="https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459.jpg"><img loading="lazy" decoding="async" width="900" height="900" class="aligncenter size-full wp-image-2631" src="https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459.jpg" alt="" srcset="https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459.jpg 900w, https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459-768x768.jpg 768w" sizes="(max-width: 900px) 100vw, 900px" /></a></p>
<h2 id="一安装nginx-ngx_cache_purge模块">一、安装Nginx ngx_cache_purge模块</h2>
<p>由于我使用的是oneinstack面板，所以以下的步骤都以此为基础，其他比如lnmp没有试过，可能需要微调一下。</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-comment"># nginx -V 2&gt;&1 | grep -o ngx_cache_purge 查看ngx_cache_purge是否安装,没有数据表示未安装</span>
 cd /root/oneinstack/src
 wget http://labs.frickle.com/files/ngx_cache_purge<span class="hljs-number">-2.3</span>.tar.gz
 tar xzf ngx_cache_purge<span class="hljs-number">-2.3</span>.tar.gz
 <span class="hljs-comment">#以下几个安装包都是Oneinstack自带的，不同的版本可能会不同，请根据情况调整</span>
 tar xzf nginx<span class="hljs-number">-1.16.1</span>.tar.gz
 tar xzf pcre<span class="hljs-number">-8.43</span>.tar.gz
 tar xzf openssl<span class="hljs-number">-1.1.1</span>c.tar.gz
 cd /root/oneinstack/src/nginx<span class="hljs-number">-1.16.1</span>
 nginx -V <span class="hljs-comment">#查看nginx编译参数，最后加上--add-module=../ngx_cache_purge-2.3</span>
 ./configure --prefix=/usr/local/nginx --user=www --group=www --<span class="hljs-keyword">with</span>-http_stub_status_module --<span class="hljs-keyword">with</span>-http_v2_module --<span class="hljs-keyword">with</span>-http_ssl_module --<span class="hljs-keyword">with</span>-http_gzip_static_module --<span class="hljs-keyword">with</span>-http_realip_module --<span class="hljs-keyword">with</span>-http_flv_module --<span class="hljs-keyword">with</span>-http_mp4_module --<span class="hljs-keyword">with</span>-openssl=../openssl<span class="hljs-number">-1.0.2</span>o --<span class="hljs-keyword">with</span>-pcre=../pcre<span class="hljs-number">-8.42</span> --<span class="hljs-keyword">with</span>-pcre-jit --<span class="hljs-keyword">with</span>-ld-opt=-ljemalloc --add-module=../ngx_cache_purge<span class="hljs-number">-2.3</span>
 make <span class="hljs-comment">#编译</span>
 mv /usr/local/nginx/sbin/nginx{,_`date +%F`} <span class="hljs-comment">#备份nginx</span>
 cp objs/nginx /usr/local/nginx/sbin
 nginx -V <span class="hljs-number">2</span>&gt;&<span class="hljs-number">1</span> | grep -o ngx_cache_purge
 <span class="hljs-comment"># 显示ngx_cache_purge表示已经安装成功、</span>
</pre>
<p>使用<code>Nginx -V</code>查看编译参数添加add-module时，一定要根据你自己的Nginx的编译参数来操作，也就是说保留原来的Nginx参数再加上add-module。例如我的：</p>
<h2 id="二nginx开启fastcgi_cache缓存-配置实例">二、Nginx开启fastcgi_cache缓存-配置实例</h2>
<p>这里我直接贴出我的www.yanjingweb.cn的配置实例</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">fastcgi_cache_path</span> /tmp/wpcache levels=<span class="hljs-number">1</span>:<span class="hljs-number">2</span> keys_zone=WORDPRESS:<span class="hljs-number">250m</span> inactive=<span class="hljs-number">1d</span> max_size=<span class="hljs-number">1G</span>;
 <span class="hljs-attribute">fastcgi_temp_path</span> /tmp/wpcache/temp;
 <span class="hljs-attribute">fastcgi_cache_key</span> <span class="hljs-string">"<span class="hljs-variable">$scheme$request_method$host$request_uri</span>"</span>;
 <span class="hljs-attribute">fastcgi_cache_use_stale</span> <span class="hljs-literal">error</span> timeout invalid_header http_500;
 <span class="hljs-comment">#忽略一切nocache申明，避免不缓存伪静态等fastcgi_ignore_headers Cache-Control Expires Set-Cookie;</span>
<span class="hljs-section">server</span> {
 <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;
 <span class="hljs-attribute">listen</span> <span class="hljs-number">443</span> ssl http2
此处略
set <span class="hljs-variable">$skip_cache</span> <span class="hljs-number"></span>;
 <span class="hljs-comment">#post访问不缓存if ($request_method = POST) {</span>
 <span class="hljs-attribute">set</span> <span class="hljs-variable">$skip_cache</span> <span class="hljs-number">1</span>;
 }
 <span class="hljs-comment">#动态查询不缓存if ($query_string != "") {</span>
 <span class="hljs-attribute">set</span> <span class="hljs-variable">$skip_cache</span> <span class="hljs-number">1</span>;
 }
 <span class="hljs-comment">#后台等特定页面不缓存（其他需求请自行添加即可）if ($request_uri ~* "/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml") {</span>
 <span class="hljs-attribute">set</span> <span class="hljs-variable">$skip_cache</span> <span class="hljs-number">1</span>;
 }
 <span class="hljs-comment">#对登录用户、评论过的用户不展示缓存if ($http_cookie ~* "comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in") {</span>
 <span class="hljs-attribute">set</span> <span class="hljs-variable">$skip_cache</span> <span class="hljs-number">1</span>;
 }
 <span class="hljs-comment">#这里请参考你网站之前的配置，特别是sock的路径，弄错了就502了！location ~ [^/]\.php(/|$) {</span>
 <span class="hljs-comment">#fastcgi_pass remote_php_ip:9000;fastcgi_pass unix:/dev/shm/php-cgi.sock;</span>
 <span class="hljs-attribute">fastcgi_index</span> index.php;
 <span class="hljs-attribute">include</span> fastcgi.conf;
 <span class="hljs-attribute">add_header</span> Strict-Transport-Security <span class="hljs-string">"max-age=63072000; includeSubdomains; preload"</span>;
 <span class="hljs-comment">#新增的缓存规则fastcgi_cache_bypass $skip_cache;</span>
 <span class="hljs-attribute">fastcgi_no_cache</span> <span class="hljs-variable">$skip_cache</span>;
 <span class="hljs-attribute">add_header</span> X-Cache <span class="hljs-string">"<span class="hljs-variable">$upstream_cache_status</span> From <span class="hljs-variable">$host</span>"</span>;
 <span class="hljs-attribute">add_header</span> Cache-Control max-age=<span class="hljs-number"></span>;
 <span class="hljs-attribute">add_header</span> Nginx-Cache <span class="hljs-string">"<span class="hljs-variable">$upstream_cache_status</span>"</span>;
 <span class="hljs-attribute">add_header</span> Last-Modified <span class="hljs-variable">$date_gmt</span>;
 <span class="hljs-attribute">add_header</span> X-Frame-Options SAMEORIGIN; <span class="hljs-comment"># 只允许本站用 frame 来嵌套add_header X-Content-Type-Options nosniff; # 禁止嗅探文件类型add_header X-XSS-Protection "1; mode=block"; # XSS 保护etag on;</span>
 <span class="hljs-attribute">fastcgi_cache</span> WORDPRESS;
 <span class="hljs-attribute">fastcgi_cache_valid</span> <span class="hljs-number">200</span> <span class="hljs-number">301</span> <span class="hljs-number">302</span> <span class="hljs-number">1d</span>;
 }
<span class="hljs-comment">#缓存清理配置（可选）location ~ /purge( /.*) { #为防止转义，请去掉{ /之间的空格allow 127.0.0.1;</span>
 <span class="hljs-comment">#此处填写你的服务器IPallow 122.115.122.111;</span>
 <span class="hljs-attribute">deny</span> all;
 <span class="hljs-comment">#请注意此处的WORDPRESS要与上面的keys_zone保持一致fastcgi_cache_purge WORDPRESS "$scheme$request_method$host$1";</span>
 }
</pre>
<p>以下略</p>
<p>至此，全部设置结束，nginx -t 检查以下nginx。然后重新启动一下nginx。service nginx restart</p>
<p>用浏览器打开一个网页，F5刷新几下，看看浏览器的head，就能看到nginx_cache hit字样，说明缓存成功了。然后看缓存文件夹了，也有了一堆的文件。</p>
<p><a href="https://tunan.org/wp-content/uploads/2019/09/1111111.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" decoding="async" src="https://tunan.org/wp-content/uploads/2019/09/1111111.png" width="748" height="363" /></a></p>
<p>最后，说一下</p>
<p>开通这个之后，确实打开网页的速度快了不少，在不用CDN的前提下，网页也能秒开了，有动手能力的同学不妨一试。</p>
]]></content:encoded>
    </item>
    <item>
      <title>再说说景安的服务</title>
      <link>http://localhost:1313/2697.html</link>
      <pubDate>Sat, 07 Sep 2019 03:35:21 +0000</pubDate>
      <guid>http://localhost:1313/2697.html</guid>
      <description>&lt;p&gt;自从上次看到景安欠薪的消息以后，虽然觉得很惋惜，但是也没有太放在心上，毕竟作为河南最大的IDC，还是再新三板上市的企业，不可能马上就挂的，况且里面还有周鸿祎的股份，所以还是照旧使用原来的服务器。&lt;br&gt;
&lt;a href=&#34;https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg&#34;&gt;&lt;img loading=&#34;lazy&#34; decoding=&#34;async&#34; width=&#34;810&#34; height=&#34;456&#34; src=&#34;https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg&#34; alt=&#34;&#34; class=&#34;aligncenter size-full wp-image-2309&#34; srcset=&#34;https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg 810w, https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5-768x432.jpg 768w&#34; sizes=&#34;(max-width: 810px) 100vw, 810px&#34; /&gt;&lt;/a&gt;&lt;br&gt;
不过最近以来发生的事情让我对景安的后续有了疑虑，姑且不说欠薪的事情，最近总感觉网站是不是的卡一下。前一段时间出现数据库链接不上的问题，查了额下是内存有点小了，毕竟是1g的内存，既然小了那就再加上1g，花了300来块钱，数据库掉线的问题倒是解决了，但是网站还是时不时的卡一下下。表现为，网站能正常打开，在打开某一个页面的时候，一直加载，然后就加载不了啦，换个浏览器在打开，就可以打开了。次数出现的多了之后，我就想是不是服务器的问题。然后就切换到前年买的的一个111配置的香港阿里云上来试试。&lt;br&gt;
结果，我去，网页卡一下的问题没有了。&lt;br&gt;
用一个缙哥哥网站上一个测试服务器的代码测试了一下，景安的这台服务器不管是I/O还是在CPU跑分等方面都完爆阿里云的这台，但是却没有阿里云的香港的流畅，感觉景安的网络是没有人精心维护了。。。。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>自从上次看到景安欠薪的消息以后，虽然觉得很惋惜，但是也没有太放在心上，毕竟作为河南最大的IDC，还是再新三板上市的企业，不可能马上就挂的，况且里面还有周鸿祎的股份，所以还是照旧使用原来的服务器。<br>
<a href="https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg"><img loading="lazy" decoding="async" width="810" height="456" src="https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg" alt="" class="aligncenter size-full wp-image-2309" srcset="https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg 810w, https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5-768x432.jpg 768w" sizes="(max-width: 810px) 100vw, 810px" /></a><br>
不过最近以来发生的事情让我对景安的后续有了疑虑，姑且不说欠薪的事情，最近总感觉网站是不是的卡一下。前一段时间出现数据库链接不上的问题，查了额下是内存有点小了，毕竟是1g的内存，既然小了那就再加上1g，花了300来块钱，数据库掉线的问题倒是解决了，但是网站还是时不时的卡一下下。表现为，网站能正常打开，在打开某一个页面的时候，一直加载，然后就加载不了啦，换个浏览器在打开，就可以打开了。次数出现的多了之后，我就想是不是服务器的问题。然后就切换到前年买的的一个111配置的香港阿里云上来试试。<br>
结果，我去，网页卡一下的问题没有了。<br>
用一个缙哥哥网站上一个测试服务器的代码测试了一下，景安的这台服务器不管是I/O还是在CPU跑分等方面都完爆阿里云的这台，但是却没有阿里云的香港的流畅，感觉景安的网络是没有人精心维护了。。。。</p>
]]></content:encoded>
    </item>
    <item>
      <title>景安服务器（vps)挂载数据盘</title>
      <link>http://localhost:1313/2585.html</link>
      <pubDate>Sun, 04 Aug 2019 09:37:21 +0000</pubDate>
      <guid>http://localhost:1313/2585.html</guid>
      <description>&lt;p&gt;以前没有注意，后来在做快照的时候发现服务器还有个数据盘的快照，和系统盘是分开的。查了一下，数据盘是送的一块专门用来放数据的另一个盘，就象我们电脑里的系统盘（c:),其他盘（d:)一样，把一些数据放在数据盘里，等系统出现问题需要重置的时候，数据盘的的数据不会收到任何的影响。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>以前没有注意，后来在做快照的时候发现服务器还有个数据盘的快照，和系统盘是分开的。查了一下，数据盘是送的一块专门用来放数据的另一个盘，就象我们电脑里的系统盘（c:),其他盘（d:)一样，把一些数据放在数据盘里，等系统出现问题需要重置的时候，数据盘的的数据不会收到任何的影响。</p>
<p>景安的服务器虽然没有比如阿里云oss这种物美价廉的储存空间（也有，就是价格比较贵），送了一块数据盘也是很方便的，平常把备份的数据就放在这里，万一系统有问题了，重装系统后可以很方便的从数据盘里把数据还原，并且景安的快照是系统盘和数据盘分开的，这点还是不错的。</p>
<h2 id="第一检查磁盘情况">第一、检查磁盘情况</h2>
<p>使用<span style="color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);">fdisk -l命令来检查磁盘，如下图</span><figure class="content-img-box " id="2583"></p>
<p><img decoding="async" alt="景安服务器（vps)挂载数据盘" src="https://tunan.org/wp-content/uploads/2019/08/1963c4d12575a6.PNG" id="4AFE18C8" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>由于我这里已经挂载过了，所以显示的是磁盘的大小等信息，如果数据盘没有挂载的话，是没有这些信息的。</p>
<h2 id="第二对数据盘进行分区">第二、对数据盘进行分区</h2>
<p><span style="color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);">输入命令：</span><span style="color: rgb(68, 68, 68); background-color: rgb(251, 251, 251);">fdisk /dev/vdb1 这里要说明一下，vdb1这个需要看你磁盘的具体的情况，可以是vdb1,也可以是vdb,等等，千万不要输错了。否则就可以重装系统了。然后，</span><span style="color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);">然后依次执行 n p 1 回车 回车 wq，这样就完成分区。</span></p>
<p><span style="color: rgb(68, 68, 68); background-color: rgb(251, 251, 251);">这里跋涉者因为已经分了区了，没有截图，就不上图了。</span></p>
<h2 id="第三格式化数据盘">第三、格式化数据盘</h2>
<p>我们先使用df -T这个命令来查看下文件系统，<figure class="content-img-box " id="2584"></p>
<p><img decoding="async" alt="景安服务器（vps)挂载数据盘" src="https://tunan.org/wp-content/uploads/2019/08/1b8b551d6034a5.PNG" id="843241A1" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>这里，跋涉者采用的xfs的文件格式，这个格式目前在centos7上基本是标配了，据说比ext4要好，所以咱们就用这个格式了。</p>
<p>输入命令：mkfs.xfs /dev/vdb1</p>
<p>进行格式化。</p>
<h2 id="第四进行挂载">第四、进行挂载</h2>
<p>输入命令：</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-built_in">cd</span> /
ls
mkdir /shuju
<span class="hljs-built_in">echo</span> <span class="hljs-string">'/dev/vdb1 /shuju xfs defaults 0 0'</span> &gt;&gt; /etc/fstab
mount -a
</pre>
<p>至此已经全部搞定了。</p>
<p><span style="color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">景安的服务器虽然没有比如阿里云oss这种物美价廉的储存空间（也有，就是价格比较贵），送了一块数据盘也是很方便的，平常把备份的数据就放在这里，万一系统有问题了，重装系统后可以很方便的从数据盘里把数据还原，并且景安的快照是系统盘和数据盘分开的，这点还是不错的。</span></p>
]]></content:encoded>
    </item>
    <item>
      <title>lnmp一键开启waf及使用 Fail2Ban防护</title>
      <link>http://localhost:1313/2556.html</link>
      <pubDate>Sun, 28 Jul 2019 09:07:40 +0000</pubDate>
      <guid>http://localhost:1313/2556.html</guid>
      <description>&lt;p&gt;试用了阿里云香港的轻量服务器之后，赶紧确实是一个不错的选择，因此，决定把网站给迁移过来。以前都是用的oneinstack安装包，这是因为军哥的lnmp如果使用mysql5.6以上的话就必须要内存2G衣裳，这次用的就是2G的，所以还是使用lnmp一键安装包比较舒心。和one的区别是，one很多的事项在编译环境的时候已经弄好了，而lnmp需要西西的打磨，这也是一个好事，毕竟服务器不同，弄的规则也不尽一样。闲言少续，开始正体。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>试用了阿里云香港的轻量服务器之后，赶紧确实是一个不错的选择，因此，决定把网站给迁移过来。以前都是用的oneinstack安装包，这是因为军哥的lnmp如果使用mysql5.6以上的话就必须要内存2G衣裳，这次用的就是2G的，所以还是使用lnmp一键安装包比较舒心。和one的区别是，one很多的事项在编译环境的时候已经弄好了，而lnmp需要西西的打磨，这也是一个好事，毕竟服务器不同，弄的规则也不尽一样。闲言少续，开始正体。</p>
<h2 id="lnmp开启waf的方法">lnmp开启waf的方法</h2>
<p><span style="background-color: #ffffff; color: #404040;">LNMP一键安装包从1.5开始增加了lua支持的选项，可以通过修改lnmp.conf中Enable_Nginx_Lua后的参数为 y 来启用lua，如果没安装lnmp，修改lnmp.conf后保存，安装完lnmp就是支持lua的，如果已经安装好lnmp，也是按前面修改lnmp.conf，然后lnmp安装包目录下 </span><strong style="background-color: #ffffff; color: #000000;">./upgrade.sh nginx</strong><span style="background-color: #ffffff; color: #404040;"> 升级nginx，输入当前 </span><a style="background-color: #ffffff; color: #404040;" href="http://www.codercto.com/category/nginx.html" target="_blank" rel="noopener noreferrer">nginx</a><span style="background-color: #ffffff; color: #404040;"> 版本号或更新的nginx版本号，升级完成就是支持lua的了。</span></p>
<h4 id="下载安装ngx_lua_waf"><strong>下载安装ngx_lua_waf：</strong></h4>
<p>wget <a href="https://github.com/loveshell/ngx">https://github.com/loveshell/ngx</a>_lua_waf/archive/master.zip -O ngx_lua_waf.zip</p>
<p>unzip ngx_lua_waf.zip</p>
<p>mv ngx_lua_waf-master /usr/local/nginx/conf/waf</p>
<h4 id="nginx上设置并启用ngx_lua_waf"><strong>nginx上设置并启用ngx_lua_waf</strong></h4>
<p>编辑 /usr/local/nginx/conf/nginx.conf 在 server_tokens off; 下面添加如下代码：</p>
<p>lua_package_path “/usr/local/nginx/conf/waf/?.lua”;</p>
<p>lua_shared_dict limit 10m;</p>
<p>init_by_lua_file /usr/local/nginx/conf/waf/init.lua;</p>
<p>修改完成保存</p>
<p>如果要想在某个虚拟主机启用ngx_lua_waf可以修改对应虚拟主机的server段，在该server段中 root 网站目录行下面添加如下代码：</p>
<p>access_by_lua_file /usr/local/nginx/conf/waf/waf.lua;</p>
<p>修改完成保存</p>
<p>测试nginx配置文件： <strong style="color: #000000;">/usr/local/nginx/sbin/nginx -t</strong></p>
<p>重载nginx配置生效： <strong style="color: #000000;">/usr/local/nginx/sbin/nginx -s reload</strong></p>
<p>如果测试和重载都没报错就已经生效。</p>
<p>可以通过访问 http://域名/test.php?id=../etc/passwd 来测试<figure id="2559" class="content-img-box "></p>
<p><img decoding="async" id="412D35F8" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/07/1d3c90a5a17d65.JPG" alt="lnmp一键开启waf及使用 Fail2Ban防护" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>提示：您的请求带有&gt;不合法参数，已被网站管理员设置拦截！说明已经正确设置</p>
<p>ngx_lua_waf配置文件位置：/usr/local/nginx/conf/waf/config.lua</p>
<h2 id="使用-fail2ban防护网站及服务器">使用 Fail2Ban防护网站及服务器</h2>
<p><span style="background-color: #ffffff; color: #333333;">Fail2Ban 是一种入侵防御软件框架，可以保护计算机服务器免受暴力攻击。它以 Python 编程语言编写，能够在 POSIX 系统上运行，该系统具有本地安装的数据包控制系统或防火墙的接口，例如 iptables 或 TCP Wrapper。</span></p>
<p><span style="background-color: #ffffff; color: #333333;">所以要想使用Fail2Ban，就必须让服务器识别来源的真实IP地址，而不是套的cdn的地址。</span></p>
<p><strong style="background-color: #ffffff; color: #333333;">套用CDN后获取来源的真实IP的方法</strong></p>
<p>在nginx.conf内的http下增加：</p>
<p>#自定义一个日志格式</p>
<p><code>log_format main '$http_x_forwarded_for - $remote_user [$time_local] '</code></p>
<p>‘”<span style="color: blue;">$request</span>” <span style="color: blue;">$status</span> $body_bytes_sent ‘</p>
<p>‘”$http_referer” “$http_user_agent”‘;</p>
<p>然后<span style="background-color: #ffffff; color: #333333;">修改access_log /home/wwwlogs/xxxx.log; 为access_log /home/wwwlogs/xxxx.log main;</span></p>
<p><span style="background-color: #ffffff; color: #333333;">nginx-t 检查无误后，service nginx restart,现在在看日志文件，里面的地址就是真正的来源地址了。</span></p>
<p><strong>使用 Fail2Ban 保护 Nginx、WordPress</strong></p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">cp</span> /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
</pre>
<p>Fail2Ban 会自动读取 .local 文件的配置，然后再<strong>增量</strong>地读取 conf 配置，这样就避免了更新它时你辛辛苦苦写好的配置被覆盖掉了。</p>
<p>然后我们就来编辑 Fail2Ban 的配置</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">vim</span> /etc/fail2ban/jail.local
</pre>
<p>首先是在 [DEFAULT] 字段下，我们可以改变一些行为参数，比如这样修改（多余的没有提到的配置就保留默认，不要理会即可）：</p>
<pre class="ql-syntax" spellcheck="false">bantime = 3600 <span class="hljs-comment">#默认是 10 分钟，这个是说要 ban 多久，我们改长一点</span>
<span class="hljs-comment">#下面这两个是说在多长时间内失败多少次就被屏蔽，</span>
<span class="hljs-comment">#比如这个是在 3600 秒内失败 6 次就被屏蔽</span>
findtime = 3600
maxretry = 6  
</pre>
<p>接下来就是添加我们的监狱配置了，默认配置信息中并没有内置 Nginx ，只有 Apache：</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-section">[nginx-http-auth]</span>
<span class="hljs-comment"># HTTP 验证防暴力破解</span>
<span class="hljs-attr">enabled</span>  = <span class="hljs-literal">true</span>
<span class="hljs-attr">filter</span>  = nginx-http-auth
<span class="hljs-attr">port</span>    = http,https
<span class="hljs-attr">logpath</span>  = /var/log/nginx/error.log
<span class="hljs-section"> 
[nginx-badbots]</span>
<span class="hljs-comment">#屏蔽恶意爬虫</span>
<span class="hljs-attr">enabled</span>  = <span class="hljs-literal">true</span>
<span class="hljs-attr">port</span>    = http,https
<span class="hljs-attr">filter</span>  = nginx-badbots
<span class="hljs-attr">logpath</span>  = /var/log/nginx/access.log
<span class="hljs-attr">maxretry</span> = <span class="hljs-number">2</span>
<span class="hljs-section"> 
[nginx-nohome]</span>
<span class="hljs-comment">#避免恶意请求网站目录结构</span>
<span class="hljs-attr">enabled</span>  = <span class="hljs-literal">true</span>
<span class="hljs-attr">port</span>    = http,https
<span class="hljs-attr">filter</span>  = nginx-nohome
<span class="hljs-attr">logpath</span>  = /var/log/nginx/access.log
<span class="hljs-attr">maxretry</span> = <span class="hljs-number">2</span>
<span class="hljs-section"> 
[nginx-noproxy]</span>
<span class="hljs-comment">#避免 nginx 被他人用于反向代理</span>
<span class="hljs-attr">enabled</span>  = <span class="hljs-literal">true</span>
<span class="hljs-attr">port</span>    = http,https
<span class="hljs-attr">filter</span>  = nginx-noproxy
<span class="hljs-attr">logpath</span>  = /var/log/nginx/access.log
<span class="hljs-attr">maxretry</span> = <span class="hljs-number">2</span>
<span class="hljs-section">
[wp-login]</span>
<span class="hljs-comment">#防范 WordPress 暴力破解登录请求</span>
<span class="hljs-attr">enabled</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">port</span> = http,https
<span class="hljs-attr">filter</span> = wp-login
<span class="hljs-attr">maxretry</span> = <span class="hljs-number">10</span>
<span class="hljs-attr">findtime</span> = <span class="hljs-number">60</span>
<span class="hljs-attr">bantime</span> = <span class="hljs-number">43600</span>
<span class="hljs-attr">logpath</span>  = /var/log/nginx/access.log
<span class="hljs-section">
[xmlrpc]</span>
<span class="hljs-comment">#防止 WordPress 受到 xmlrpc.php CC 攻击</span>
<span class="hljs-attr">enabled</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">port</span> = http,https
<span class="hljs-attr">filter</span> = xmlrpc
<span class="hljs-attr">logpath</span>  = /var/log/nginx/access.log
<span class="hljs-attr">bantime</span> = <span class="hljs-number">43600</span>
<span class="hljs-attr">maxretry</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">findtime</span>  = <span class="hljs-number">5</span>
</pre>
<p>注意这里的配置都是基于 Nginx 的日志的，所以你必须要允许 Nginx 记录日志，有些管理员为了性能考量会关闭日志，这样我们这篇文章也就失去了意义。</p>
<p>上述配置中 logpath 是指日志文件的路径的（如：/var/log/nginx/access.log），需要注意的是这里可以指定多个日志文件的，具体格式如下：</p>
<pre class="ql-syntax" spellcheck="false">logpath  = /home/wwwlogs/access.<span class="hljs-built_in">log</span>
           /home/wwwlogs/www<span class="hljs-number">.1111</span>.com.<span class="hljs-built_in">log</span>
           /home/wwwlogs/www<span class="hljs-number">.2222</span>.tech.<span class="hljs-built_in">log</span>
           /home/wwwlogs/service<span class="hljs-number">.3333</span>.com.<span class="hljs-built_in">log</span>
           /home/wwwlogs/eat<span class="hljs-number">.4444</span>.com.<span class="hljs-built_in">log</span>
</pre>
<p><strong>每个日志文件需要回车换行（空格直接去掉了，所以可以放心用空格对齐）才能识别到哦！</strong></p>
<blockquote>
<p>另，在配置 Fail2Ban 之前，你就应该先安装好 Nginx，否则 Fail2Ban 读不到 Nginx 的日志，会报错。</p>
</blockquote>
<p>设置好了要启用的监狱，接下来就是给监狱创建规则了：</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-built_in">cd</span> /etc/fail2ban/filter.d
</pre>
<p>在这个目录下，存放这所有规则文件，一个配置名一个文件，有多少个文件就有多少个规则，这些规则被上文中监狱配置里 filter 字段调用。</p>
<pre class="ql-syntax" spellcheck="false">vim nginx-http-auth.conf
</pre>
<p>这个规则是存在的，我们在规则中加一行配置，来过滤除了账号密码错误外，空白账号或者密码的错误：</p>
<p><span style="color: #333333;">[</span><span style="color: #5c2699;">Definition</span><span style="color: #333333;">]</span></p>
<p><span style="color: #5c2699;">failregex</span> <span style="color: #2e0d6e;">=</span> <span style="color: #2e0d6e;">^</span> <span style="color: #333333;">[</span><span style="color: #5c2699;">error</span><span style="color: #333333;">]</span> <span style="color: #333333;">&lt;/span&gt;<span style="color: #5c2699;">d</span><span style="color: #2e0d6e;">+#</span><span style="color: #333333;">&lt;/span&gt;<span style="color: #5c2699;">d</span><span style="color: #2e0d6e;">+:</span> <span style="color: #333333;">&lt;/span&gt;<span style="color: #2e0d6e;"><em></span><span style="color: #333333;">&lt;/span&gt;<span style="color: #5c2699;">d</span><span style="color: #2e0d6e;">+</span> <span style="color: #aa0d91;">user</span> <span style="color: #c41a16;">“\S+”</span><span style="color: #2e0d6e;">:</span><span style="color: #333333;">?</span> <span style="color: #333333;">(</span><span style="color: #2e0d6e;">password </span><span style="color: #5c2699;">mismatch</span><span style="color: #2e0d6e;">|was </span><span style="color: #aa0d91;">not</span> <span style="color: #2e0d6e;">found </span><span style="color: #aa0d91;">in</span> <span style="color: #c41a16;">“.</em>”</span><span style="color: #333333;">),</span> <span style="color: #5c2699;">client</span><span style="color: #2e0d6e;">:</span> <span style="color: #2e0d6e;">&laquo;/span&gt;<span style="color: #5c2699;">HOST</span><span style="color: #2e0d6e;">&gt;</span><span style="color: #333333;">,</span> <span style="color: #5c2699;">server</span><span style="color: #2e0d6e;">:</span> <span style="color: #333333;">&lt;/span&gt;<span style="color: #5c2699;">S</span><span style="color: #2e0d6e;">+</span><span style="color: #333333;">,</span> <span style="color: #5c2699;">request</span><span style="color: #2e0d6e;">:</span> <span style="color: #c41a16;">“\S+ \S+ HTTP/\d+.\d+”</span><span style="color: #333333;">,</span> <span style="color: #5c2699;">host</span><span style="color: #2e0d6e;">:</span> <span style="color: #c41a16;">“\S+”</span><span style="color: #333333;">&lt;/span&gt;<span style="color: #5c2699;">s</span><span style="color: #2e0d6e;">*</span><span style="color: #333333;">$</span></p>
<p><strong style="color: #2e0d6e; background-color: #cce0f5;">^</strong> <strong style="color: #333333; background-color: #cce0f5;">[</strong><strong style="color: #5c2699; background-color: #cce0f5;">error</strong><strong style="color: #333333; background-color: #cce0f5;">]</strong> <strong style="color: #333333; background-color: #cce0f5;">&lt;/strong&gt;<strong style="color: #5c2699; background-color: #cce0f5;">d</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">+#</strong><strong style="color: #333333; background-color: #cce0f5;">&lt;/strong&gt;<strong style="color: #5c2699; background-color: #cce0f5;">d</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">+:</strong> <strong style="color: #333333; background-color: #cce0f5;">&lt;/strong&gt;<strong style="color: #2e0d6e; background-color: #cce0f5;"><em></strong><strong style="color: #333333; background-color: #cce0f5;">&lt;/strong&gt;<strong style="color: #5c2699; background-color: #cce0f5;">d</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">+</strong> <strong style="color: #2e0d6e; background-color: #cce0f5;">no </strong><strong style="color: #5c2699; background-color: #cce0f5;">user</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">/password was provided </strong><strong style="color: #aa0d91; background-color: #cce0f5;">for</strong> <strong style="color: #2e0d6e; background-color: #cce0f5;">basic </strong><strong style="color: #5c2699; background-color: #cce0f5;">authentication</strong><strong style="color: #333333; background-color: #cce0f5;">,</strong> <strong style="color: #5c2699; background-color: #cce0f5;">client</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">:</strong> <strong style="color: #2e0d6e; background-color: #cce0f5;">&laquo;/strong&gt;<strong style="color: #5c2699; background-color: #cce0f5;">HOST</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">&gt;</strong><strong style="color: #333333; background-color: #cce0f5;">,</strong> <strong style="color: #5c2699; background-color: #cce0f5;">server</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">:</strong> <strong style="color: #333333; background-color: #cce0f5;">&lt;/strong&gt;<strong style="color: #5c2699; background-color: #cce0f5;">S</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">+</strong><strong style="color: #333333; background-color: #cce0f5;">,</strong> <strong style="color: #5c2699; background-color: #cce0f5;">request</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">:</strong> <strong style="color: #c41a16; background-color: #cce0f5;">“\S+ \S+ HTTP/\d+.\d+”</strong><strong style="color: #333333; background-color: #cce0f5;">,</strong> <strong style="color: #5c2699; background-color: #cce0f5;">host</strong><strong style="color: #2e0d6e; background-color: #cce0f5;">:</strong> <strong style="color: #c41a16; background-color: #cce0f5;">“\S+”</strong><strong style="color: #333333; background-color: #cce0f5;">&lt;/strong&gt;<strong style="color: #5c2699; background-color: #cce0f5;">s</strong><strong style="color: #2e0d6e; background-color: #cce0f5;"></em></strong><strong style="color: #333333; background-color: #cce0f5;">$</strong></p>
<p><span style="color: #5c2699;">ignoreregex</span> <span style="color: #2e0d6e;">=</span></p>
<p>添加的是加粗的那一行。</p>
<pre class="ql-syntax" spellcheck="false">cp apache-badbots.conf nginx-badbots.conf
</pre>
<p>过滤爬虫的规则是有现成的，所以我们只需要改个名就可以了；</p>
<h2 id="vim-nginx-nohomeconf">vim nginx-nohome.conf</h2>
<p>这是过滤获取目录的：</p>
<p><em style="color: #007400;">[Definition]</em></p>
<p><em style="color: #007400;">failregex = ^</em><span style="color: #2e0d6e; background-color: #ffffff;">&laquo;/span&gt;<span style="color: #5c2699; background-color: #ffffff;">HOST</span><span style="color: #2e0d6e; background-color: #ffffff;">&gt;</span> <em style="color: #007400;">-.<em>GET .</em>/</em><span style="color: #2e0d6e;">~</span><span style="color: #333333;">.</span><span style="color: #2e0d6e;">*</span></p>
<p><span style="color: #5c2699;">ignoreregex</span> <span style="color: #2e0d6e;">=</span></p>
<h2 id="vim-nginx-noproxyconf">vim nginx-noproxy.conf</h2>
<p>这是过滤反代的：</p>
<p><span style="color: #333333;">[</span><span style="color: #5c2699;">Definition</span><span style="color: #333333;">]</span></p>
<p><span style="color: #5c2699;">failregex</span> <span style="color: #2e0d6e;">=</span> <span style="color: #2e0d6e;">^&laquo;/span&gt;<span style="color: #5c2699;">HOST</span><span style="color: #2e0d6e;">&gt;</span> <span style="color: #2e0d6e;">–</span><span style="color: #333333;">.</span><span style="color: #2e0d6e;"><em></span><span style="color: #800080;">GET</span> <span style="color: #5c2699;">http</span><span style="color: #333333;">.</span><span style="color: #2e0d6e;"></em></span></p>
<p><span style="color: #5c2699;">ignoreregex</span> <span style="color: #2e0d6e;">=</span></p>
<h2 id="vim-wp-loginconf"><strong>vim wp-login.conf</strong></h2>
<p>这是防止 WordPress 受到 xmlrpc.php 请求的 CC 攻击：</p>
<p><span style="background-color: #f8f8f8; color: #333333;">[Definition]</span></p>
<p><span style="background-color: #f8f8f8; color: #333333;">failregex = ^</span><span style="background-color: #ffffff; color: #2e0d6e;">&laquo;/span&gt;<span style="background-color: #ffffff; color: #5c2699;">HOST</span><span style="background-color: #ffffff; color: #2e0d6e;">&gt;</span> <span style="background-color: #f8f8f8; color: #333333;">-.* /wp-login.php.* HTTP/1..</span><span class="hljs-string" style="color: #dd1144;">“</span></p>
<p><span class="hljs-string" style="color: #dd1144;">ignoreregex =</span></p>
<h2 id="vim-xmlrpcconf"><strong>vim xmlrpc.conf</strong></h2>
<p>防范 WordPress 暴力破解登录请求</p>
<p>[Definition]</p>
<p>failregex = ^<span style="background-color: #ffffff; color: #2e0d6e;">&laquo;/span&gt;<span style="background-color: #ffffff; color: #5c2699;">HOST</span><span style="background-color: #ffffff; color: #2e0d6e;">&gt;</span> -.*POST .*xmlrpc.php.*</p>
<p>ignoreregex =</p>
<h2 id="跋涉者提示"><span style="color: #ff9900;">跋涉者提示</span></h2>
<p><span style="color: #ff9900;">很多网站上面的代码都不正确，是因为，高亮代码不知道怎么会屏蔽</span><span style="color: #ff9900; background-color: #ffffff;">这个语法，造成错误，本文已经更正，放心的使用。</span></p>
<p>做完上述配置之后，就可以重启</p>
<pre class="ql-syntax" spellcheck="false"> <span class="hljs-attribute">service</span> fail2ban restart
</pre>
<p>这时你可以通过命令 fail2ban-client status 来查看，不出意外，应该类似这样：</p>
<pre class="ql-syntax" spellcheck="false">fail2ban-client status
或者：/usr/local/python/bin/fail2ban-client status</pre>
<p>Status</p>
<p>|- Number of jail: 7</p>
<p>`- Jail list: nginx-badbots, nginx-http-auth, nginx-nohome, nginx-noproxy, sshd, wp-login, xmlrpc</p>
<p>至此，Fail2Ban 保护 Nginx、WordPress 基本算是完成了，至少跋涉者目前需要的安全策略都完成了，平时可以观察一下 Fail2Ban 的日志文件来观察 Fail2Ban 的防御效果，如：</p>
<pre class="ql-syntax" spellcheck="false">tail -f /var/<span class="hljs-built_in">log</span>/fail2ban.<span class="hljs-built_in">log</span>
iptables --<span class="hljs-built_in">list</span> -n
</pre>
<h2 id="用fail2ban屏蔽无效的404请求">用 Fail2Ban屏蔽无效的404请求</h2>
<p>借助 Fail2Ban 可以筛选出发送这些请求的 IP 地址来进行拦截屏蔽处理，根据日志中返回 404 的记录制定 Fail2Ban 监狱规则命名为 nginx-not-found.conf，具体内容如下：</p>
<pre class="ql-syntax" spellcheck="false">vim /etc/fail2ban/filter.d/nginx-<span class="hljs-keyword">not</span>-found.conf
</pre>
<p>打开编辑 nginx-not-found.conf 监狱规则文件，注意一定要在<span style="color: #333333; background-color: #ffffff;">/etc/fail2ban/filter.d/目录内哦</span>。</p>
<pre class="ql-syntax" spellcheck="false">[Definition]
failregex = ^&lt;HOST&gt;.*"(GET|POST).*" (404|444|403|400) .*$
ignoreregex =
</pre>
<p>保存退出。</p>
<p>再打开编辑 jail.local 启用这个监狱规则。</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">vim</span> /etc/fail2ban/jail.local
</pre>
<p>添加下面的代码到 jail.local 里即可。同样的，注意 jail.local 文件的目录哦。</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-section">[nginxno404]</span>
<span class="hljs-comment">#处理 nginx 下的恶意 404 结果扫描</span>
<span class="hljs-attr">enabled</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">port</span> = http,https
<span class="hljs-attr">filter</span> = nginx-not-found
<span class="hljs-attr">action</span> = iptables[name=nginxno404, port=http, protocol=tcp]
<span class="hljs-comment">#Fail2Ban 要监控的站点日志文件，大家可以根据自己站点来灵活调整。</span>
<span class="hljs-attr">logpath</span>  = /home/wwwlogs/access.log
           
<span class="hljs-attr">bantime</span> = <span class="hljs-number">3600</span> #默认是屏蔽 IP 地址 <span class="hljs-number">10</span> 分钟
<span class="hljs-comment">#下面这两个是说 60 秒内 5 次 404 失败请求就开始屏蔽这个 IP 地址</span>
<span class="hljs-attr">findtime</span> = <span class="hljs-number">60</span>
<span class="hljs-attr">maxretry</span> = <span class="hljs-number">5</span>
</pre>
<p>保存退出。</p>
<p>重新启动 Fail2Ban：</p>
<pre class="ql-syntax" spellcheck="false">systemctl restart fail2ban.service
</pre>
<p>看下日志：<figure id="2561" class="content-img-box "></p>
<p><img decoding="async" id="23B1CECF" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/07/136d1bd3715987.JPG" alt="lnmp一键开启waf及使用 Fail2Ban防护" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>nginxno404已经开始生效，并且Ban了一个ip，14.204.69.48<figure id="2560" class="content-img-box "></p>
<p><img decoding="async" id="8BDD51AF" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/07/16ce4571631d8d.JPG" alt="lnmp一键开启waf及使用 Fail2Ban防护" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>看一下iptables的记录，如上图，已经拒绝这个IP的访问了</p>
<p>本文参考了<a href="https://www.logcg.com/archives/2998.html" target="_blank" rel="noopener noreferrer">落格部落</a>及<a href="https://www.imydl.com" target="_blank" rel="noopener noreferrer">明月登楼博客</a>里的一些文章，在此表示感谢</p>
]]></content:encoded>
    </item>
    <item>
      <title>给7b2的主题加上评论回复功能</title>
      <link>http://localhost:1313/2552.html</link>
      <pubDate>Thu, 25 Jul 2019 00:54:22 +0000</pubDate>
      <guid>http://localhost:1313/2552.html</guid>
      <description>&lt;p&gt;7b2主题默认是不会给评论者回复邮件的。也曾经问过作者，作者说如果实现这个的话，没几天邮箱就被封掉了，可能作者有作者的理由吧，但是不加的话，你回复了评论者，他也不知道你给他回复了，没有个反馈，十分的不方便。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>7b2主题默认是不会给评论者回复邮件的。也曾经问过作者，作者说如果实现这个的话，没几天邮箱就被封掉了，可能作者有作者的理由吧，但是不加的话，你回复了评论者，他也不知道你给他回复了，没有个反馈，十分的不方便。</p>
<p>要想实现给评论者发邮件现在有两种方法，一种是代码实现，一种是插件实现。</p>
<h2 id="代码实现回复评论给评论者发送邮件">代码实现回复评论给评论者发送邮件</h2>
<p>修改<span style="background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);">functions.php，在文件的最后加上如下代码</span><figure class="content-img-box" id="2549"></p>
<p><img decoding="async" alt="给7b2的主题加上评论回复功能" src="https://tunan.org/wp-content/uploads/2019/07/18d4fc58dd4436.JPG" id="EB7107FF" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-comment">/* comment_mail_notify v1.0 by willin kan. (所有回复都发邮件) */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">comment_mail_notify</span><span class="hljs-params">($comment_id)</span> </span>{
  $comment = get_comment($comment_id);
  $parent_id = $comment-&gt;comment_parent ? $comment-&gt;comment_parent : <span class="hljs-string">''</span>;
  $spam_confirmed = $comment-&gt;comment_approved;
  <span class="hljs-keyword">if</span> (($parent_id != <span class="hljs-string">''</span>) && ($spam_confirmed != <span class="hljs-string">'spam'</span>)) {
    $wp_email = <span class="hljs-string">'no-reply@'</span> . preg_replace(<span class="hljs-string">'#^www\.#'</span>, <span class="hljs-string">''</span>, strtolower($_SERVER[<span class="hljs-string">'SERVER_NAME'</span>])); <span class="hljs-comment">//e-mail 发出点, no-reply 可改为可用的 e-mail.</span>
    $to = trim(get_comment($parent_id)-&gt;comment_author_email);
    $subject = <span class="hljs-string">'您在 ['</span> . get_option(<span class="hljs-string">"blogname"</span>) . <span class="hljs-string">'] 的留言有了回复'</span>;
    $message = <span class="hljs-string">'
    &lt;div style=" border:1px solid #d8e3e8; color:#111; padding:0 15px; -moz-border-radius:5px; -webkit-border-radius:5px; -khtml-border-radius:5px;"&gt;
      &lt;p&gt;'</span> . trim(get_comment($parent_id)-&gt;comment_author) . <span class="hljs-string">', 您好!&lt;/p&gt;
      &lt;p&gt;您曾在《'</span> . get_the_title($comment-&gt;comment_post_ID) . <span class="hljs-string">'》的留言:&lt;br /&gt;'</span>
       . trim(get_comment($parent_id)-&gt;comment_content) . <span class="hljs-string">'&lt;/p&gt;
      &lt;p&gt;'</span> . trim($comment-&gt;comment_author) . <span class="hljs-string">' 给您的回复:&lt;br /&gt;'</span>
       . trim($comment-&gt;comment_content) . <span class="hljs-string">'&lt;br /&gt;&lt;/p&gt;
      &lt;p&gt;您可以点击 查看回复完整內容&lt;/p&gt;
      &lt;p&gt;欢迎再度光临 '</span> . get_option(<span class="hljs-string">'blogname'</span>) . <span class="hljs-string">'&lt;/p&gt;
      &lt;p&gt;(此邮件由系统自动发送，请勿回复.)&lt;/p&gt;
    &lt;/div&gt;'</span>;
    $from = <span class="hljs-string">"From: \""</span> . get_option(<span class="hljs-string">'blogname'</span>) . <span class="hljs-string">"\" &lt;$wp_email&gt;"</span>;
    $headers = <span class="hljs-string">"$from\nContent-Type: text/html; charset="</span> . get_option(<span class="hljs-string">'blog_charset'</span>) . <span class="hljs-string">"\n"</span>;
    wp_mail( $to, $subject, $message, $headers );
    <span class="hljs-comment">//echo 'mail to ', $to, '&lt;br/&gt; ' , $subject, $message; // for testing</span>
  }
}
add_action(<span class="hljs-string">'comment_post'</span>, <span class="hljs-string">'comment_mail_notify'</span>);
<span class="hljs-comment">// -- END ----------------------------------------</span>
</pre>
<p>﻿现在﻿，在回复评论者就会有邮件通知了。</p>
<h2 id="第二种插件的方式来实现">第二种，插件的方式来实现</h2>
<p>这里跋涉者推荐国人开发的<span style="background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);">Wenprise Better Emails插件。美化的不错，符合国人的使用习惯，最重要是的中文的，哈哈</span></p>
<p>wordpress后台点击添加插件，搜索<span style="background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);">Wenprise Better Emails，安装启用即可。</span><figure class="content-img-box" id="2550"></p>
<p><img decoding="async" alt="给7b2的主题加上评论回复功能" src="https://tunan.org/wp-content/uploads/2019/07/1503dcdd869fcc.JPG" id="F92A9BC6" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>跋涉者使用的是第一种方式来实现，因为跋涉者不喜欢插件。</p>
<p>本文参考奶爸笔记的文章<a href="https://blog.naibabiji.com/archives/339" target="_blank" rel="noopener noreferrer">2019新版给WordPress添加评论邮件回复通知的方法</a>，只为给自己备忘，感谢奶爸</p>
]]></content:encoded>
    </item>
    <item>
      <title>景安备案太慢，原来是真出问题了</title>
      <link>http://localhost:1313/2522.html</link>
      <pubDate>Thu, 18 Jul 2019 08:13:37 +0000</pubDate>
      <guid>http://localhost:1313/2522.html</guid>
      <description>&lt;p&gt;前天突发奇想，想要把这个网站也给备案了。于是关站，在景安提交了备案申请，结果让我很不开心，现在景安备案给人的体验是太糟糕了。于是果断删除备案申请了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前天突发奇想，想要把这个网站也给备案了。于是关站，在景安提交了备案申请，结果让我很不开心，现在景安备案给人的体验是太糟糕了。于是果断删除备案申请了。</p>
<p>其实当初对景安的影响还可以，毕竟也是老牌子了。去年9月底买了他们的服务器，备案很快，当天提交，当天就能审核并提交给管局，想着这次也是很快的，结果等了两天竟然还是没有动静。问客服人员，说现在备案的人太多，排队。你人再多有腾讯、阿里云的人多吗，人家都能做到至少第二天审核提交。于是想着这个服务商是不是出现了什么问题，结果还真出事了。</p>
<p>百度了一把，原来这家公司从1月份到现在竟然没有发工资了，百度贴吧了，好多员工都在吐槽什么时候发工资。<figure class="content-img-box" id="2521"></p>
<p><img decoding="async" alt="景安现在真伤不起了，备案太慢了" src="https://tunan.org/wp-content/uploads/2019/07/16918401d52d39.JPG" id="A7EBA53C" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<blockquote>
<p><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">今天是2019年6月16日 自2019年年初 只收到2月份工资 3月份工资的40% 1月份工资至今没发！！ 就问你怕不怕 郑州市作为新的一线城市 背着房贷 车贷 还能活下去吗</span></p>
</blockquote>
<p><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">这是其中的一个帖子。可见这家公司目前的问题是多么的严峻。</span></p>
<p><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">现在都有些后怕，也是前两天，看到他们的活动，续费3年送三年，还可以用200元的优惠卷。算下来一年就差不多200多块钱，当时一是心动，幸亏关键时候没有选择剁手，当时说服自己的是，还有一年多才到期，到时候说不定有更优惠的选择。</span></p>
<p><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">现在看来，幸亏没有心动，不然有自己后悔的呢。</span></p>
<p><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">其实也不难想象，在BAT布局云计算的这种情况下，传统的idc商家日子肯定难过，不过，以前觉得景安也算在业界有一定地位的公司了，想不到问题竟然严重的这种地步了。</span></p>
<p>希望他们能度过难关吧。</p>
]]></content:encoded>
    </item>
    <item>
      <title>备忘，使用阿里云ossfs备份网站</title>
      <link>http://localhost:1313/2513.html</link>
      <pubDate>Mon, 15 Jul 2019 03:27:27 +0000</pubDate>
      <guid>http://localhost:1313/2513.html</guid>
      <description>&lt;p&gt;昨天看到明月云服务上有篇关于使用ossfs备份网站的文章，看起来也不复杂，于是就试用了一下，试用后感觉真是体验不错，用这个后，妈妈再也不担心网站数据丢失了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天看到明月云服务上有篇关于使用ossfs备份网站的文章，看起来也不复杂，于是就试用了一下，试用后感觉真是体验不错，用这个后，妈妈再也不担心网站数据丢失了。</p>
<h2 id="给服务器安装ossfs">给服务器安装ossfs。</h2>
<ul>
<li>下载安装包</li>
</ul>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">wget</span> http://gosspublic.alicdn.com/ossfs/ossfs_1.80.6_centos7.0_x86_64.rpm
</pre>
<p>这个可以到阿里云官网上下载最新的版本。</p>
<ul>
<li>安装，这里是centos7.x的安装方式</li>
</ul>
<pre class="ql-syntax" spellcheck="false">sudo yum localinstall ossfs_1.80.6_centos7.0_x86_64.rpm
</pre>
<ul>
<li><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">配置账号访问信息</span></li>
</ul>
<pre class="ql-syntax" spellcheck="false">echo <span class="hljs-keyword">my</span>-bucket:<span class="hljs-keyword">my</span>-access-key-id:<span class="hljs-keyword">my</span>-access-key-secret &gt; <span class="hljs-regexp">/etc/passwd</span>-ossfs
<span class="hljs-keyword">chmod</span> <span class="hljs-number">640</span> /etc/passwd-ossfs
ossfs <span class="hljs-keyword">my</span>-bucket <span class="hljs-keyword">my</span>-mount-point -ourl=<span class="hljs-keyword">my</span>-oss-endpoint
</pre>
<p>例如，本人用的香港阿里云服务器，配置就是这么做的</p>
<pre class="ql-syntax" spellcheck="false">echo bucket-test:LTAIbZcdVCmQ****:MOk8x0y9hxQ31coh7A5e2MZEUz**** &gt; <span class="hljs-regexp">/etc/</span>passwd-ossfs
chmod <span class="hljs-number">640</span> /etc/passwd-ossfs
mkdir /tmp/ossfs
ossfs bucket-test /tmp/ossfs -ourl=http:<span class="hljs-comment">//oss-cn-hongkong-internal.aliyuncs.com</span>
</pre>
<p>如果服务器不在阿里云，那么就不要用内网传输，至此，安装完毕，已经可以试用了，利用oneinstak的备份脚本，选择本地备份，目录选择刚才新建的/tmp/ossfs，即可，备份成功后，可以到oss里看一下，确实已经存在了，速度非常的快。<figure class="content-img-box" id="2512"></p>
<p><img decoding="async" alt="备忘，使用阿里云ossfs备份网站" src="https://tunan.org/wp-content/uploads/2019/07/1280634b25f8ed.jpg" id="97E59226" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<h2 id="开机后自动挂载ossfs">开机后自动挂载ossfs</h2>
<p>上面的设置后，服务器不能重启，所以还要进一步的设置一下。</p>
<p><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">在/etc/init.d/目录下建立文件 ossfs，把模板文件中的内容拷贝到这个新文件中。并将其中的 your_xxx 内容改成您自己的信息。</span></p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-meta">#! /bin/bash</span>
<span class="hljs-comment"># ossfs      Automount Aliyun OSS Bucket in the specified direcotry.</span>
<span class="hljs-comment"># chkconfig: 2345 90 10</span>
<span class="hljs-comment"># description: Activates/Deactivates ossfs configured to start at boot time.</span>
 ossfs your_bucket your_mountpoint -ourl=your_url -oallow_other
</pre>
<p>执行如下命令：</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-attribute">chmod</span> a+x /etc/init.d/ossfs
chkconfig ossfs <span class="hljs-literal">on</span>
</pre>
<p>这样就完全不用担心重启服务器了，以后如果必须要重装服务器的话，重装玩后，可以直接通过内容把备份的东西拷贝回服务器，一般都是秒传。</p>
]]></content:encoded>
    </item>
    <item>
      <title>记一次因为标点符号导致重装服务器的经历</title>
      <link>http://localhost:1313/2257.html</link>
      <pubDate>Fri, 12 Jul 2019 08:59:58 +0000</pubDate>
      <guid>http://localhost:1313/2257.html</guid>
      <description>&lt;p&gt;前两天的时候，&lt;a href=&#34;https://www.yanjingweb.cn/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;镜缘轩&lt;/a&gt;网站出了点问题，加上那个服务器被我折腾的乱七八糟的，所以就想重新弄一下生产环境。为了不影响网站的访问，就先暂时把网站解析到另外一台阿里云香港的服务器上。转到香港后，其实用起来也不错，和国内的访问确实没有感觉出来，再加上有点忙，就一直拖着没有动手。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前两天的时候，<a href="https://www.yanjingweb.cn/" target="_blank" rel="noopener noreferrer">镜缘轩</a>网站出了点问题，加上那个服务器被我折腾的乱七八糟的，所以就想重新弄一下生产环境。为了不影响网站的访问，就先暂时把网站解析到另外一台阿里云香港的服务器上。转到香港后，其实用起来也不错，和国内的访问确实没有感觉出来，再加上有点忙，就一直拖着没有动手。</p>
<p>今天终于抽出时间来弄这个。本来装好系统之后，心血来潮想用用宝塔，毕竟鼠标点比输入代码要方便的多，装上宝塔之后申请<span style="background-color: rgb(255, 255, 255); color: rgb(102, 0, 153);">Let’s Encrypt</span><span style="background-color: rgb(255, 255, 255);">证书的时候总是出错，而且没有提示出错的原因，其实在宝塔那里也是可以申请ssl证书的，不过又是需要实名认证，而且不能续签，因为信不过这类小公司，所以遇到实名认证的这玩意就敬而远之了，所以，就删除了宝塔用自己习惯的oneinstack。</span><figure class="content-img-box" id="2256"></p>
<p><img decoding="async" alt="记一次因为标点符号导致重装服务器的经历" src="https://tunan.org/wp-content/uploads/2019/07/10945526b82d2e.png" id="F23D4457" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p><span style="background-color: rgb(255, 255, 255);">由于7b2主题的新版要使用phg7.3，而旧版本只能使用php7.2，所以为了以后少折腾就选择安装两个php版本，结果所有的步骤都完成了，Let’s Encrypt也很顺利的申请了泛域名证书。但是，却出现了一个问题,打开网址出现了</span>SWOOLEC Loader ext not installed的提示，但是我明明都是按照要求设置的了。</p>
<p>于是，我就先怀疑是不是因为多安装了php7.3的原因，于是把7.3卸载掉，还是不行，又把php7.2卸载掉，并重新安装，还是不行。最后，我觉得可能是由于先前安装宝塔面板的影响导致。于是再次重装系统。</p>
<p>重装后，安装完生产环境，根据7b2的要求设置php.ini的时候，我一下发现了问题的所在。原来第一次，我设置php.ini的时候，为了省事，直接在终端里用vi编辑的，在回车后，在语法的前面多了一个“;”。本来是extension = swoole_loader72.so；变成了;extension = swoole_loader72.so。</p>
<p>这样的结果就是，系统没有调用 <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">swoole_loader72.so，所以，也就不奇怪会出现SWOOLEC Loader ext not installed的提示。这件小事告诉我，以后一定要更细心一些，考虑更全面一下，不要遇到不好解决的事情就推倒重来。</span></p>
]]></content:encoded>
    </item>
    <item>
      <title>利用cloudFlare的边缘计算workers实现外链转内链跳转</title>
      <link>http://localhost:1313/2248.html</link>
      <pubDate>Tue, 09 Jul 2019 01:20:11 +0000</pubDate>
      <guid>http://localhost:1313/2248.html</guid>
      <description>&lt;p&gt;跋涉者曾经分享过一篇7b2主题外链跳转的文章，那篇文章实现的原理是在自己服务器里增加一个跳转的页面代码。&lt;/p&gt;
&lt;p&gt;[zrz_insert_post id=1656]&lt;/p&gt;
&lt;p&gt;不过今天看张戈大神的一篇文章&lt;a href=&#34;https://zhang.ge/5151.html&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;CloudFlare边缘计算Workers尝鲜初探：博客跳转中间页&lt;/a&gt;。这篇文章谈到可以把这个跳转代码保存到cloudFlare的边缘计算workers中，从而让跳转可以在CDN里实现，显然，这样会减轻服务器计算的压力。对小水管的博客来说有一定的使用价值。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>跋涉者曾经分享过一篇7b2主题外链跳转的文章，那篇文章实现的原理是在自己服务器里增加一个跳转的页面代码。</p>
<p>[zrz_insert_post id=1656]</p>
<p>不过今天看张戈大神的一篇文章<a href="https://zhang.ge/5151.html" target="_blank" rel="noopener noreferrer">CloudFlare边缘计算Workers尝鲜初探：博客跳转中间页</a>。这篇文章谈到可以把这个跳转代码保存到cloudFlare的边缘计算workers中，从而让跳转可以在CDN里实现，显然，这样会减轻服务器计算的压力。对小水管的博客来说有一定的使用价值。</p>
<h2 id="首先你的网站要使用cloudflare这个cdn加速">首先，你的网站要使用cloudFlare这个cdn加速。</h2>
<p>由于国内的网络情况，直接使用往往比较卡，不过好在张戈大神折腾出了另外一个套路，使用后感觉还不错。有兴趣的朋友可以去他的网站上参考。本文不做详细的叙述。</p>
<h2 id="第二把代码添加到cloudflare的边缘计算workers中">第二，把代码添加到cloudFlare的边缘计算workers中</h2>
<p>步骤如下：</p>
<ul>
<li><span style="background-color: rgb(255, 255, 255); color: rgb(101, 116, 135);">打开CF域名控制面板，如图1点击切换到Workers选项卡；</span></li>
<li><span style="background-color: rgb(255, 255, 255); color: rgb(101, 116, 135);">点击【Launch Editor】按钮进入Workers编辑界面后，点击【Add script】输入脚本名称并保存，如图：</span><figure class="content-img-box" id="2245"></li>
</ul>
<p><img decoding="async" alt="利用cloudFlare的边缘计算workers实现外链转内链跳转" src="https://tunan.org/wp-content/uploads/2019/07/10edf85dd62035.jpg" id="36AE1719" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<ul>
<li>把如下代码放入代码编辑框中，此代码来自<a href="https://zhang.ge/5151.html" target="_blank" rel="noopener noreferrer">张戈博客</a>.并点击save。</li>
</ul>
<pre class="ql-syntax" spellcheck="false">addEventListener('fetch', event =&gt; {
  event.respondWith(handleRequest(event.request))
})
 
/**
 * Fetch and log a request
 * @param {Request} request
 */
html = `<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=UTF-8"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"renderer"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"webkit"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Cache-Control"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"no-transform"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Cache-Control"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"no-siteapp"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"robots"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"noindex, nofollow"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"applicable-device"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"pc,mobile"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"HandheldFriendly"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"true"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"跳转页面"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"keywords"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"跳转页面"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-keyword">var</span> base64EncodeChars=<span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"</span>;<span class="hljs-keyword">var</span> base64DecodeChars=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">62</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">63</span>,<span class="hljs-number">52</span>,<span class="hljs-number">53</span>,<span class="hljs-number">54</span>,<span class="hljs-number">55</span>,<span class="hljs-number">56</span>,<span class="hljs-number">57</span>,<span class="hljs-number">58</span>,<span class="hljs-number">59</span>,<span class="hljs-number">60</span>,<span class="hljs-number">61</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number"></span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">14</span>,<span class="hljs-number">15</span>,<span class="hljs-number">16</span>,<span class="hljs-number">17</span>,<span class="hljs-number">18</span>,<span class="hljs-number">19</span>,<span class="hljs-number">20</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>,<span class="hljs-number">24</span>,<span class="hljs-number">25</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">26</span>,<span class="hljs-number">27</span>,<span class="hljs-number">28</span>,<span class="hljs-number">29</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>,<span class="hljs-number">32</span>,<span class="hljs-number">33</span>,<span class="hljs-number">34</span>,<span class="hljs-number">35</span>,<span class="hljs-number">36</span>,<span class="hljs-number">37</span>,<span class="hljs-number">38</span>,<span class="hljs-number">39</span>,<span class="hljs-number">40</span>,<span class="hljs-number">41</span>,<span class="hljs-number">42</span>,<span class="hljs-number">43</span>,<span class="hljs-number">44</span>,<span class="hljs-number">45</span>,<span class="hljs-number">46</span>,<span class="hljs-number">47</span>,<span class="hljs-number">48</span>,<span class="hljs-number">49</span>,<span class="hljs-number">50</span>,<span class="hljs-number">51</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base64encode</span>(<span class="hljs-params">str</span>)</span>{<span class="hljs-keyword">var</span> out,i,len;<span class="hljs-keyword">var</span> c1,c2,c3;len=str.length;i=<span class="hljs-number"></span>;out=<span class="hljs-string">""</span>;<span class="hljs-keyword">while</span>(i&lt;len){c1=str.charCodeAt(i++)&<span class="hljs-number">255</span>;<span class="hljs-keyword">if</span>(i==len){out+=base64EncodeChars.charAt(c1&gt;&gt;<span class="hljs-number">2</span>);out+=base64EncodeChars.charAt((c1&<span class="hljs-number">3</span>)&lt;&lt;<span class="hljs-number">4</span>);out+=<span class="hljs-string">"=="</span>;<span class="hljs-keyword">break</span>}c2=str.charCodeAt(i++);<span class="hljs-keyword">if</span>(i==len){out+=base64EncodeChars.charAt(c1&gt;&gt;<span class="hljs-number">2</span>);out+=base64EncodeChars.charAt(((c1&<span class="hljs-number">3</span>)&lt;&lt;<span class="hljs-number">4</span>)|((c2&<span class="hljs-number">240</span>)&gt;&gt;<span class="hljs-number">4</span>));out+=base64EncodeChars.charAt((c2&<span class="hljs-number">15</span>)&lt;&lt;<span class="hljs-number">2</span>);out+=<span class="hljs-string">"="</span>;<span class="hljs-keyword">break</span>}c3=str.charCodeAt(i++);out+=base64EncodeChars.charAt(c1&gt;&gt;<span class="hljs-number">2</span>);out+=base64EncodeChars.charAt(((c1&<span class="hljs-number">3</span>)&lt;&lt;<span class="hljs-number">4</span>)|((c2&<span class="hljs-number">240</span>)&gt;&gt;<span class="hljs-number">4</span>));out+=base64EncodeChars.charAt(((c2&<span class="hljs-number">15</span>)&lt;&lt;<span class="hljs-number">2</span>)|((c3&<span class="hljs-number">192</span>)&gt;&gt;<span class="hljs-number">6</span>));out+=base64EncodeChars.charAt(c3&<span class="hljs-number">63</span>)}<span class="hljs-keyword">return</span> out}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base64decode</span>(<span class="hljs-params">str</span>)</span>{<span class="hljs-keyword">var</span> c1,c2,c3,c4;<span class="hljs-keyword">var</span> i,len,out;len=str.length;i=<span class="hljs-number"></span>;out=<span class="hljs-string">""</span>;<span class="hljs-keyword">while</span>(i&lt;len){<span class="hljs-keyword">do</span>{c1=base64DecodeChars[str.charCodeAt(i++)&<span class="hljs-number">255</span>]}<span class="hljs-keyword">while</span>(i&lt;len&&c1==<span class="hljs-number">-1</span>);<span class="hljs-keyword">if</span>(c1==<span class="hljs-number">-1</span>){<span class="hljs-keyword">break</span>}<span class="hljs-keyword">do</span>{c2=base64DecodeChars[str.charCodeAt(i++)&<span class="hljs-number">255</span>]}<span class="hljs-keyword">while</span>(i&lt;len&&c2==<span class="hljs-number">-1</span>);<span class="hljs-keyword">if</span>(c2==<span class="hljs-number">-1</span>){<span class="hljs-keyword">break</span>}out+=<span class="hljs-built_in">String</span>.fromCharCode((c1&lt;&lt;<span class="hljs-number">2</span>)|((c2&<span class="hljs-number">48</span>)&gt;&gt;<span class="hljs-number">4</span>));<span class="hljs-keyword">do</span>{c3=str.charCodeAt(i++)&<span class="hljs-number">255</span>;<span class="hljs-keyword">if</span>(c3==<span class="hljs-number">61</span>){<span class="hljs-keyword">return</span> out}c3=base64DecodeChars[c3]}<span class="hljs-keyword">while</span>(i&lt;len&&c3==<span class="hljs-number">-1</span>);<span class="hljs-keyword">if</span>(c3==<span class="hljs-number">-1</span>){<span class="hljs-keyword">break</span>}out+=<span class="hljs-built_in">String</span>.fromCharCode(((c2&<span class="hljs-number">15</span>)&lt;&lt;<span class="hljs-number">4</span>)|((c3&<span class="hljs-number">60</span>)&gt;&gt;<span class="hljs-number">2</span>));<span class="hljs-keyword">do</span>{c4=str.charCodeAt(i++)&<span class="hljs-number">255</span>;<span class="hljs-keyword">if</span>(c4==<span class="hljs-number">61</span>){<span class="hljs-keyword">return</span> out}c4=base64DecodeChars[c4]}<span class="hljs-keyword">while</span>(i&lt;len&&c4==<span class="hljs-number">-1</span>);<span class="hljs-keyword">if</span>(c4==<span class="hljs-number">-1</span>){<span class="hljs-keyword">break</span>}out+=<span class="hljs-built_in">String</span>.fromCharCode(((c3&<span class="hljs-number">3</span>)&lt;&lt;<span class="hljs-number">6</span>)|c4)}<span class="hljs-keyword">return</span> out}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf16to8</span>(<span class="hljs-params">str</span>)</span>{<span class="hljs-keyword">var</span> out,i,len,c;out=<span class="hljs-string">""</span>;len=str.length;<span class="hljs-keyword">for</span>(i=<span class="hljs-number"></span>;i&lt;len;i++){c=str.charCodeAt(i);<span class="hljs-keyword">if</span>((c&gt;=<span class="hljs-number">1</span>)&&(c&lt;=<span class="hljs-number">127</span>)){out+=str.charAt(i)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(c&gt;<span class="hljs-number">2047</span>){out+=<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">224</span>|((c&gt;&gt;<span class="hljs-number">12</span>)&<span class="hljs-number">15</span>));out+=<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">128</span>|((c&gt;&gt;<span class="hljs-number">6</span>)&<span class="hljs-number">63</span>));out+=<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">128</span>|((c&gt;&gt;<span class="hljs-number"></span>)&<span class="hljs-number">63</span>))}<span class="hljs-keyword">else</span>{out+=<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">192</span>|((c&gt;&gt;<span class="hljs-number">6</span>)&<span class="hljs-number">31</span>));out+=<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">128</span>|((c&gt;&gt;<span class="hljs-number"></span>)&<span class="hljs-number">63</span>))}}}<span class="hljs-keyword">return</span> out}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8to16</span>(<span class="hljs-params">str</span>)</span>{<span class="hljs-keyword">var</span> out,i,len,c;<span class="hljs-keyword">var</span> char2,char3;out=<span class="hljs-string">""</span>;len=str.length;i=<span class="hljs-number"></span>;<span class="hljs-keyword">while</span>(i&lt;len){c=str.charCodeAt(i++);<span class="hljs-keyword">switch</span>(c&gt;&gt;<span class="hljs-number">4</span>){<span class="hljs-keyword">case</span> <span class="hljs-number"></span>:<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:out+=str.charAt(i<span class="hljs-number">-1</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">12</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">13</span>:char2=str.charCodeAt(i++);out+=<span class="hljs-built_in">String</span>.fromCharCode(((c&<span class="hljs-number">31</span>)&lt;&lt;<span class="hljs-number">6</span>)|(char2&<span class="hljs-number">63</span>));<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">14</span>:char2=str.charCodeAt(i++);char3=str.charCodeAt(i++);out+=<span class="hljs-built_in">String</span>.fromCharCode(((c&<span class="hljs-number">15</span>)&lt;&lt;<span class="hljs-number">12</span>)|((char2&<span class="hljs-number">63</span>)&lt;&lt;<span class="hljs-number">6</span>)|((char3&<span class="hljs-number">63</span>)&lt;&lt;<span class="hljs-number"></span>));<span class="hljs-keyword">break</span>}}<span class="hljs-keyword">return</span> out}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doit</span>()</span>{<span class="hljs-keyword">var</span> f=<span class="hljs-built_in">document</span>.f;f.output.value=base64encode(utf16to8(f.source.value));f.decode.value=utf8to16(base64decode(f.output.value))};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetQueryString</span>(<span class="hljs-params">name</span>)
</span>{
     <span class="hljs-keyword">var</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"(^|&)"</span>+ name +<span class="hljs-string">"=(.*)$"</span>);
     <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">window</span>.location.search.substr(<span class="hljs-number">1</span>).match(reg);
     <span class="hljs-keyword">if</span>(r!=<span class="hljs-literal">null</span>) { 
         <span class="hljs-keyword">return</span>  <span class="hljs-built_in">unescape</span>(r[<span class="hljs-number">2</span>]);
     } <span class="hljs-keyword">else</span> {
         <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.location.pathname.replace(<span class="hljs-string">"/goto/"</span>,<span class="hljs-string">""</span>); <span class="hljs-comment">//注意代码中的/goto/和跳转地址/goto/保持一致，请记得自行修改！</span>
     }
}
jump_url = GetQueryString(<span class="hljs-string">"url"</span>);
<span class="hljs-comment">// 若传入的是base加密数据，则进行解密处理</span>
<span class="hljs-keyword">if</span>( jump_url == base64encode(base64decode(jump_url))) {
    jump_url = base64decode(jump_url);
}
<span class="hljs-comment">// 自定义一些特殊字符串的跳转，请根据实际需求自行发挥，比如：</span>
<span class="hljs-comment">// 访问 "/goto/baidu" 会跳转到百度首页：</span>
<span class="hljs-keyword">if</span>(jump_url==<span class="hljs-string">"baidu"</span>) {
   jump_url=<span class="hljs-string">"https://www.baidu.com/"</span>;
}
<span class="hljs-comment">// 访问 "/goto/cf" 会跳转到cloudflare首页：</span>
<span class="hljs-keyword">if</span>(jump_url==<span class="hljs-string">"cf"</span>) {
   jump_url=<span class="hljs-string">"https://www.cloudflare.com/"</span>;
}
<span class="hljs-comment">// 网址校验</span>
<span class="hljs-keyword">var</span> UrlReg = <span class="hljs-string">"^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)"</span>;
<span class="hljs-keyword">if</span>(jump_url == <span class="hljs-literal">null</span> || jump_url.toString().length&lt;<span class="hljs-number">1</span> || !jump_url.match(UrlReg)) {
    <span class="hljs-built_in">document</span>.title = <span class="hljs-string">"参数错误，正在返回首页..."</span>;
    jump_url = location.origin;
}
<span class="hljs-comment">// 延时执行跳转</span>
setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">link_jump</span>()
</span>{   
<span class="hljs-comment">// 防止盗用，但是微信等客户端无法取得referrer，因此这里允许了referrer为空的访问，请自行修改zhang.ge为自己的域名</span>
  <span class="hljs-keyword">var</span> MyHOST = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"ewader\.com"</span>);
  <span class="hljs-keyword">if</span> (!MyHOST.test(<span class="hljs-built_in">document</span>.referrer) && <span class="hljs-built_in">document</span>.referrer.length ) {
      alert(<span class="hljs-string">"请不要盗用本站跳转页面！"</span>);
      location.href = <span class="hljs-string">"https://tunan.org/"</span>;
      <span class="hljs-keyword">return</span>;
  }
  location.href = jump_url;
},<span class="hljs-number">1000</span>);
setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>()</span>{<span class="hljs-built_in">window</span>.opener=<span class="hljs-literal">null</span>;<span class="hljs-built_in">window</span>.close();}, <span class="hljs-number">50000</span>);
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>页面加载中，请稍候...<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span>&gt;</span>
a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{<span class="hljs-attribute">margin</span>:<span class="hljs-number"></span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number"></span>;<span class="hljs-attribute">border</span>:<span class="hljs-number"></span>;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">font</span>:inherit;<span class="hljs-attribute">vertical-align</span>:baseline}body{<span class="hljs-attribute">background</span>:<span class="hljs-number">#3498db</span>}#loader-container{<span class="hljs-attribute">width</span>:<span class="hljs-number">188px</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">188px</span>;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number"></span> auto;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">margin-right</span>:-<span class="hljs-number">50%</span>;<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">translate</span>(-50%,-50%);<span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#3498db</span>;<span class="hljs-attribute">border-radius</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">-webkit-animation</span>:borderScale <span class="hljs-number">1s</span> infinite ease-in-out;<span class="hljs-attribute">animation</span>:borderScale <span class="hljs-number">1s</span> infinite ease-in-out}#loadingText{<span class="hljs-attribute">font-family</span>:<span class="hljs-string">"Microsoft YaHei"</span>,Helvetica,Arial,Lucida Grande,Tahoma,sans-serif,Raleway,sans-serif;<span class="hljs-attribute">font-size</span>:<span class="hljs-number">1.4em</span>;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">margin-right</span>:-<span class="hljs-number">50%</span>;<span class="hljs-attribute">transform</span>:<span class="hljs-built_in">translate</span>(-50%,-50%)}@-<span class="hljs-keyword">webkit</span>-<span class="hljs-keyword">keyframes</span> borderScale{0%{<span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#fff</span>}50%{<span class="hljs-attribute">border</span>:<span class="hljs-number">25px</span> solid <span class="hljs-number">#3498db</span>}100%{<span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#fff</span>}}@<span class="hljs-keyword">keyframes</span> borderScale{0%{<span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#fff</span>}50%{<span class="hljs-attribute">border</span>:<span class="hljs-number">25px</span> solid <span class="hljs-number">#3498db</span>}100%{<span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid <span class="hljs-number">#fff</span>}}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"loader-container"</span>&gt;&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"loadingText"</span>&gt;</span>页面加载中...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>`
//console.log(html)
async function handleRequest(request) {
  const newResponse = new Response(html)
  newResponse.headers.set('Content-Type', 'text/html');
  return newResponse
}
</pre>
<ul>
<li><span style="background-color: rgb(255, 255, 255); color: rgb(101, 116, 135);">点击【routers】按钮切到路由编辑界面，点击【Add router】后如图添加路由：点击save</span><figure class="content-img-box" id="2247"></li>
</ul>
<p><img decoding="async" alt="利用cloudFlare的边缘计算workers实现外链转内链跳转" src="https://tunan.org/wp-content/uploads/2019/07/145ebbde81352c.jpg" id="6AC9949F" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>至此，已经大功告成，想看效果的可以点击上面的外链，值得说明的一点是，cloudFlare的边缘计算workers是收费服务，不过每天有免费10w的请求数量，对我们这个小博客来说，是非常非常的够用了。</p>
<p>如果，你也在使用<span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51);">cloudFlare，不妨也可以用用这个玩意，毕竟充分利用外部资源是我等小博主追求的目标哈。</span></p>
]]></content:encoded>
    </item>
    <item>
      <title>Godaddy可以用微信管理域名</title>
      <link>http://localhost:1313/2207.html</link>
      <pubDate>Wed, 26 Jun 2019 00:38:56 +0000</pubDate>
      <guid>http://localhost:1313/2207.html</guid>
      <description>&lt;p&gt;不得不说微信现在的影响力是越来越大了，就连当年蹭退出中国风的godaddy现在也开始使用微信来管理域名了，今天打开邮箱就收到了如下的邮件。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;用微信管理域名，接收通知并获取优惠。&lt;/strong&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>不得不说微信现在的影响力是越来越大了，就连当年蹭退出中国风的godaddy现在也开始使用微信来管理域名了，今天打开邮箱就收到了如下的邮件。</p>
<p><strong>用微信管理域名，接收通知并获取优惠。</strong></p>
<p> 立即扫码或微信搜索公众号“<a href="http://godaddy.com/" target="_blank" style="color: rgb(17, 85, 204);" rel="noopener noreferrer">godaddy.com</a>”关注我们，登录 GoDaddy 帐户在微信中使用各种管理功能，比以前更加方便。<figure class="content-img-box" id="2205"></p>
<p><img decoding="async" alt="Godaddy可以用微信管理域名" src="https://tunan.org/wp-content/uploads/2019/06/1e0d12b5604915.jpg" id="3A73A21B" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>我们持续不断提升GoDaddy 微信应用的功能，让您在移动端管理产品与服务时更加便捷。現在只要登录GoDaddy账号就可以：</p>
<p>##<img loading="lazy" decoding="async" src="https://ci4.googleusercontent.com/proxy/5ERG4etlIakNb3iB0f60qzL8J-aP-f3fY2et4wfxogc2RyB3i0qy0K2i3Kk26_c02a4DFOeeICfRo7yK4RLMqO5aKDtoZRc1Y-_CSFn7aTStBelYXFTb3xhNHam0iFxWpvjMBEevCFxlBxle7ptbpYefGkM-azBE8gs=s0-d-e1-ft#https://img1.wsimg.com/cdn/Image/Email/None/v1/en-US/ea4cf4b1-ecf5-4d0b-9614-90a370b7c5da/dot-green.jpg" height="10" width="10" /> <strong>访问产品和工具，</strong></p>
<p> 您可以管理域名服务器、获取域名证书、或查询域名估值。</p>
<p>##<img loading="lazy" decoding="async" src="https://ci4.googleusercontent.com/proxy/5ERG4etlIakNb3iB0f60qzL8J-aP-f3fY2et4wfxogc2RyB3i0qy0K2i3Kk26_c02a4DFOeeICfRo7yK4RLMqO5aKDtoZRc1Y-_CSFn7aTStBelYXFTb3xhNHam0iFxWpvjMBEevCFxlBxle7ptbpYefGkM-azBE8gs=s0-d-e1-ft#https://img1.wsimg.com/cdn/Image/Email/None/v1/en-US/ea4cf4b1-ecf5-4d0b-9614-90a370b7c5da/dot-green.jpg" height="10" width="10" /> <strong>随时了解</strong> </p>
<p>订单状况并及时收到关于产品、订单、续费和优惠信息等重要通知。</p>
<p><img loading="lazy" decoding="async" src="https://ci4.googleusercontent.com/proxy/5ERG4etlIakNb3iB0f60qzL8J-aP-f3fY2et4wfxogc2RyB3i0qy0K2i3Kk26_c02a4DFOeeICfRo7yK4RLMqO5aKDtoZRc1Y-_CSFn7aTStBelYXFTb3xhNHam0iFxWpvjMBEevCFxlBxle7ptbpYefGkM-azBE8gs=s0-d-e1-ft#https://img1.wsimg.com/cdn/Image/Email/None/v1/en-US/ea4cf4b1-ecf5-4d0b-9614-90a370b7c5da/dot-green.jpg" height="10" width="10" /> 如果您有任何问题，可通过公众号对话获取常见问题指引，或一<strong>键拨打客服专线</strong>。</p>
<p>##<img loading="lazy" decoding="async" src="https://ci4.googleusercontent.com/proxy/5ERG4etlIakNb3iB0f60qzL8J-aP-f3fY2et4wfxogc2RyB3i0qy0K2i3Kk26_c02a4DFOeeICfRo7yK4RLMqO5aKDtoZRc1Y-_CSFn7aTStBelYXFTb3xhNHam0iFxWpvjMBEevCFxlBxle7ptbpYefGkM-azBE8gs=s0-d-e1-ft#https://img1.wsimg.com/cdn/Image/Email/None/v1/en-US/ea4cf4b1-ecf5-4d0b-9614-90a370b7c5da/dot-green.jpg" height="10" width="10" /> <strong>使用 SSO。</strong></p>
<p>使用您的微信号登录 GoDaddy，享受简化的单一登录体验。</p>
<p>GoDaddy 微信公众号为您提供便捷的服务，立即扫码关注我们吧！</p>
<p>扫码关注了一下，后可以和自己的godaddy账户绑定，绑定后的体验还是不错的。可能是为了迎合国内备案的需求，比godaddy官网还多出了<strong>域名证书下载</strong>和<strong>cn域名实名认证</strong>的功能。如下图，实际体验还是不错的，还有域名在godaddy上的童鞋们，不妨关注一下，毕竟比登录官网管理域名方便多了。<figure class="content-img-box" id="2206"></p>
<p><img decoding="async" alt="Godaddy可以用微信管理域名" src="https://tunan.org/wp-content/uploads/2019/06/1e23be1f515d55.jpg" id="1F5955FA" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
]]></content:encoded>
    </item>
    <item>
      <title>wordpress自动升级到5.2.2</title>
      <link>http://localhost:1313/1787.html</link>
      <pubDate>Wed, 19 Jun 2019 02:15:39 +0000</pubDate>
      <guid>http://localhost:1313/1787.html</guid>
      <description>&lt;p&gt;今天打开邮箱，发现系统发的邮件。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span style=&#34;color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);&#34;&gt;嗨！您位于 &lt;/span&gt;&lt;a href=&#34;https://tunan.org/&#34; target=&#34;_blank&#34; style=&#34;color: rgb(24, 43, 74); background-color: rgb(255, 255, 255);&#34; rel=&#34;noopener noreferrer&#34;&gt;&lt;a href=&#34;https://tunan.org&#34;&gt;https://tunan.org&lt;/a&gt;&lt;/a&gt;&lt;span style=&#34;color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);&#34;&gt; 的站点已被成功升级到WordPress 5.2.2。 您不需要再做什么。 要获取更多关于5.2.2版本的信息，请参阅“关于WordPress”屏幕： &lt;/span&gt;&lt;a href=&#34;https://tunan.org/wp-admin/about.php&#34; target=&#34;_blank&#34; style=&#34;color: rgb(24, 43, 74); background-color: rgb(255, 255, 255);&#34; rel=&#34;noopener noreferrer&#34;&gt;&lt;a href=&#34;https://tunan.org/wp-admin/about.php&#34;&gt;https://tunan.org/wp-admin/about.php&lt;/a&gt;&lt;/a&gt;&lt;span style=&#34;color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);&#34;&gt; 如果您遇到了任何问题或需要帮助，WordPress.org支持论坛的志愿者或许能帮到您。 &lt;/span&gt;&lt;a href=&#34;http://zh-cn.forums.wordpress.org/&#34; target=&#34;_blank&#34; style=&#34;color: rgb(24, 43, 74); background-color: rgb(255, 255, 255);&#34; rel=&#34;noopener noreferrer&#34;&gt;&lt;a href=&#34;http://zh-cn.forums.wordpress.org/&#34;&gt;http://zh-cn.forums.wordpress.org/&lt;/a&gt;&lt;/a&gt;&lt;span style=&#34;color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);&#34;&gt; WordPress小组&lt;/span&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>今天打开邮箱，发现系统发的邮件。</p>
<blockquote>
<p><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">嗨！您位于 </span><a href="https://tunan.org/" target="_blank" style="color: rgb(24, 43, 74); background-color: rgb(255, 255, 255);" rel="noopener noreferrer"><a href="https://tunan.org">https://tunan.org</a></a><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"> 的站点已被成功升级到WordPress 5.2.2。 您不需要再做什么。 要获取更多关于5.2.2版本的信息，请参阅“关于WordPress”屏幕： </span><a href="https://tunan.org/wp-admin/about.php" target="_blank" style="color: rgb(24, 43, 74); background-color: rgb(255, 255, 255);" rel="noopener noreferrer"><a href="https://tunan.org/wp-admin/about.php">https://tunan.org/wp-admin/about.php</a></a><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"> 如果您遇到了任何问题或需要帮助，WordPress.org支持论坛的志愿者或许能帮到您。 </span><a href="http://zh-cn.forums.wordpress.org/" target="_blank" style="color: rgb(24, 43, 74); background-color: rgb(255, 255, 255);" rel="noopener noreferrer"><a href="http://zh-cn.forums.wordpress.org/">http://zh-cn.forums.wordpress.org/</a></a><span style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"> WordPress小组</span></p>
</blockquote>
<h2 id="维护和安全更新">维护和安全更新</h2>
<p>5.2.2版本修复了13个问题。 欲了解更多，参见发行注记。</p>
<p>确保网站安全＃45094：仪表板元素并不总是具有清晰的焦点状态，Tab键顺序</p>
<p>＃46289：RTL Bug – 媒体模式中的错误导航箭头</p>
<p>＃46749：Firefox中帮助部分底部显示额外边框（响应：778 * 841）</p>
<p>＃46881：站点健康：改进标题元素水平居中</p>
<p>＃46957：站点运行状况：使站点运行状况页面访问可以过滤</p>
<p>＃46960：站点健康：小型设备（iphone 5 / SE）中的表设计问题。</p>
<p>＃46997：主题更新链接显示在Customizer中，但不起作用</p>
<p>＃47070：恢复模式退出按钮在响应视图中不可见</p>
<p>＃47158：合并WP 5.2中引入的类似字符串</p>
<p>＃47227：I18n：合并类似的翻译字符串 – 网站健康标签</p>
<p>＃47475：I18n：合并相似的字符串并修复拼写错误</p>
<p>＃47429：编辑：更新WordPress 5.2.2的软件包</p>
<p>＃47457：修复mediaelements播放器控件栏大小调整</p>
<p>WordPress 5.2为您提供了更健壮的工具来识别和修复配置问题和致命错误。无论您是帮助客户的开发人员，还是独自管理站点，这些工具都可以在您需要时帮助您获得正确的信息。<figure class="content-img-box " id="1785"></p>
<p><img decoding="async" alt="wordpress自动升级到5.2.2" src="https://tunan.org/wp-content/uploads/2019/06/15ccad909cb76f.png" id="8FA67946" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<h2 id="网站健康检查">网站健康检查</h2>
<p>基于5.1中引入的站点健康特性，该版本增加了两个新页面来帮助调试常见的配置问题。它还增加了空间，开发人员可以在其中包含站点维护人员的调试信息。检查站点状态，并学习如何调试问题。<figure class="content-img-box " id="1786"></p>
<p><img decoding="async" alt="wordpress自动升级到5.2.2" src="https://tunan.org/wp-content/uploads/2019/06/1aaa9545b190da.png" id="E92C4813" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<h2 id="php错误保护">PHP错误保护</h2>
<p>这个以管理员为中心的更新将允许您安全地修复或管理致命错误，而不需要开发人员花费时间。它具有更好地处理所谓的“死亡白屏幕”，以及进入恢复模式的方法，该模式暂停导致错误的插件或主题。<figure class="content-img-box " id=""></p>
<p><img decoding="async" alt="wordpress自动升级到5.2.2" src="https://tunan.org/wp-content/uploads/2019/06/16db5a09fbe930.png" id="ACAFABC4" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
]]></content:encoded>
    </item>
    <item>
      <title>xshell6更新至0125</title>
      <link>http://localhost:1313/1712.html</link>
      <pubDate>Sat, 15 Jun 2019 07:35:45 +0000</pubDate>
      <guid>http://localhost:1313/1712.html</guid>
      <description>&lt;p&gt;xshell这个货更新额速度真快，隔不了几天就发布一个新版本，这不，跋涉者刚打开邮箱，就看到又有更新了。&lt;/p&gt;
&lt;p&gt;&lt;strong style=&#34;color: rgb(31, 73, 125);&#34;&gt;Software Release Notes&lt;/strong&gt;&lt;span style=&#34;color: rgb(31, 73, 125);&#34;&gt; &lt;/span&gt; &lt;/p&gt;
&lt;p&gt;Release Date: June 05, 2019&lt;/p&gt;
&lt;p&gt;With last week’s update, we’ve introduced Experimental Features into our software. Experimental Features allow you to test and provide feedback on features that have not officially been implemented. &lt;a href=&#34;http://sendy.netsarang.com/sendy/l/XMxIa0aV2mhqm8xhxpYA2Q/kWhzb9PxreYlCH892gA3n82A/pTxjqwVQeGaDPLuiZOnlfA&#34; target=&#34;_blank&#34; style=&#34;color: rgb(24, 43, 74);&#34; rel=&#34;noopener noreferrer&#34;&gt;Read more about Experimental Features and how to opt in here.&lt;/a&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>xshell这个货更新额速度真快，隔不了几天就发布一个新版本，这不，跋涉者刚打开邮箱，就看到又有更新了。</p>
<p><strong style="color: rgb(31, 73, 125);">Software Release Notes</strong><span style="color: rgb(31, 73, 125);"> </span> </p>
<p>Release Date: June 05, 2019</p>
<p>With last week’s update, we’ve introduced Experimental Features into our software. Experimental Features allow you to test and provide feedback on features that have not officially been implemented. <a href="http://sendy.netsarang.com/sendy/l/XMxIa0aV2mhqm8xhxpYA2Q/kWhzb9PxreYlCH892gA3n82A/pTxjqwVQeGaDPLuiZOnlfA" target="_blank" style="color: rgb(24, 43, 74);" rel="noopener noreferrer">Read more about Experimental Features and how to opt in here.</a></p>
<p>If you haven’t already, make sure to update your clients. Your clients should have already prompted you for an update. If not, you can manually check for updates through the Help menu. Release notes are as follows:</p>
<p><strong>Xshell 6 </strong>(Build 0125)</p>
<ul>
<li>ADD: Ability to use XFTP as the protocol for drag/dropping of files.</li>
<li>ADD: Experimental Features</li>
<li><a href="http://sendy.netsarang.com/sendy/l/XMxIa0aV2mhqm8xhxpYA2Q/zg9qgAvcfaCQpy8dZMzYMw/pTxjqwVQeGaDPLuiZOnlfA" target="_blank" style="color: rgb(24, 43, 74);" rel="noopener noreferrer">ADD: OpenSSH CA Support (Experimental Feature)</a></li>
<li>ADD: Real Windows CMD Support (Experimental Feature)</li>
<li>ADD: Recent Sessions List (Experimental Feature)</li>
<li>ADD: Remote command of the SSH protocol</li>
<li>MOD: Improvements to the Local Shell’s ssh command’s parameter values (help ssh)</li>
<li>MOD: Removed character limit for Keyboard Interactive fields</li>
<li>MOD: Xshell checks for write permissions when changing data folder path</li>
<li>FIX: Added Ctrl+U(=Ctrl+Home) key values as kill signals</li>
<li>FIX: Highlights of regular expressions no applying to certain strings</li>
<li>FIX: Host name not recognized when connecting from the Local Shell</li>
<li>FIX: Quick commands are mistakenly shown in simple view mode</li>
<li>FIX: Reconnect feature not functioning after disconnecting from a SERIAL connection</li>
<li>FIX: The Tab Menu’s Show Status Icon option does not remain checked</li>
<li>FIX: The user key option (-i) is only applied when opening a new window</li>
<li>FIX: Unable to re-add forwarding rules that were once removed from the Tunneling Pane </li>
</ul>
<p>For a complete Xshell update history, check out our <a href="http://sendy.netsarang.com/sendy/l/XMxIa0aV2mhqm8xhxpYA2Q/A8j10Ljqz6u892BrcgUDsAuw/pTxjqwVQeGaDPLuiZOnlfA" target="_blank" style="color: rgb(24, 43, 74);" rel="noopener noreferrer">website</a>.</p>
<p>翻译了一下：</p>
<p>在上周的更新中，我们在软件中引入了一些实验性的特性。实验性特性允许您对尚未正式实现的特性进行测试并提供反馈。阅读更多关于实验功能和如何选择在这里。<br>
如果还没有，请确保更新您的客户端。您的客户应该已经提示您更新了。如果没有，您可以通过帮助菜单手动检查更新。发布说明如下:</p>
<p>Xshell 6(构建0125)</p>
<p>添加:能够使用XFTP作为拖放文件的协议。</p>
<p>添加:实验功能</p>
<p>添加:OpenSSH CA支持(实验特性)</p>
<p>添加:真正的Windows CMD支持(实验特性)</p>
<p>添加:最近的会话列表(实验特性)</p>
<p>添加:SSH协议的远程命令</p>
<p>MOD:改进本地Shell的ssh命令的参数值(帮助ssh)</p>
<p>MOD:删除键盘交互字段的字符限制</p>
<p>MOD: Xshell在更改数据文件夹路径时检查写权限</p>
<p>修正:添加Ctrl+U(=Ctrl+Home)键值作为终止信号</p>
<p>修正:正则表达式的高亮显示不适用于某些字符串</p>
<p>修复:从本地Shell连接时无法识别主机名</p>
<p>修正:快速命令错误地显示在简单视图模式</p>
<p>修复:从串行连接断开后重新连接功能不正常</p>
<p>修复:选项卡菜单的显示状态图标选项没有保持选中状态</p>
<p>修正:user key选项(-i)只在打开新窗口时应用</p>
<p>修复:无法重新添加从隧道窗格中删除的转发规则</p>
<p>要了解完整的Xshell更新历史，请访问我们的网站。</p>
]]></content:encoded>
    </item>
    <item>
      <title>7b2主题每日签到不刷新的解决办法</title>
      <link>http://localhost:1313/1710.html</link>
      <pubDate>Wed, 12 Jun 2019 02:04:14 +0000</pubDate>
      <guid>http://localhost:1313/1710.html</guid>
      <description>&lt;p&gt;前一段时间忽然发现跋涉者另外一个网站&lt;a href=&#34;https://www.yanjingweb.cn&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;镜缘轩&lt;/a&gt;上每日签到抽取积分的那个选项不能自动刷新了，每天都是显示同一样的数字，然后看明月登楼的一个网站，也是有这样的问题，咨询主题的作者之后，也没有能排查到问题，最后作者说反正新版就要出来了，不行到时候直接上新版吧。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>前一段时间忽然发现跋涉者另外一个网站<a href="https://www.yanjingweb.cn" target="_blank" rel="noopener noreferrer">镜缘轩</a>上每日签到抽取积分的那个选项不能自动刷新了，每天都是显示同一样的数字，然后看明月登楼的一个网站，也是有这样的问题，咨询主题的作者之后，也没有能排查到问题，最后作者说反正新版就要出来了，不行到时候直接上新版吧。</p>
<p>后来陆续发现，不但每日签到抽取积分有问题，另外还有<span style="color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">发布冒泡没有积分，发文章没有积分，别人回复收不到消息 海报不能下载、以及别人购买了文章等也没有通知等问题，这下就问题有点大了，签到那个还无所谓，后面出现的问题有点烦人。但是跋涉者这个网站是没有任何问题的。</span></p>
<p><span style="color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">当时想是不是因为空间配置、缓存等等的原因造成的，于是把网站弄到一个空间，还是一个有问题，一个没问题。适逢一个群里的朋友让测试评论邮件回复的问题，因为这个主题也没有评论邮件回复，于是咨询了一下，不想还引出诸多大佬们说我设置的问题，他们使用就很正常云云。其实这个问题根本不是跋涉者的问题，因为我询问过主题的作者，作者答复</span></p>
<blockquote>
<p><strong style="color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">不需要这个功能，如果用这个的话，用不了几天你的邮箱就被拉黑了</strong></p>
</blockquote>
<p>其实说我设置有问题的大佬们根本就没有测试，于是就想当然的认为默认评论是发邮件的，这个问题说实话跋涉者之前也没注意，是张波博客的博主发现我给他的回复没有收到邮件。这些都是题外话，貌似这段跑题了。</p>
<p>话转回到真正遇到的问题，跋涉者开始排除到底是怎么造成的，刚用这个主题的时候，一切功能都是正常的，后来比较了两个网站所用的插件发现，镜缘轩这个网站比跋涉者的网站多加了一个自动推送文章到百度百家号的插件，由于其他都是一样的，跋涉者就决定先把这个插件禁用看看是什么效果。</p>
<p>禁用后发了一个冒泡，然后财富了看了下，积分加上了，又用另一个小号发了一篇文章，积分有了，试着回复一下文章，通知出来了，今天早上，签到随机抽取积分的选项也出来了。</p>
<p>至此，终于确定了问题所出，那就是主题和自动推送文章到百家号的插件冲突造成的，把百家号插件禁用即可。如果你使用这个主题的时候也出现了类似的问题，不妨禁用一下除作者推荐的插件外的其他插件，一个一个的排除，相信问题也是可以解决的。</p>
<h2 id="ps上述的原因是错的现在真正的原因找到了">PS，上述的原因是错的，现在真正的原因找到了</h2>
<p>原来以为是和百家号有冲突造成的，后来发现禁用了百家号的推送后还是不行，然后就想自己对网站做了什么，最后想到没做什么，只不过是把cdn从又拍云换到了上海云顿，赶紧换回来，结果问题马上就解决了。</p>
<p>原来，不是插件的原因，上次禁用百家号的插件的时候刚巧从云盾换成又拍云。唉，最后的问题终于找到了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>推荐一款国外CDN——Nodecache，注册即送1T流量</title>
      <link>http://localhost:1313/1679.html</link>
      <pubDate>Mon, 03 Jun 2019 02:09:27 +0000</pubDate>
      <guid>http://localhost:1313/1679.html</guid>
      <description>&lt;p&gt;最新消息，只要邀请一个人，就能永久每月5G的流量，还是不错的&lt;/p&gt;
&lt;p&gt;国内没有备案的站长最头疼的无非是不能使用国内诸多的cdn加速以及隐藏真实IP地址，能用的也就国外的cloudflare,但是这个cdn服务商有不少ip被封了，没有被封的有时候抽风起来，速度又特别的慢，现在国外又新出了一款Nodecache的cdn，由于是新出的，加速的速度不错，本站目前就是用这个加速的，现在做活动，点击如下地址注册，即送1T的流量，如果非邀请注册，也就是自己注册的话，直送500G的流量。地址如下：&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>最新消息，只要邀请一个人，就能永久每月5G的流量，还是不错的</p>
<p>国内没有备案的站长最头疼的无非是不能使用国内诸多的cdn加速以及隐藏真实IP地址，能用的也就国外的cloudflare,但是这个cdn服务商有不少ip被封了，没有被封的有时候抽风起来，速度又特别的慢，现在国外又新出了一款Nodecache的cdn，由于是新出的，加速的速度不错，本站目前就是用这个加速的，现在做活动，点击如下地址注册，即送1T的流量，如果非邀请注册，也就是自己注册的话，直送500G的流量。地址如下：</p>
<p><a href="https://console-api.nodecache.com/f?aff=4BLOd3" target="_blank" rel="noopener noreferrer">Nodecache注册</a></p>
<p>注册后进入后台，慢慢的熟悉感，这个cdn的界面和又拍云的非常的相似<figure id="1675" class="content-img-box "></p>
<p><img decoding="async" id="6344C3EB" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/06/1b6cbe8f415033.PNG" alt="推荐一款国外CDN——Nodecache，注册即送1T流量" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>我们可以点击CDN服务，按照表格的内容进行填写就可以了，和国内的需要审核不同，这个提交后直接生效<figure id="1676" class="content-img-box "></p>
<p><img decoding="async" id="76AF35DD" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/06/158cbf6385c940.PNG" alt="推荐一款国外CDN——Nodecache，注册即送1T流量" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>只需把系统分配给你的cname解析到你的域名即可。</p>
<p>至于流量用完后的价格，跋涉者看了一下，也不是很贵，对于小博客来说完全能承担得起。<figure id="1677" class="content-img-box "></p>
<p><img decoding="async" id="97853804" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/06/134f23c46ef058.PNG" alt="推荐一款国外CDN——Nodecache，注册即送1T流量" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>是不是心动了，心动不如赶紧行动了，点击如下地址注册了即送1T的流量了。</p>
<p><a href="https://console-api.nodecache.com/f?aff=4BLOd3" target="_blank" rel="noopener noreferrer">Nodecache注册送1T流量</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>给7B2主题加上外链自动跳转功能</title>
      <link>http://localhost:1313/1656.html</link>
      <pubDate>Mon, 27 May 2019 07:08:40 +0000</pubDate>
      <guid>http://localhost:1313/1656.html</guid>
      <description>&lt;p&gt;7B2主题默认是没有外链自动跳转功能的，这玩意要说有用吧，作用不大，要说没用吧，大家都这么加，所以跋涉者也给外链增加一个自动跳转。&lt;figure id=&#34;1655&#34; class=&#34;content-img-box &#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img decoding=&#34;async&#34; id=&#34;957DA32A&#34; class=&#34;po-img-big&#34; src=&#34;https://tunan.org/wp-content/uploads/2019/05/1978be5d8cc0fb.png&#34; alt=&#34;给7B2主题加上外链自动跳转功能&#34; /&gt; &lt;figcaption class=&#34;addDesn&#34;&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;是不是很漂亮的的，感谢&lt;a href=&#34;https://www.dujin.org&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;缙哥哥&lt;/a&gt;分享的源码&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>7B2主题默认是没有外链自动跳转功能的，这玩意要说有用吧，作用不大，要说没用吧，大家都这么加，所以跋涉者也给外链增加一个自动跳转。<figure id="1655" class="content-img-box "></p>
<p><img decoding="async" id="957DA32A" class="po-img-big" src="https://tunan.org/wp-content/uploads/2019/05/1978be5d8cc0fb.png" alt="给7B2主题加上外链自动跳转功能" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>是不是很漂亮的的，感谢<a href="https://www.dujin.org" target="_blank" rel="noopener noreferrer">缙哥哥</a>分享的源码</p>
<h2 id="第一步建立一个go跳转文件">第一步，建立一个go跳转文件</h2>
<p>把下面的代码保存成index.php,在网站的根目录里新建一个go文件夹，然后把这个index.php上传到这个文件夹里</p>
<pre class="prettyprint"><span class="pun">&lt;?</span><span class="pln">php
</span><span class="com">/**
* WordPress外链go跳转页面 - https://www.dujin.org/12762.html
* @copyright (c) Emlog All Rights Reserved
*/</span>
<span class="com">//自定义跳转地址</span><span class="pln">
$cars </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span><span class="pln">
array</span><span class="pun">(</span><span class="str">"qcloud"</span><span class="pun">,</span><span class="str">'http://www.qcloud.com/redirect.php?redirect=1001&cps_key=8558139aea55e95d71f488081ba44577'</span><span class="pun">),</span><span class="pln">
array</span><span class="pun">(</span><span class="str">"upyun"</span><span class="pun">,</span><span class="str">'https://www.upyun.com/league'</span><span class="pun">),</span><span class="pln">
array</span><span class="pun">(</span><span class="str">"trustutn"</span><span class="pun">,</span><span class="str">'http://c.trustutn.org/s/aeink.com'</span><span class="pun">),</span><span class="pln">
array</span><span class="pun">(</span><span class="str">"gfvps"</span><span class="pun">,</span><span class="str">'https://www.gfvps.cn/page.aspx?c=referral&u=9023'</span><span class="pun">),</span><span class="pln">
array</span><span class="pun">(</span><span class="str">"360scan"</span><span class="pun">,</span><span class="str">'http://webscan.360.cn/index/checkwebsite/url/www.aeink.com'</span><span class="pun">)</span>
<span class="pun">);</span>

<span class="kwd">if</span><span class="pun">(</span><span class="pln">strlen</span><span class="pun">(</span><span class="pln">$_SERVER</span><span class="pun">[</span><span class="str">'REQUEST_URI'</span><span class="pun">])</span> <span class="pun">&gt;</span> <span class="lit">384</span> <span class="pun">||</span><span class="pln"> strpos</span><span class="pun">(</span><span class="pln">$_SERVER</span><span class="pun">[</span><span class="str">'REQUEST_URI'</span><span class="pun">],</span> <span class="str">"eval("</span><span class="pun">)</span> <span class="pun">||</span><span class="pln"> strpos</span><span class="pun">(</span><span class="pln">$_SERVER</span><span class="pun">[</span><span class="str">'REQUEST_URI'</span><span class="pun">],</span> <span class="str">"base64"</span><span class="pun">))</span> <span class="pun">{</span>
<span class="lit">@header</span><span class="pun">(</span><span class="str">"HTTP/1.1 414 Request-URI Too Long"</span><span class="pun">);</span>
<span class="lit">@header</span><span class="pun">(</span><span class="str">"Status: 414 Request-URI Too Long"</span><span class="pun">);</span>
<span class="lit">@header</span><span class="pun">(</span><span class="str">"Connection: Close"</span><span class="pun">);</span>
<span class="lit">@exit</span><span class="pun">;</span>
<span class="pun">}</span>
<span class="com">//通过QUERY_STRING取得完整的传入数据，然后取得url=之后的所有值，兼容性更好</span><span class="pln">
$t_url </span><span class="pun">=</span><span class="pln"> htmlspecialchars</span><span class="pun">(</span><span class="pln">preg_replace</span><span class="pun">(</span><span class="str">'/^url=(.*)$/i'</span><span class="pun">,</span><span class="str">'$1'</span><span class="pun">,</span><span class="pln">$_SERVER</span><span class="pun">[</span><span class="str">"QUERY_STRING"</span><span class="pun">]));</span>

<span class="com">//此处可以自定义一些特别的外链，不需要可以删除以下5行</span>
<span class="kwd">foreach</span><span class="pun">(</span><span class="pln">$cars </span><span class="kwd">as</span><span class="pln"> $k</span><span class="pun">=&gt;</span><span class="pln">$val</span><span class="pun">){</span>
<span class="kwd">if</span><span class="pun">(</span><span class="pln">$t_url</span><span class="pun">==</span><span class="pln">$val</span><span class="pun">[</span><span class="lit"></span><span class="pun">]</span> <span class="pun">)</span> <span class="pun">{</span><span class="pln">
$t_url </span><span class="pun">=</span><span class="pln"> $val</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span><span class="pln">
$t_vip </span><span class="pun">=</span> <span class="lit">1</span><span class="pun">;</span>
<span class="pun">}</span>
<span class="pun">}</span>

<span class="com">//数据处理</span>
<span class="kwd">if</span><span class="pun">(!</span><span class="pln">empty</span><span class="pun">(</span><span class="pln">$t_url</span><span class="pun">))</span> <span class="pun">{</span>
<span class="com">//判断取值是否加密</span>
<span class="kwd">if</span> <span class="pun">(</span><span class="pln">$t_url </span><span class="pun">==</span><span class="pln"> base64_encode</span><span class="pun">(</span><span class="pln">base64_decode</span><span class="pun">(</span><span class="pln">$t_url</span><span class="pun">)))</span> <span class="pun">{</span><span class="pln">
$t_url </span><span class="pun">=</span><span class="pln"> base64_decode</span><span class="pun">(</span><span class="pln">$t_url</span><span class="pun">);</span>
<span class="pun">}</span>
<span class="com">//对取值进行网址校验和判断</span><span class="pln">
preg_match</span><span class="pun">(</span><span class="str">'/^(http|https|thunder|qqdl|ed2k|Flashget|qbrowser):\/\//i'</span><span class="pun">,</span><span class="pln">$t_url</span><span class="pun">,</span><span class="pln">$matches</span><span class="pun">);</span>
<span class="kwd">if</span><span class="pun">(</span><span class="pln">$matches</span><span class="pun">){</span><span class="pln">
$url</span><span class="pun">=</span><span class="pln">$t_url</span><span class="pun">;</span><span class="pln">
$title</span><span class="pun">=</span><span class="str">'页面加载中,请稍候...'</span><span class="pun">;</span>
<span class="pun">}</span> <span class="kwd">else</span> <span class="pun">{</span><span class="pln">
preg_match</span><span class="pun">(</span><span class="str">'/\./i'</span><span class="pun">,</span><span class="pln">$t_url</span><span class="pun">,</span><span class="pln">$matche</span><span class="pun">);</span>
<span class="kwd">if</span><span class="pun">(</span><span class="pln">$matche</span><span class="pun">){</span><span class="pln">
$url</span><span class="pun">=</span><span class="str">'http://'</span><span class="pun">.</span><span class="pln">$t_url</span><span class="pun">;</span><span class="pln">
$title</span><span class="pun">=</span><span class="str">'页面加载中,请稍候...'</span><span class="pun">;</span>
<span class="pun">}</span> <span class="kwd">else</span> <span class="pun">{</span><span class="pln">
$url </span><span class="pun">=</span> <span class="str">'http://'</span><span class="pun">.</span><span class="pln">$_SERVER</span><span class="pun">[</span><span class="str">'HTTP_HOST'</span><span class="pun">];</span><span class="pln">
$title</span><span class="pun">=</span><span class="str">'参数错误，正在返回首页...'</span><span class="pun">;</span>
<span class="pun">}</span>
<span class="pun">}</span>
<span class="pun">}</span> <span class="kwd">else</span> <span class="pun">{</span><span class="pln">
$title </span><span class="pun">=</span> <span class="str">'参数缺失，正在返回首页...'</span><span class="pun">;</span><span class="pln">
$url </span><span class="pun">=</span> <span class="str">'http://'</span><span class="pun">.</span><span class="pln">$_SERVER</span><span class="pun">[</span><span class="str">'HTTP_HOST'</span><span class="pun">];</span>
<span class="pun">}</span>
<span class="pun">?&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="com">&lt;!--
@name:aeink goto
@description:AE博客跳转页面
@author:墨渊
@time:2017-09-22
@copyright:AE博客&墨渊
@author url:http://www.aeink.com/791.html
@ps:你想删我也拦不住看你自觉性吧！！
--&gt;</span>
<span class="tag">&lt;head&gt;</span>
<span class="tag">&lt;meta</span> <span class="atn">http-equiv</span><span class="pun">=</span><span class="atv">"Content-Type"</span> <span class="atn">content</span><span class="pun">=</span><span class="atv">"text/html; charset=UTF-8"</span><span class="tag">&gt;</span>
<span class="tag">&lt;meta</span> <span class="atn">name</span><span class="pun">=</span><span class="atv">"viewport"</span> <span class="atn">content</span><span class="pun">=</span><span class="atv">"width=device-width"</span><span class="tag">&gt;</span>
<span class="tag">&lt;meta</span> <span class="atn">name</span><span class="pun">=</span><span class="atv">"robots"</span> <span class="atn">content</span><span class="pun">=</span><span class="atv">"noindex, nofollow"</span> <span class="tag">/&gt;</span>
<span class="tag">&lt;noscript&gt;</span><span class="pln">&lt;meta http-equiv="refresh" content="1;url='</span><span class="pun">&lt;?</span><span class="pln">php echo $url</span><span class="pun">;?&gt;</span><span class="pln">';"&gt;</span><span class="tag">&lt;/noscript&gt;</span>
<span class="tag">&lt;meta</span> <span class="atn">charset</span><span class="pun">=</span><span class="atv">"UTF-8"</span><span class="tag">&gt;</span>
<span class="com">&lt;!--[if IE 8]&gt;
&lt;style&gt;
.ie8 .alert-circle,.ie8 .alert-footer{display:none}.ie8 .alert-box{padding-top:75px}.ie8 .alert-sec-text{top:45px}
&lt;/style&gt;
&lt;![endif]--&gt;</span>

<span class="tag">&lt;title&gt;</span><span class="pun">&lt;?</span><span class="pln">php echo $title</span><span class="pun">;?&gt;</span><span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;style&gt;</span><span class="pln">
body</span><span class="pun">{</span><span class="pln">margin</span><span class="pun">:</span><span class="lit"></span><span class="pun">;</span><span class="pln">padding</span><span class="pun">:</span><span class="lit"></span><span class="pun">;</span><span class="pln">background</span><span class="pun">:</span><span class="com">#E6EAEB;font-family:Arial,'微软雅黑','宋体',sans-serif}.main{position:absolute;left:calc(50% - 200px);top:calc(50% - 13em)}.alert-box{display:none;position:relative;margin:auto;padding:180px 85px 22px;border-radius:10px 10px 0 0;background:#FFF;box-shadow:5px 9px 17px rgba(102,102,102,.75);width:286px;color:#FFF;text-align:center}.alert-box p{margin:0}.alert-circle{position:absolute;top:-50px;left:111px}.alert-sec-circle{stroke-dashoffset:0;stroke-dasharray:735;transition:stroke-dashoffset 1s linear}.alert-sec-text{position:absolute;top:11px;left:190px;width:76px;color:#000;font-size:68px}.alert-sec-unit{font-size:34px}.alert-body{margin:35px 0}.alert-head{color:#242424;font-size:28px}.alert-concent{margin:25px 0 14px;color:#7B7B7B;font-size:18px}.alert-concent p{line-height:27px}.alert-btn{display:block;border-radius:10px;background-color:#4AB0F7;height:55px;line-height:55px;width:286px;color:#FFF;font-size:20px;text-decoration:none;letter-spacing:2px}.alert-btn:hover{background-color:#6BC2FF}.alert-footer{margin:0 auto;height:42px;width:120px}.alert-footer-icon{float:left}.alert-footer-text{float:left;border-left:2px solid #EEE;padding:3px 0 0 5px;height:40px;color:#0B85CC;font-size:12px;text-align:left}.alert-footer-text p{color:#7A7A7A;font-size:22px;line-height:18px}</span>
<span class="tag">&lt;/style&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"ie8"</span> <span class="atn">style</span><span class="pun">=</span><span class="atv">""</span><span class="tag">&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"main"</span><span class="tag">&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">"js-alert-box"</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-box"</span> <span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="pln">display</span><span class="pun">:</span><span class="pln">block</span><span class="atv">"</span><span class="tag">&gt;</span>
<span class="tag">&lt;svg</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-circle"</span> <span class="atn">width</span><span class="pun">=</span><span class="atv">"234"</span> <span class="atn">height</span><span class="pun">=</span><span class="atv">"234"</span><span class="tag">&gt;&lt;circle</span> <span class="atn">cx</span><span class="pun">=</span><span class="atv">"117"</span> <span class="atn">cy</span><span class="pun">=</span><span class="atv">"117"</span> <span class="atn">r</span><span class="pun">=</span><span class="atv">"108"</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"#FFF"</span> <span class="atn">stroke</span><span class="pun">=</span><span class="atv">"#43AEFA"</span> <span class="atn">stroke-width</span><span class="pun">=</span><span class="atv">"17"</span><span class="tag">&gt;&lt;/circle&gt;&lt;circle</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">"js-sec-circle"</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-sec-circle"</span> <span class="atn">cx</span><span class="pun">=</span><span class="atv">"117"</span> <span class="atn">cy</span><span class="pun">=</span><span class="atv">"117"</span> <span class="atn">r</span><span class="pun">=</span><span class="atv">"108"</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"transparent"</span> <span class="atn">stroke</span><span class="pun">=</span><span class="atv">"#F4F1F1"</span> <span class="atn">stroke-width</span><span class="pun">=</span><span class="atv">"18"</span> <span class="atn">transform</span><span class="pun">=</span><span class="atv">"rotate(-90 117 117)"</span> <span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="pln">stroke</span><span class="pun">-</span><span class="pln">dashoffset</span><span class="pun">:-</span><span class="lit">514px</span><span class="atv">"</span><span class="tag">&gt;&lt;/circle&gt;&lt;text</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-sec-unit"</span> <span class="atn">x</span><span class="pun">=</span><span class="atv">"100"</span> <span class="atn">y</span><span class="pun">=</span><span class="atv">"172"</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"#BDBDBD"</span><span class="tag">&gt;</span><span class="pln">秒</span><span class="tag">&lt;/text&gt;&lt;/svg&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">"js-sec-text"</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-sec-text"</span><span class="tag">&gt;</span><span class="pln">
3
</span><span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-body"</span><span class="tag">&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">"js-alert-head"</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-head"</span><span class="tag">&gt;</span>
<span class="pun">&lt;?</span><span class="pln">php echo $title</span><span class="pun">;?&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-concent"</span><span class="tag">&gt;</span>
<span class="tag">&lt;p&gt;</span><span class="pln">一万年太久，只争朝夕</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/div&gt;</span><span class="pln">
&lt;a id="js-alert-btn" class="alert-btn" href="</span><span class="pun">&lt;?</span><span class="pln">php echo $url</span><span class="pun">;?&gt;</span><span class="pln">"&gt;立即前往</span><span class="tag">&lt;/a&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-footer clearfix"</span><span class="tag">&gt;</span>
<span class="tag">&lt;svg</span> <span class="atn">width</span><span class="pun">=</span><span class="atv">"46px"</span> <span class="atn">height</span><span class="pun">=</span><span class="atv">"42px"</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-footer-icon"</span><span class="tag">&gt;&lt;circle</span> <span class="atn">fill-rule</span><span class="pun">=</span><span class="atv">"evenodd"</span> <span class="atn">clip-rule</span><span class="pun">=</span><span class="atv">"evenodd"</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"#7B7B7B"</span> <span class="atn">stroke</span><span class="pun">=</span><span class="atv">"#DEDFE0"</span> <span class="atn">stroke-width</span><span class="pun">=</span><span class="atv">"2"</span> <span class="atn">stroke-miterlimit</span><span class="pun">=</span><span class="atv">"10"</span> <span class="atn">cx</span><span class="pun">=</span><span class="atv">"21.917"</span> <span class="atn">cy</span><span class="pun">=</span><span class="atv">"21.25"</span> <span class="atn">r</span><span class="pun">=</span><span class="atv">"17"</span><span class="tag">&gt;&lt;/circle&gt;&lt;path</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"#FFF"</span> <span class="atn">d</span><span class="pun">=</span><span class="atv">"M22.907,27.83h-1.98l0.3-2.92c-0.37-0.22-0.61-0.63-0.61-1.1c0-0.71,0.58-1.29,1.3-1.29s1.3,0.58,1.3,1.29 c0,0.47-0.24,0.88-0.61,1.1L22.907,27.83z M18.327,17.51c0-1.98,1.61-3.59,3.59-3.59s3.59,1.61,3.59,3.59v2.59h-7.18V17.51z M27.687,20.1v-2.59c0-3.18-2.59-5.76-5.77-5.76s-5.76,2.58-5.76,5.76v2.59h-1.24v10.65h14V20.1H27.687z"</span><span class="tag">&gt;&lt;/path&gt;&lt;circle</span> <span class="atn">fill-rule</span><span class="pun">=</span><span class="atv">"evenodd"</span> <span class="atn">clip-rule</span><span class="pun">=</span><span class="atv">"evenodd"</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"#FEFEFE"</span> <span class="atn">cx</span><span class="pun">=</span><span class="atv">"35.417"</span> <span class="atn">cy</span><span class="pun">=</span><span class="atv">"10.75"</span> <span class="atn">r</span><span class="pun">=</span><span class="atv">"6.5"</span><span class="tag">&gt;&lt;/circle&gt;&lt;polygon</span> <span class="atn">fill</span><span class="pun">=</span><span class="atv">"#7B7B7B"</span> <span class="atn">stroke</span><span class="pun">=</span><span class="atv">"#7B7B7B"</span> <span class="atn">stroke-linecap</span><span class="pun">=</span><span class="atv">"round"</span> <span class="atn">stroke-linejoin</span><span class="pun">=</span><span class="atv">"round"</span> <span class="atn">stroke-miterlimit</span><span class="pun">=</span><span class="atv">"10"</span> <span class="atn">points</span><span class="pun">=</span><span class="atv">"35.417,12.16 32.797,9.03 31.917,10.07 35.417,14.25 42.917,5.29 42.037,4.25 "</span><span class="tag">&gt;&lt;/polygon&gt;&lt;/svg&gt;</span>
<span class="tag">&lt;div</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">"alert-footer-text"</span><span class="tag">&gt;</span>
<span class="tag">&lt;p&gt;</span><span class="pln">secure</span><span class="tag">&lt;/p&gt;</span><span class="pln">安全加密
</span><span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;script</span> <span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="tag">&gt;</span>
<span class="kwd">function</span><span class="pln"> alertSet</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span> <span class="pun">{</span><span class="pln">
document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"js-alert-box"</span><span class="pun">).</span><span class="pln">style</span><span class="pun">.</span><span class="pln">display </span><span class="pun">=</span> <span class="str">"block"</span><span class="pun">,</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"js-alert-head"</span><span class="pun">).</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">;</span>
<span class="kwd">var</span><span class="pln"> t </span><span class="pun">=</span> <span class="lit">5</span><span class="pun">,</span><span class="pln">
n </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"js-sec-circle"</span><span class="pun">);</span><span class="pln">
document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"js-sec-text"</span><span class="pun">).</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">,</span><span class="pln"> setInterval</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span> <span class="pun">{</span>
<span class="com">//禁止其他网站调用此跳转</span>
<span class="com">//var MyHOST = new RegExp("&lt;?php echo $_SERVER['HTTP_HOST']; ?&gt;");</span>
<span class="com">//if (!MyHOST.test(document.referrer)) {</span>
<span class="com">// location.href="http://" + MyHOST;</span>
<span class="com">//}</span>
<span class="kwd">if</span> <span class="pun">(</span><span class="lit"></span> <span class="pun">==</span><span class="pln"> t</span><span class="pun">)</span><span class="pln"> location</span><span class="pun">.</span><span class="pln">href </span><span class="pun">=</span> <span class="str">"&lt;?php echo $url;?&gt;"</span><span class="pun">;</span>
<span class="kwd">else</span> <span class="pun">{</span><span class="pln">
t </span><span class="pun">-=</span> <span class="lit">1</span><span class="pun">,</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">"js-sec-text"</span><span class="pun">).</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">;</span>
<span class="kwd">var</span><span class="pln"> e </span><span class="pun">=</span> <span class="typ">Math</span><span class="pun">.</span><span class="pln">round</span><span class="pun">(</span><span class="pln">t </span><span class="pun">/</span> <span class="lit">5</span> <span class="pun">*</span> <span class="lit">735</span><span class="pun">);</span><span class="pln">
n</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">strokeDashoffset </span><span class="pun">=</span><span class="pln"> e </span><span class="pun">-</span> <span class="lit">735</span>
<span class="pun">}</span>
<span class="pun">},</span> <span class="lit">970</span><span class="pun">)</span>
<span class="pun">}</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;script&gt;</span><span class="pln">alertSet</span><span class="pun">(</span><span class="str">"&lt;?php echo $title;?&gt;"</span><span class="pun">);</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre>
<h2></h2>
<h2 id="第二步在functionsphp里添加如下代码">第二步，在functions.php里添加如下代码</h2>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-comment">/**
* WordPress外链新窗口打开并使用php页面go跳转
* https://www.dujin.org/12762.html
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">the_content_nofollow</span><span class="hljs-params">($content)</span></span>{
preg_match_all(<span class="hljs-string">'//'</span>,$content,$matches);
<span class="hljs-keyword">if</span>($matches){
<span class="hljs-keyword">foreach</span>($matches[<span class="hljs-number">2</span>] <span class="hljs-keyword">as</span> $val){
<span class="hljs-keyword">if</span>(strpos($val,<span class="hljs-string">'://'</span>)!==<span class="hljs-keyword">false</span> && strpos($val,home_url())===<span class="hljs-keyword">false</span> && !preg_match(<span class="hljs-string">'/\.(jpg|jepg|png|ico|bmp|gif|tiff)/i'</span>,$val)){
$content=str_replace(<span class="hljs-string">"href=\"$val\""</span>, <span class="hljs-string">"href=\""</span>.home_url().<span class="hljs-string">"/go/?url=$val\" "</span>,$content);
}
}
}
<span class="hljs-keyword">return</span> $content;
}
add_filter(<span class="hljs-string">'the_content'</span>,<span class="hljs-string">'the_content_nofollow'</span>,<span class="hljs-number">999</span>);
</pre>
<h2 id="第三步添加新窗口自动打开并添加nofollow属性">第三步，添加新窗口自动打开并添加nofollow属性</h2>
<p>现在打开文章里的链接是在原有窗口上打开的，我们一般要求是在新窗口打开，为了不让权重的流逝，我们还要加上nofollow标签，继续在functions.php添加如下代码：</p>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-comment">/**
 * WordPress外链自动新窗口打开并添加nofollow属性 - 方法二
 * https://www.dujin.org/12336.html
 */</span>
add_filter( <span class="hljs-string">'the_content'</span>, <span class="hljs-string">'cn_nf_url_parse'</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cn_nf_url_parse</span><span class="hljs-params">( $content )</span> </span>{
	$regexp = <span class="hljs-string">"]*href=(\"??)([^\" &gt;]*?)\\1[^&gt;]*&gt;"</span>;
	<span class="hljs-keyword">if</span>(preg_match_all(<span class="hljs-string">"/$regexp/siU"</span>, $content, $matches, PREG_SET_ORDER)) {
		<span class="hljs-keyword">if</span>( !<span class="hljs-keyword">empty</span>($matches) ) {
			$srcUrl = get_option(<span class="hljs-string">'siteurl'</span>);
			<span class="hljs-keyword">for</span> ($i=<span class="hljs-number"></span>; $i &lt; count($matches); $i++)
			{
				$tag = $matches[$i][<span class="hljs-number"></span>];
				$tag2 = $matches[$i][<span class="hljs-number"></span>];
				$url = $matches[$i][<span class="hljs-number"></span>];
				$noFollow = <span class="hljs-string">''</span>;
				$pattern = <span class="hljs-string">'/target\s*=\s*"\s*_blank\s*"/'</span>;
				preg_match($pattern, $tag2, $match, PREG_OFFSET_CAPTURE);
				<span class="hljs-keyword">if</span>( count($match) &lt; <span class="hljs-number">1</span> )
					$noFollow .= <span class="hljs-string">' target="_blank" '</span>;
				$pattern = <span class="hljs-string">'/rel\s*=\s*"\s*[n|d]ofollow\s*"/'</span>;
				preg_match($pattern, $tag2, $match, PREG_OFFSET_CAPTURE);
				<span class="hljs-keyword">if</span>( count($match) &lt; <span class="hljs-number">1</span> ) $noFollow .= <span class="hljs-string">' rel="nofollow" '</span>; $pos = strpos($url,$srcUrl); <span class="hljs-keyword">if</span> ($pos === <span class="hljs-keyword">false</span>) { $tag = rtrim ($tag,<span class="hljs-string">'&gt;'</span>);
					$tag .= $noFollow.<span class="hljs-string">'&gt;'</span>;
					$content = str_replace($tag2,$tag,$content);
				}
			}
		}
	}
	$content = str_replace(<span class="hljs-string">']]&gt;'</span>, <span class="hljs-string">']]&gt;'</span>, $content);
	<span class="hljs-keyword">return</span> $content;
}
</pre>
<p>至此，所有的工作都已经完成了，是不是很简单。</p>
<h2 class="ql-align-justify" id="参考资料"><strong>参考资料</strong></h2>
<p>缙哥哥博客-https://www.dujin.org/12762.html</p>
<p>缙哥哥博客-https://www.dujin.org/12336.html</p>
]]></content:encoded>
    </item>
    <item>
      <title>上海云盾CDN简要设置指南</title>
      <link>http://localhost:1313/1653.html</link>
      <pubDate>Sun, 26 May 2019 02:29:32 +0000</pubDate>
      <guid>http://localhost:1313/1653.html</guid>
      <description>&lt;p&gt;在免费cdn市场上，广大站长所使用的一般是又拍云cdn，360网站加速，上海云盾cdn以及腾讯云cdn，笔者以前也是使用的又拍云cdn,可能是和又拍云犯冲又或者是自己设置的不对，网站总出现这样那样的问题，后来把cdn转移到了上海云顿，网站之前的问题就没有再出现，于是就一直用了下去，当时觉得上海云盾的设置很简单，昨天，青山绿水博客的的博主小朋友问我上海云盾的设置小技巧，说实话真没有啥技巧，就把自己的一些设置弄出来，可能还有更多优化的地方，欢迎指正。&lt;figure class=&#34;content-img-box&#34; id=&#34;1648&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>在免费cdn市场上，广大站长所使用的一般是又拍云cdn，360网站加速，上海云盾cdn以及腾讯云cdn，笔者以前也是使用的又拍云cdn,可能是和又拍云犯冲又或者是自己设置的不对，网站总出现这样那样的问题，后来把cdn转移到了上海云顿，网站之前的问题就没有再出现，于是就一直用了下去，当时觉得上海云盾的设置很简单，昨天，青山绿水博客的的博主小朋友问我上海云盾的设置小技巧，说实话真没有啥技巧，就把自己的一些设置弄出来，可能还有更多优化的地方，欢迎指正。<figure class="content-img-box" id="1648"></p>
<p><img decoding="async" alt="上海云盾CDN简要设置指南" src="https://tunan.org/wp-content/uploads/2019/05/11cf5e35493e7e.PNG" id="FBD648EF" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>云盾的cdn登录后的界面，我们一般也就用到cdn功能，可以在性能优化里面设置。上海云盾每月送50g的流量，对于小博客来说是够用了，不过送的流量并没有显示出来，和官方人员也有过沟通，他说你用就行了，反正每月50g。<figure class="content-img-box" id="1649"></p>
<p><img decoding="async" alt="上海云盾CDN简要设置指南" src="https://tunan.org/wp-content/uploads/2019/05/11cef75ca30898.PNG" id="BFF97107" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>点击性能优化后，就进入了CDN设置的地方，首先要添加网站，添加后系统会给你一个cname地址，在你的域名解析的地方，把你的网站解析到这个地址上，添加后就要等云盾的审核了，一般情况下需要1-2小时的时间。<figure class="content-img-box" id="1650"></p>
<p><img decoding="async" alt="上海云盾CDN简要设置指南" src="https://tunan.org/wp-content/uploads/2019/05/182c019a5ea59f.PNG" id="0834B9EB" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<h2 id="回源配置">回源配置</h2>
<p>域名审核通过后，域名后面的控制台，就进入了cdn的设置项，设置项很简单，有三个方面，第一个方面是回源配置，在这里你需要设置你的http协议，回源的地址以及端口，http的话是80端口，https的话一般是443端口。<figure class="content-img-box" id="1651"></p>
<p><img decoding="async" alt="上海云盾CDN简要设置指南" src="https://tunan.org/wp-content/uploads/2019/05/19ed8ef85cfce4.PNG" id="80815A65" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<h2 id="性能优化">性能优化</h2>
<p>这里是设置缓存的地方，根据自己网站的情况具体设置即可，镜缘轩这个网站的设置情况如上图，笔者把js和css以及图片视频等都设置的缓存15天，其他目录设置的是半小时。可以根据自己的实际情况来设置。</p>
<p>另外这里还有一个是不缓存的设置，一般把你网站的后台目录设置成不缓存即可。<figure class="content-img-box" id="1652"></p>
<p><img decoding="async" alt="上海云盾CDN简要设置指南" src="https://tunan.org/wp-content/uploads/2019/05/1950d76b6fec97.PNG" id="8EB6FC76" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<h2 id="高级配置">高级配置</h2>
<p>这个配置项有搜索引擎优化，这里把你源站的ip地址输入里面即可，还有一些https的设置，值得说明的是上海云盾的ssl证书是在公共组件里上传和修改的。，高级配置本人就做了这两项，其他的都默认配置即可。</p>
]]></content:encoded>
    </item>
    <item>
      <title>7b2主题添加百度是否收录及禁止非管理员访问后台</title>
      <link>http://localhost:1313/1636.html</link>
      <pubDate>Sat, 25 May 2019 07:00:29 +0000</pubDate>
      <guid>http://localhost:1313/1636.html</guid>
      <description>&lt;p&gt;原来使用的是知更鸟的begin主题，和7b2的主题可以说是侧重点不同，不可否认的是7b2主题 在展示网页的方面和begin有一定的差距，比如begin里的一些小功能，其中百度是否收录就是其中的一项，让让人只管的文章用不要再次提交，不过要实现这个也不是一件很难的事情，之间在functions.php里添加一些代码就可以了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>原来使用的是知更鸟的begin主题，和7b2的主题可以说是侧重点不同，不可否认的是7b2主题 在展示网页的方面和begin有一定的差距，比如begin里的一些小功能，其中百度是否收录就是其中的一项，让让人只管的文章用不要再次提交，不过要实现这个也不是一件很难的事情，之间在functions.php里添加一些代码就可以了。</p>
<h2 id="添加百度是否收录的代码管理员可见">添加百度是否收录的代码（管理员可见）</h2>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-comment">/*
判断当前文章是否被百度收录，若没有被收录则可点击提交至百度，加速收录！(此插件在文章页面仅管理员可见) 
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d4v</span><span class="hljs-params">($url)</span></span>{
    $url=<span class="hljs-string">'http://www.baidu.com/s?wd='</span>.$url;
    $curl=curl_init();
    curl_setopt($curl,CURLOPT_URL,$url);
    curl_setopt($curl,CURLOPT_RETURNTRANSFER,<span class="hljs-number">1</span>);
    $rs=curl_exec($curl);
    curl_close($curl);
    <span class="hljs-keyword">if</span>(!strpos($rs,<span class="hljs-string">'没有找到'</span>)){
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number"></span>;
    }
}
add_filter( <span class="hljs-string">'the_content'</span>,  <span class="hljs-string">'baidu_submit'</span> );
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baidu_submit</span><span class="hljs-params">( $content )</span> </span>{
    <span class="hljs-keyword">if</span>( is_single() && current_user_can( <span class="hljs-string">'manage_options'</span>) )
        <span class="hljs-keyword">if</span>(d4v(get_permalink()) == <span class="hljs-number">1</span>)
            $content=<span class="hljs-string">"
百度已收录(仅管理员可见)
"</span>.$content;
        <span class="hljs-keyword">else</span>
            $content=<span class="hljs-string">"
.get_permalink()."</span>&gt;百度未收录!点击此处提交(仅管理员可见)
<span class="hljs-string">".$content;
        return $content;
    }
</span></pre>
<p>第二就是7b2主题提供了强大的前台及用户中心功能，对于普通用户来说，没有必要让他们进入网站的后台。因此，我们可以添加一些代码来禁止普通的用户进入后台。</p>
<h2 id="禁止非管理员访问后台">禁止非管理员访问后台</h2>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-comment">/**
 * 禁止非管理员访问后台并限制访问后台登录注册
 * <span class="hljs-doctag">@package</span> bertly
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">redirect_non_admin_users</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">if</span> ( ! current_user_can( <span class="hljs-string">'manage_options'</span> ) && <span class="hljs-string">'/wp-admin/admin-ajax.php'</span> != $_SERVER[<span class="hljs-string">'PHP_SELF'</span>] ) {
		wp_redirect( home_url() );
		<span class="hljs-keyword">exit</span>;
	}
}
add_action( <span class="hljs-string">'admin_init'</span>, <span class="hljs-string">'redirect_non_admin_users'</span> );
add_action(<span class="hljs-string">'login_enqueue_scripts'</span>,<span class="hljs-string">'login_protection'</span>);
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login_protection</span><span class="hljs-params">()</span></span>{
        header(<span class="hljs-string">'Location: /'</span>);
    }
<span class="hljs-comment">/**
 * End
 */</span>
</pre>]]></content:encoded>
    </item>
    <item>
      <title>新浪SAE文件管理及防盗链的设置</title>
      <link>http://localhost:1313/1334.html</link>
      <pubDate>Wed, 07 Sep 2011 02:56:02 +0000</pubDate>
      <guid>http://localhost:1313/1334.html</guid>
      <description>&lt;p&gt;我们知道新浪SAE不管是流量也好，储存空间也好，占用CPU的时间也好都是要收费的，也就是要云豆豆的，因此相对其他流量不限制的空间来说，我们的豆豆可是比较珍贵的，如果被盗链，那么损失的是我们的豆豆，或者可能是我们的钞票，因此防盗链是必须的，可喜的是新浪SAE新版已经支持这个技术了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>我们知道新浪SAE不管是流量也好，储存空间也好，占用CPU的时间也好都是要收费的，也就是要云豆豆的，因此相对其他流量不限制的空间来说，我们的豆豆可是比较珍贵的，如果被盗链，那么损失的是我们的豆豆，或者可能是我们的钞票，因此防盗链是必须的，可喜的是新浪SAE新版已经支持这个技术了。</p>
<p>首先，登陆到你的SAE账户，然后点击你的应用，然后点服务管理中的<strong>Storage，出现如下的页面：</strong></p>
<p> </p>
<p> </p>
<p>选修改属性</p>
<p> </p>
<p>这里就可以设置你的防盗链了</p>
<p>至于文件的管理只需要点前面的“管理”就可以管理<strong>Storage理的文件了！</strong></p>
<p><a href="https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459.jpg"><img loading="lazy" decoding="async" width="900" height="900" src="https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459.jpg" alt="" class="aligncenter size-full wp-image-2631" srcset="https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459.jpg 900w, https://tunan.org/wp-content/uploads/2019/08/1824c863dd7459-768x768.jpg 768w" sizes="(max-width: 900px) 100vw, 900px" /></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>配置WP-Mail-SMTP的技巧</title>
      <link>http://localhost:1313/1331.html</link>
      <pubDate>Tue, 06 Sep 2011 11:08:45 +0000</pubDate>
      <guid>http://localhost:1313/1331.html</guid>
      <description>&lt;p&gt;网站搬到新浪SAE之后，由于不支持mail（）函数，所以只好采用WP-MAIL-SMTP这个插件来发送密码评论等，但是这个插件非常的不容易配置，明明都是按要求来填写的，最后的test的却往往是fals，所以，华彩根据配置N次的经验，把成功配置的步骤理一下！&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>网站搬到新浪SAE之后，由于不支持mail（）函数，所以只好采用WP-MAIL-SMTP这个插件来发送密码评论等，但是这个插件非常的不容易配置，明明都是按要求来填写的，最后的test的却往往是fals，所以，华彩根据配置N次的经验，把成功配置的步骤理一下！</p>
<p>引用网上的翻译</p>
<blockquote>
<p>From Email:</p>
</blockquote>
<blockquote>
<p>发送者的邮件地址,也就是对方收到邮件后看到的发件人地址。</p>
</blockquote>
<blockquote>
<p>From Name:</p>
</blockquote>
<blockquote>
<p>发件人姓名。</p>
</blockquote>
<blockquote>
<p>Mailer:</p>
</blockquote>
<blockquote>
<p>Send all WordPress emails via SMTP.</p>
</blockquote>
<blockquote>
<p>Use the PHP mail() function to send emails.</p>
</blockquote>
<blockquote>
<p>这里要注意一下,有的朋友的空间不支持mail()函数,通常是Windows环境的主机。如果不支持此函数,那么就选择上面的那个选项。</p>
</blockquote>
<blockquote>
<p>SMTP Options</p>
</blockquote>
<blockquote>
<p>SMTP服务器设置,也就是邮件发送服务器设置,如果设置错误就不会给留言的人发送邮件,当然,也不会把备份的数据文件发送到你的邮箱中。</p>
</blockquote>
<blockquote>
<p>SMTP Host:</p>
</blockquote>
<blockquote>
<p>QQ邮箱的是:SMTP.QQ.COM 谷歌的SMTP.GMAIL.COM 126邮箱是：SMTP.126.COM （大小写无所谓）sina的smtp.sina.cn或smtp.sina.com</p>
</blockquote>
<blockquote>
<p>SMTP Port:</p>
</blockquote>
<blockquote>
<p>QQ邮箱的是:25</p>
</blockquote>
<blockquote>
<p>谷歌的是587，126是25。sina的是25，QQ帮助里说端口号是465或587，试了没成功，不知道原因。</p>
</blockquote>
<blockquote>
<p>Encryption:</p>
</blockquote>
<blockquote>
<p>是否启用加密连接</p>
</blockquote>
<blockquote>
<p>No encryption.</p>
</blockquote>
<blockquote>
<p>无加密</p>
</blockquote>
<blockquote>
<p>Use SSL encryption.</p>
</blockquote>
<blockquote>
<p>采用SSL方式</p>
</blockquote>
<blockquote>
<p>Use TLS encryption. This is not the same as STARTTLS. For most servers SSL is the recommended option.</p>
</blockquote>
<blockquote>
<p>使用TLS方式.</p>
</blockquote>
<blockquote>
<p>polaris提醒您，此处是关键。一会儿详细讨论这点。</p>
</blockquote>
<blockquote>
<p>Authentication:</p>
</blockquote>
<blockquote>
<p>用户验证</p>
</blockquote>
<blockquote>
<p>No: Do not use SMTP authentication.</p>
</blockquote>
<blockquote>
<p>Yes: Use SMTP authentication.</p>
</blockquote>
<blockquote>
<p>如果你这里用的是免费邮箱,那么都是选择yes,如果不验证的话恐怕垃圾邮件就满天飞了吧.</p>
</blockquote>
<blockquote>
<p>下面的这两项，就是你的用户名和密码。</p>
</blockquote>
<blockquote>
<p>Username: 注意:这个用户名是全名，如我的：lghcx@sina.cn</p>
</blockquote>
<blockquote>
<p>Password: *<strong>*</strong>*</p>
</blockquote>
<blockquote>
<p>update option</p>
</blockquote>
<blockquote>
<p>全部填写后点此更新设置。</p>
</blockquote>
<blockquote>
<p>Send a Test Email</p>
</blockquote>
<blockquote>
<p>发送一个测试邮件</p>
</blockquote>
<blockquote>
<p>To: (这里填写邮件地址)</p>
</blockquote>
<p>现在点test，如果</p>
<blockquote>
<p>Test Message Sent</p>
</blockquote>
<blockquote>
<p>The result was:</p>
</blockquote>
<blockquote>
<p>bool(true)</p>
</blockquote>
<p>说明配置对了，否则就是错的咯，如果出错的话，按网上的教程设置一般都不行，可以在用户验证那里选中第二项，一般都可以成功，如果还不行的话，可以选择 Use SSL encryption.</p>
]]></content:encoded>
    </item>
    <item>
      <title>只需三步，让你的wordpress在godaddy免费空间上完美呈现</title>
      <link>http://localhost:1313/950.html</link>
      <pubDate>Thu, 28 Oct 2010 06:03:38 +0000</pubDate>
      <guid>http://localhost:1313/950.html</guid>
      <description>&lt;p&gt;以前本站有一篇文章，说是解决godaddy免费空间广告条对wordpress后台的影响，当时是采用第三方软件来实现的，但是到底有没有一种方法，能让不借用第三方软件来实现呢，答案是肯定的。而且很简单，只需要三步。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>以前本站有一篇文章，说是解决godaddy免费空间广告条对wordpress后台的影响，当时是采用第三方软件来实现的，但是到底有没有一种方法，能让不借用第三方软件来实现呢，答案是肯定的。而且很简单，只需要三步。</p>
<p><strong>1.隐藏前台页面广告</strong></p>
<p>打开主题文件中的“style.css”文件，在文件最后加上如下这段代码：</p>
<blockquote>
<p>#conash3D0 {height:0px; top:-1px;}</p>
</blockquote>
<p>原理：使用css样式把广告上移，移到显示页面以外，谁都看不到了，实际上并没有去掉广告代码，只是“隐藏”而已**，K号的可能性比较小，但是有一定的危险，到底用不用再你。**<figure class="content-img-box" id="2306"></p>
<p><img decoding="async" alt="只需三步，让你的wordpress在godaddy免费空间上完美呈现" src="https://tunan.org/wp-content/uploads/2019/07/1c5077b9935ed2.png" id="DC3A0631" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p><strong>2.恢复后台页面样式</strong></p>
<hr>
<p>godaddy的广告代码破坏了wordpress后台的css样式表及js，导致后台显示不正常，在wordpresswp-includesscript-loader.php中修改：</p></p>
<p>找到print_admin_styles()及_print_scripts()函数，</p>
<p>将print_admin_styles()中的</p>
<p>echo “n”;</p>
<p>更改为</p>
<p>$css = @file_get_contents($href);</p>
<p>echo “”;</p>
<p>将_print_scripts()中的</p>
<p>echo “n”;</p>
<p>替换为</p>
<p>$js = @file_get_contents($src);</p>
<p>echo “n”.substr($js,0,-184).”n”;</p>
<p>之前有一个加上不少代码的修改方法，在3.01版本无效，但是我这个方法绝对是有效果的。</p>
<p>3、搞掉后台广告</p></p>
<p>打开“wp-adminadmin- footer.php”文件，在末尾部分</p>
<blockquote>
</blockquote>
<p>的前面加上如下代码：</p>
<blockquote>
</div> <div id=&#8221;\_mcePaste&#8221;>function hideGoDaddy(){</div> <div id=&#8221;\_mcePaste&#8221;>if( ! ( null === document.getElementById( “conash3D0″ ) ) ) {</div> <div id=&#8221;\_mcePaste&#8221;>gDaddy = document.getElementById( “conash3D0″ );</div> <div id=&#8221;\_mcePaste&#8221;>if( ‘none’ === gDaddy.style.display ) {}</div> <div id=&#8221;\_mcePaste&#8221;>else { gDaddy.style.display = ‘none’; }</div> <div id=&#8221;\_mcePaste&#8221;>}</div> <div id=&#8221;\_mcePaste&#8221;>}</div> <div id=&#8221;\_mcePaste&#8221;>setInterval(“hideGoDaddy()”, 1500);</div> <div id=&#8221;_mcePaste&#8221;>
</blockquote>
<p>至此，修改完毕，一切都很完美！后台可以用 用户名：test 密码：test来测试。 关于采用第三方软件的方法，见 <a href="http://www.lghcx.info/2010/01/388.html" target="_blank" rel="noopener noreferrer">完美解决godaddy免费空间广告条对wordpress后台的影响 | 华彩生活</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>做博客比做网站难</title>
      <link>http://localhost:1313/851.html</link>
      <pubDate>Mon, 23 Aug 2010 04:14:49 +0000</pubDate>
      <guid>http://localhost:1313/851.html</guid>
      <description>&lt;p&gt;华彩亲子博客从建站到现在也有8个月了吧，发现做博客比做网站要难很多。&lt;br&gt;
首先，搜索引擎收录的慢，到现在百度收录的还大部分都是垃圾的东西，并没有形成有效的流量，Google倒是收录的挺快，而且目前的流量也大部分是从GOOGLE来的，但是毕竟在中国不是主流，做了8个月，IP每天突破不了100，是做这么长时间的网站从来没有遇到过的，以前随便做个网站，一个月内IP达到200多是很正常的，以前自己做的公文网，4个月IP都已经是3000了，和现在比起来真是不能同日而语啊。虽然这个博客不是为了流量而建立的。&lt;br&gt;
第二、关注度不够，可能是和自己的选的主题有关系，毕竟是为自己的女儿做的博客，孩子还是自己的好，所以别人不会怎么关注俺的小贝吧。&lt;br&gt;
第三，可能也是和免费空间有关系吧，无所谓了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>华彩亲子博客从建站到现在也有8个月了吧，发现做博客比做网站要难很多。<br>
首先，搜索引擎收录的慢，到现在百度收录的还大部分都是垃圾的东西，并没有形成有效的流量，Google倒是收录的挺快，而且目前的流量也大部分是从GOOGLE来的，但是毕竟在中国不是主流，做了8个月，IP每天突破不了100，是做这么长时间的网站从来没有遇到过的，以前随便做个网站，一个月内IP达到200多是很正常的，以前自己做的公文网，4个月IP都已经是3000了，和现在比起来真是不能同日而语啊。虽然这个博客不是为了流量而建立的。<br>
第二、关注度不够，可能是和自己的选的主题有关系，毕竟是为自己的女儿做的博客，孩子还是自己的好，所以别人不会怎么关注俺的小贝吧。<br>
第三，可能也是和免费空间有关系吧，无所谓了。</p>
]]></content:encoded>
    </item>
    <item>
      <title>网站又搬家了—这次选的衡天小张的服务器</title>
      <link>http://localhost:1313/845.html</link>
      <pubDate>Sun, 22 Aug 2010 09:50:38 +0000</pubDate>
      <guid>http://localhost:1313/845.html</guid>
      <description>&lt;p&gt;上次把博客放到了PIPNI的空间上，可惜的是速度较慢，而godaddy的windows空间使用起来又不太理想，刚好逛论坛的时候看到了衡天小张的信息，GOOGLE了一下，信誉各方面也不错，直接就去付款买了一个，价格很便宜。不过使用的结果可是一波三折！&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>上次把博客放到了PIPNI的空间上，可惜的是速度较慢，而godaddy的windows空间使用起来又不太理想，刚好逛论坛的时候看到了衡天小张的信息，GOOGLE了一下，信誉各方面也不错，直接就去付款买了一个，价格很便宜。不过使用的结果可是一波三折！</p>
<p>刚开始给分配的机房是“EGI机房“宋”服务器”，PINGl了一下，我的天那，500多，觉得小张的空间也不过如此，只不过是炒作的厉害罢了。联系小张和蓝冰，两个人都不在线。ftp传的那个慢啊，觉得真的是不值。<br>
下午的时候联系到了蓝冰，这姑娘不错，很热心。比一般的IDC的客服要强的不是半点，给调了一个机房，ping值210左右，而且还是和这个姑娘的博客同一个服务器。目前正在试用中，详细的报告等过几天在说！</p>]]></content:encoded>
    </item>
    <item>
      <title>换到pipni的空间了</title>
      <link>http://localhost:1313/804.html</link>
      <pubDate>Mon, 09 Aug 2010 09:02:49 +0000</pubDate>
      <guid>http://localhost:1313/804.html</guid>
      <description>&lt;h3 id=&#34;以前用的godaddy的空间是申请域名的时候送的不过可惜的是linux空间有个很大很大的广告广告业不怕但是却影响到页面的显示显而易见的是godaddy的本意就是不是让你好好用他这个空间否则谁还用收费的空间啊windows空间对wordpress的支持又很一般重要的是ping虽然是200多点但访问起来却不是很快&#34;&gt;         以前用的godaddy的空间，是申请域名的时候送的，不过可惜的是Linux空间有个很大很大的广告，广告业不怕，但是却影响到页面的显示，显而易见的是，godaddy的本意就是不是让你好好用他这个空间，否则谁还用收费的空间啊。windows空间对WordPress的支持又很一般，重要的是PING虽然是200多点，但访问起来却不是很快。&lt;/h3&gt;</description>
      <content:encoded><![CDATA[<h3 id="以前用的godaddy的空间是申请域名的时候送的不过可惜的是linux空间有个很大很大的广告广告业不怕但是却影响到页面的显示显而易见的是godaddy的本意就是不是让你好好用他这个空间否则谁还用收费的空间啊windows空间对wordpress的支持又很一般重要的是ping虽然是200多点但访问起来却不是很快">         以前用的godaddy的空间，是申请域名的时候送的，不过可惜的是Linux空间有个很大很大的广告，广告业不怕，但是却影响到页面的显示，显而易见的是，godaddy的本意就是不是让你好好用他这个空间，否则谁还用收费的空间啊。windows空间对WordPress的支持又很一般，重要的是PING虽然是200多点，但访问起来却不是很快。</h3>
<p>以前用过pipni的空间，除了稍慢一点的其他没有什么毛病，晚上花费了2个多小时的时间，把博客给搬到这个空间了，后来看下这个空间竟然也支持在线解压缩。白白浪费了2个小时的时间。<br>
现在看来速度还不错，另外也换两个皮肤，就用官方默认的吧，听好看的。</p>]]></content:encoded>
    </item>
    <item>
      <title>换了个模板</title>
      <link>http://localhost:1313/510.html</link>
      <pubDate>Wed, 27 Jan 2010 13:12:24 +0000</pubDate>
      <guid>http://localhost:1313/510.html</guid>
      <description>&lt;div id=&#34;PublishedByWebStory-[5]1_9E1BF9E071E245608EFF8B18147FA688_36C3D77B6EEF43E29413A9A14728CCBA_1&#34;&gt;
  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 上午把工作整完了以后照例去到网上寻觅，一直想要找到一个自己比较满意的模板，原来用的那个也是比较喜欢的，而且非常的清爽，但毕竟与我博客的主题不太相符。先前一直寻找baby的主题，但是一直都没有找到，今天偶尔想到是不是可以找找家庭方面的主题，别说，还真的找到了，就是目前我所用的这个。
&lt;/div&gt;</description>
      <content:encoded><![CDATA[<div id="PublishedByWebStory-[5]1_9E1BF9E071E245608EFF8B18147FA688_36C3D77B6EEF43E29413A9A14728CCBA_1">
  &nbsp;&nbsp;&nbsp;&nbsp; 上午把工作整完了以后照例去到网上寻觅，一直想要找到一个自己比较满意的模板，原来用的那个也是比较喜欢的，而且非常的清爽，但毕竟与我博客的主题不太相符。先前一直寻找baby的主题，但是一直都没有找到，今天偶尔想到是不是可以找找家庭方面的主题，别说，还真的找到了，就是目前我所用的这个。
</div>
<div id="PublishedByWebStory-[5]1_9E1BF9E071E245608EFF8B18147FA688_36C3D77B6EEF43E29413A9A14728CCBA">
  <p>
    &nbsp;&nbsp;&nbsp; 修改几个关键的地方，替换了原来的title，以及关键字及描述。模板里面有没有涉及，可能是觉得对seo没有什么帮助吧，其实还是有帮助的，有总聊胜与无。另外这个主题还是要慢慢的打造的，需要把图片换成自己的，可能不太容易换，谁让咱ps水平一般呢。<br /> &nbsp;&nbsp; 目前打算的修改方案是，第一增加广告位，但不会太多。毕竟用的这个空间已经有了一个大大的广告，采取的方案依然还是放在tag显示的地方，正文部分就把广告取消吧。侧边栏考虑增加一个广告。并加上产权的代码。第二，就是头部的图片了，换成自己的。第三，尾部的图片考虑换成喜洋洋或灰太狼的图片。第四，还没有想好！
  </p>
  <p>
    &nbsp;
  </p>
</div>]]></content:encoded>
    </item>
    <item>
      <title>小测三款博客离线编辑软件</title>
      <link>http://localhost:1313/500.html</link>
      <pubDate>Sun, 24 Jan 2010 13:50:01 +0000</pubDate>
      <guid>http://localhost:1313/500.html</guid>
      <description>&lt;p&gt;现在window下主要的离线博客主要有windows live write，zoundry raven以及国内一家公司开发的菊子曰。下面本人就对这三个软件做个点评。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>现在window下主要的离线博客主要有windows live write，zoundry raven以及国内一家公司开发的菊子曰。下面本人就对这三个软件做个点评。</p>
<p>之所以这么关系离线博客编辑软件是因为本人所用的空间是godaddy的免费空间，上面的那个大大的广告条让博客的后台有些功能无法使用，正好可以用这类离线编辑的软件来替代。首先让我们来说说windows live writer，因为我本机用的window 2003，而这个软件不支持在服务器系统上的安装，所以兼容性就比其他两个软件要差。另外live writer要安装.net所以安装下来要占用100多M的空间，虽然现在的空间动辄成T，但live writer的冗肿是无容置疑的，live writer支持分类、标签、离线模板，支持上传图片、并可以给图片加上特效和水印。加水印是window live writer的一个独特的地方，其他两个没有这样的功能。</p>
<p>第二个软件就是我前面《<a href="about:blank" target="_blank" rel="noopener noreferrer">完美解决godaddy免费空间广告条对WordPress后台的影响</a> 》说的zoundry raven 这个软件的界面如下：</p>
<p>下面是文章的编辑窗口</p>
<p>很简介的界面，但是功能一点也不比其他两个软件差，支持分类、图片编辑、标签，并能把标签发送到著名的一些标签网站。是我所用到的感觉最好的一款编辑器，占用资源也小。功能强大，值得使用。</p>
<p>菊子曰，是国内新开发的一个离线博客编辑软件。功能很全面，但是感觉很多的都是在模仿zoundry ，并且资源占用不小。可能是测试版有关系吧。比其他两个多了个评论的功能。其他没有什么亮点，与它的资源占用相比，性价比不高。另外要用这个软件必须要注册菊子曰的用户，否则是不能登录的，最重要的是有个广告条，尽管目前是公益的广告，难免以后会是怎么样，自从金山加广告后，对国内的软件基本上失去了信心，最反对的就是谁在我的软件上加上广告，同样上图：</p>
<p>文章编辑界面，这篇文章就是用菊子曰写的：</p>
]]></content:encoded>
    </item>
    <item>
      <title>体验了下失而复得</title>
      <link>http://localhost:1313/477.html</link>
      <pubDate>Wed, 20 Jan 2010 12:17:03 +0000</pubDate>
      <guid>http://localhost:1313/477.html</guid>
      <description>&lt;p&gt;昨天下午4点多的时候，忽然发现网站打不开了，显示404错误，发现ftp也不能用，进到godaddy的后台，文件管理也进不去了，不过数据库没有影响。给godaddy的客服发了封邮件，给他们说网站不能访问的问题，然后就是等待。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天下午4点多的时候，忽然发现网站打不开了，显示404错误，发现ftp也不能用，进到godaddy的后台，文件管理也进不去了，不过数据库没有影响。给godaddy的客服发了封邮件，给他们说网站不能访问的问题，然后就是等待。</p>
<p>下班回到家后，发现问题还是没有能解决，但是ping都是可以的，从网上搜这个ip发现有这个网址的ip，而且人家的网站也是能访问的，说明问题不具有普遍性。所以自己就开始想办法，把linux的主机换成windows的，然后等能访问了再给换回来。点了确定之后就有些后悔，毕竟是不能访问，说不定就转不过来，但是已经转了，也就不多想了，然后把数据库备份了一下。关机睡觉。</p>
<p>第二天，果然不出所料，空间已经换成了windows的，但是数据没有能转过去，数据库还在，上传网站程序，然后转Linux，出乎意料的是原来的文件什么的都又回来了，非常高兴，看来godaddy还是可以信赖的。<figure class="content-img-box " id="2269"></p>
<p><img decoding="async" alt="体验了下失而复得" src="https://tunan.org/wp-content/uploads/2019/07/15220d7ad23d95.png" id="C522C93C" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>另外，发的邮件回复的比较慢，下午5点发的邮件，一直到半夜1：30收到第一封的邮件：Due to its complex nature, your issue has been relayed to our Advanced Technical Support TeamThank you for contacting Hosting Support and bringing this to our attention. 意思是他们解决不了，要转到高级技术支持，然后在上午8点终于收到了第二封高级技术支持的邮件：The issue regarding account status for lghcx.info has been addressed and should be resolved at this time. If you continue to experience delivery or access problems please let us know and we would be happy to assist you further. We appreciate your patience and understanding in this matter.</p>
<p>Please contact us if you have any further issues.. Our most skilled technicians will be working to resolve your issue quickly and completely. You will be notified promptly upon resolution.</p>
<p>除了回复不及时以外，godaddy的空间还是值得信赖的</p>
]]></content:encoded>
    </item>
    <item>
      <title>关于百度被黑</title>
      <link>http://localhost:1313/446.html</link>
      <pubDate>Wed, 13 Jan 2010 06:20:51 +0000</pubDate>
      <guid>http://localhost:1313/446.html</guid>
      <description>&lt;p&gt;昨天最热门的话题可能就是百度被黑的时间了，印象中百度一直很稳定的，可能也曾经遭受到各类的攻击，但是从来没有被黑的这么彻底，所以刚被黑的时候还不敢确定是不是被黑了。&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天最热门的话题可能就是百度被黑的时间了，印象中百度一直很稳定的，可能也曾经遭受到各类的攻击，但是从来没有被黑的这么彻底，所以刚被黑的时候还不敢确定是不是被黑了。</p>
<p>昨天一大早，照例打开百度，因为负责公司网络推广方面的一些工作，很多的工作都在百度上进行，可惜没有能打开，也没有像有些网友说的被链到yahoo英文或者什么伊朗的黑客组织的网站，而是出来一串英文的字母，可惜的是当时没有截图，否则得花可能就有图有真相了。毕竟从没有想到百度出问题了，不过刷新了几次都不行，然后就问了我的一个朋友。幸好聊天记录在：</p>
<img loading="lazy" decoding="async" class="alignnone size-full wp-image-3974" src="https://tunan.org/wp-content/uploads/2010/01/4e4a20a4462309f7ec552ef6780e0cf3d7cad618.jpg" alt="" width="600" height="450" /> 
<p>之后就一直一会能上，一会不能上的。后来才知道百度被黑了，不讨论百度被黑后带来的什么后果，只为记录下这个事件。另外，把博客换成linux主机的了，windows主机虽然不显示广告，但是1、不能设置防盗链，2、不知道安全不安全，由于不先死广告，怕被k。</p>]]></content:encoded>
    </item>
    <item>
      <title>wordpress中文tag、中文分类找不到文章的解决方法</title>
      <link>http://localhost:1313/407.html</link>
      <pubDate>Sat, 09 Jan 2010 02:19:28 +0000</pubDate>
      <guid>http://localhost:1313/407.html</guid>
      <description>&lt;p&gt;原来用的linux的主机，在设定固定连接后不存在中文tag、中文分类找不到文章，但自从换了godaddy的windows主机以后，由于iis7对php支持不够好的原因，中文的tag，中文的分类等，就会找不到文章，比如：&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>原来用的linux的主机，在设定固定连接后不存在中文tag、中文分类找不到文章，但自从换了godaddy的windows主机以后，由于iis7对php支持不够好的原因，中文的tag，中文的分类等，就会找不到文章，比如：</p>
<p>正常，能访问日志：www.example.com/?tag=中文</p>
<p>不正常，不能访问日志：www.example.com/tag/中文 ；这是系统的原因，没有办法，但我们为了seo还必须启用固定链接，怎么办呢？整了上午，总算找到了解决的方案，而且支持目前的2.9.1版本！<figure class="content-img-box " id=""></p>
<p><img decoding="async" alt="wordpress中文tag、中文分类找不到文章的解决方法" src="https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg" id="0" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>网上有各种版本的解决方法：第一种是修改wp-includes/classes.php文件，这个方法可能在中文系统下有用，但是我在godaddy的主机上用这个方法，直接显示错误。所以这个方法是由局限性的。</p>
<p>第二种方法：修改wp-includes/rewrite.php</p>
<blockquote>
<p>function get_tag_permastruct() {</p>
</blockquote>
<blockquote>
<p>if (isset($this-&gt;tag_structure)) {</p>
</blockquote>
<blockquote>
<p>return $this-&gt;tag_structure;</p>
</blockquote>
<blockquote>
<p>}</p>
</blockquote>
<blockquote>
<p>if (empty($this-&gt;permalink_structure)) { //—–this line need change——</p>
</blockquote>
<blockquote>
<p>$this-&gt;tag_structure = ”;</p>
</blockquote>
<blockquote>
<p>return false;</p>
</blockquote>
<blockquote>
<p>}</p>
</blockquote>
<blockquote>
<p>把第5行改为</p>
</blockquote>
<pre class="ql-syntax" spellcheck="false"><span class="hljs-keyword">if</span> (!<span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;permalink_structure)) {
</pre>
<p>第三种方法：</p>
<p>一个一劳永逸的解决方法，还不用修改源代码，去你的WordPress后台，到“设置”-“固定链接”里，在“标签前缀”</p>
<p>里填上“?tag=”，这样，你点击文章中的中文tag时，自动打开了“www.example.com/?tag=中文”格式的页面，这样一来，你的tag就正常了。</p>
<p>经过验证，后面两种方法可以完美解决这个问题。</p>
]]></content:encoded>
    </item>
    <item>
      <title>提供WordPress 主题 Marcelle的汉化版本</title>
      <link>http://localhost:1313/304.html</link>
      <pubDate>Sat, 26 Dec 2009 08:05:16 +0000</pubDate>
      <guid>http://localhost:1313/304.html</guid>
      <description>&lt;p&gt;昨天发掘出 Marcelle这个主题，很快为他的那种简约而清爽的界面而吸引，打算使用这个主题，简单的汉化以后，觉得还不错，不过今天就又发现了个更适合的，也就是目前所用的这个主题，所以就把昨天汉化的这个给分享出来吧，有喜欢的可以下载用用。&lt;figure class=&#34;content-img-box&#34; id=&#34;2309&#34;&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>昨天发掘出 Marcelle这个主题，很快为他的那种简约而清爽的界面而吸引，打算使用这个主题，简单的汉化以后，觉得还不错，不过今天就又发现了个更适合的，也就是目前所用的这个主题，所以就把昨天汉化的这个给分享出来吧，有喜欢的可以下载用用。<figure class="content-img-box" id="2309"></p>
<p><img decoding="async" alt="提供WordPress 主题 Marcelle的汉化版本" src="https://tunan.org/wp-content/uploads/2019/07/129c3de904bde5.jpg" id="B94546F9" class="po-img-big" /> <figcaption class="addDesn"></figcaption></figure></p>
<p>这款名叫Marcelle的Wordpress 主题整体配色采用了柔和的城砖青，简单又不失大气，稳重而宁静。</p>
<p>版本要求：Wordpress 2.7+</p>
<p>主题特点：</p>
<p>1、支持 Gallery（自适应尺寸）；</p>
<p>2、兼容Opera、 Netscape、Safari、Firefox以及 IE6+等主流浏览器，通过XHTML测试；</p>
<p>3、支持嵌套回复，支持Gravatar；</p>
<p>4、页眉预留广告位，支持Google ADsense ；</p>
<p>5、SEO优选；</p>
<p>汉化修改后，在seo方面做了加强，并且在内容页增加了两个广告位，支持Google ADsense和阿里妈妈。</p>
<p>下载后需要把我原来的广告给替换。</p>
<p><a href="http://www.lghcx.com/wp-content/uploads/2009/12/marcelle.zip" target="_blank" style="color: rgb(128, 0, 128);" rel="noopener noreferrer">下载地址</a></p>
]]></content:encoded>
    </item>
  </channel>
</rss>
